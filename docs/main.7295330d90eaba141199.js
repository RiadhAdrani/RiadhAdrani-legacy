/*! For license information please see main.7295330d90eaba141199.js.LICENSE.txt */
(()=>{"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}();const t="free",n="handling-requests",i=(e,t)=>({sender:e,time:Date.now(),uuid:t});class s{static singleton=new s;constructor(){s.singleton instanceof s&&o("RecursiveOrchestrator cannot have more than one instance",["RecursiveOrchestrator is an internal class and should not be used in development."]),this.currentTask={done:!0},this.step=t,this.updatesCount=0,this.batching=!1,this.stateChanged=!1,this.batchingStartTime=Date.now(),this.batchingLastDuration=0,this.batchingRequests=[],this.unhandledRequests=[]}requestUpdate(e){if(this.step===t||this.step===n)return this.step===t?(b.singleton.update(),this.updatesCount++,this.countUpdateSinceFree(),void(this.unhandledRequests.length>0?(s.changeState(n),this.requestUpdate("unhandled-requests")):this.free())):this.step===n?(this.unhandledRequests=[],b.singleton.update(),this.updatesCount++,void(this.unhandledRequests.length>0?(s.changeState(n),this.unhandledRequests=[],this.requestUpdate("unhandled-requests")):this.free())):void 0;this.unhandledRequests.push(i(e))}static watchTask(e){const t=this.taskUUID(e);return s.singleton.watchTask(t,e),()=>this.unWatchTask(t)}static unWatchTask(e){s.singleton.unwatchTask(e)}watchTask(e,t,n=(()=>{})){this.currentTask.done,this.currentTask={name:e,time:t,done:!1,step:this.step},setTimeout((()=>{this.currentTask.done||this.currentTask.name!==e?this.currentTask.done=!0:n()}),1.5*t)}unwatchTask(e){this.currentTask.name!==e||(this.currentTask.done=!0)}static startTask(e,t,n){n&&(s.singleton.step=n);const i=s.watchTask(t);e(),i()}static taskUUID(e){let t="";for(let e=0;e<5;e++)t+=Math.random()*e*10*Math.random();return`task-${t}-${e}`}static states={FREE:t,COMPUTE_DIFF:"calculating-diff",COMPUTE_TREE:"calculating-tree",COMPUTE_STYLE:"calculating-style",RENDERING:"rendering",UPDATING:"updating",EXEC_BEFORE_DESTROYED:"execute-before-destroyed",COMMIT_INTO_DOM:"commit-into-dom",EXEC_ON_CREATED:"execute-on-created",EXEC_ON_DESTROYED:"execute-on-destroyed",EXEC_ON_UPDATED:"execute-on-updated",EXEC_ON_INJECTED:"execute-on-injected",CLEAN_STATES:"clean-states"};static changeState(e){s.singleton.step=e}free(){this.updatesCount=0,this.stateChanged=!1,s.changeState(t)}countUpdateSinceFree(){setTimeout((()=>{this.updatesCount>200&&o("Infinite re-render detected",["This error occured because the RecursiveDOM detected the need of a large amount of updates in a short period of time.","Avoid updating the state without any condition specially in hooks"])}),2e3)}startBatching(){this.batchingStartTime=Date.now(),this.batching=!0}endBatching(e){this.batchingLastDuration=Date.now()-this.batchingStartTime,this.batchingRequests=[],this.batching=!1,this.stateChanged&&this.requestUpdate(e)}requestEndBatching(e){this.batchingRequests.length>0&&(this.batchingRequests=this.batchingRequests.filter((t=>t.uuid!==e))),0===this.batchingRequests.length&&this.endBatching(e)}requestStartBatching(e){if(this.batching){const t=s.taskUUID(20);this.batchingRequests.push(i(e,t)),setTimeout((()=>{this.batchingRequests.find((e=>e.uuid===t))&&(console.warn("Batch request took too long (more than 20ms). This could be caused by a catched error. Avoid batching your updates in an asynchronous call and using await inside the updateAfter method."),this.endBatching(e))}),20)}else this.startBatching()}static isBatching=()=>!0===s.singleton.batching;static requestUpdate=e=>{s.singleton.requestUpdate(e)};static requestBatchingStart=e=>{s.singleton.requestStartBatching(e)};static requestBatchingEnd=e=>{s.singleton.requestEndBatching(e)};static notifyStateChanged=()=>{s.singleton.stateChanged=!0}}window.orchestrator=s.singleton;const r=s,o=(e,t)=>{const n=new Error(e);throw n.help=t,n},a={Attributes:{autoFocus:"autofocus",abbreviation:"abbr",align:"align",alt:"alt",allow:"allow",allowFullScreen:"allowfullscreen",allowPaymentRequest:"allowpaymentrequest",accept:"accept",autoComplete:"autocomplete",autoplay:"autoplay",acceptCharSet:"acceptcharset",action:"action",cols:"cols",color:"color",className:"className",controls:"controls",cite:"cite",crossOrigin:"crossorigin",coords:"coords",checked:"checked",charSet:"charset",colSpan:"colSpan",contentEditable:"contenteditable",data:"data",dirName:"dirname",dir:"dir",disabled:"disabled",dateTime:"datetime",download:"download",decoding:"decoding",default:"default",draggable:"draggable",encType:"enctype",form:"form",formAction:"formaction",formEncType:"formenctype",formMethod:"formmethod",formNoValidate:"formnovalidate",formTarget:"formtarget",isFor:"for",href:"href",hrefLang:"hreflang",height:"height",high:"high",headers:"headers",id:"id",isMap:"ismap",kind:"kind",loop:"loop",list:"list",loading:"loading",longDesc:"longdesc",low:"low",label:"label",max:"max",min:"min",media:"media",maxLength:"maxLength",minLength:"minLength",muted:"muted",multiple:"multiple",method:"method",name:"name",noValidate:"novalidate",noWrap:"nowrap",noShade:"noshade",open:"open",optimum:"optimum",placeholder:"placeholder",ping:"ping",preload:"preload",pattern:"pattern",playsInline:"playsinline",poster:"poster",rel:"rel",rev:"rev",readOnly:"readonly",required:"required",rows:"rows",referrerPolicy:"referrerpolicy",src:"src",span:"span",sandbox:"sandbox",srcDoc:"srcdoc",sizes:"sizes",srcSet:"srcset",srcLang:"srclang",step:"step",shape:"shape",start:"start",size:"size",rowSpan:"rowspan",scope:"scope",selected:"selected",spellCheck:"spellcheck",type:"type",title:"title",target:"target",useMap:"usemap",value:"value",wrap:"wrap",width:"width"},CssAttributes:{accentColor:"accent-color",alignContent:"align-content",alignItems:"align-items",alignSelf:"align-self",alignTracks:"align-tracks",all:"all",animation:"animation",animationDelay:"animation-delay",animationDuration:"animation-duration",animationFillMode:"animation-fill-mode",animationIterationCount:"animation-iteration-count",animationName:"animation-name",animationPlayState:"animation-play-state",animationTimingFunction:"animation-timing-function",appearance:"appearance",ascentOverride:"ascent-override",aspectRatio:"aspect-ratio",backdropFilter:"backdrop-filter",backfaceVisibility:"backface-visibility",background:"background",backgroundAttachment:"background-attachment",backgroundBlendMode:"background-blend-mode",backgroundClip:"background-clip",backgroundColor:"background-color",backgroundImage:"background-image",backgroundOrigin:"background-origin",backgroundPosition:"background-position",backgroundPositionX:"background-position-x",backgroundPositionY:"background-position-y",backgroundRepeat:"background-repeat",backgroundSize:"background-size",blockSize:"block-size",borderBlock:"border-block",borderBlockColor:"border-block-color",borderBlockStyle:"border-block-style",borderBlockWidth:"border-block-width",borderBlockEnd:"border-block-end",borderBlockEndColor:"border-block-end-color",borderBlockEndStyle:"border-block-end-style",borderBlockEndWidth:"border-block-end-width",borderBlockStart:"border-block-start",borderBlockStartColor:"border-block-start-color",borderBlockStartStyle:"border-block-start-style",borderBlockStartWidth:"border-block-start-width",border:"border",borderBottom:"border-bottom",borderBottomColor:"border-bottom-color",borderBottomLeftRadius:"border-bottom-left-radius",borderBottomRightRadius:"border-bottom-right-radius",borderBottomStyle:"border-bottom-style",borderBottomWidth:"border-bottom-width",borderCollapse:"border-collapse",borderColor:"border-color",borderEndEndRadius:"border-end-end-radius",borderEndStartRadius:"border-end-start-radius",borderStartEndRadius:"border-start-end-radius",borderStartStartRadius:"border-start-start-radius",borderImage:"border-image",borderImageOutset:"border-outset",borderImageRepeat:"border-image-repeat",borderImageSlice:"border-image-slice",borderImageSource:"border-image-source",borderImageWidth:"border-image-width",borderInline:"border-inline",borderInlineColor:"border-inline-color",borderInlineStyle:"border-inline-style",borderInlineWidth:"border-inline-width",borderInlineEnd:"border-inline-end",borderInlineEndColor:"border-inline-end-color",borderInlineEndStyle:"border-inline-end-style",borderInlineEndWidth:"border-inline-end-width",borderStartEnd:"border-start-end",borderInlineStartColor:"border-inline-start-color",borderInlineStartStyle:"border-inline-start-style",borderInlineStartWidth:"border-inline-start-width",borderLeft:"border-left",borderLeftColor:"border-left-color",borderLeftStyle:"border-left-style",borderLeftWidth:"border-left-width",borderRadius:"border-radius",borderRight:"border-right",borderRightColor:"border-right-color",borderRightStyle:"border-right-style",borderRightWidth:"border-right-width",borderSpacing:"border-spacing",borderStyle:"border-style",borderTop:"border-top",borderTopColor:"border-top-color",borderTopLeftRadius:"border-top-left-radius",borderTopRightRadius:"border-top-right-radius",borderTopStyle:"border-top-style",borderTopWidth:"border-top-width",borderWidth:"border-width",bottom:"bottom",boxDecorationBreak:"box-decoration-break",boxShadow:"box-shadow",boxSizing:"box-sizing",breakAfter:"break-after",breakBefore:"break-before",breakInside:"break-inside",captionSide:"caption-side",caretColor:"caret-color",clear:"clear",clip:"clip",clipPath:"clip-path",color:"color",colorAdjust:"color-adjust",colorScheme:"color-scheme",columnCount:"column-count",columnFill:"column-fill",columnGap:"column-gap",columnRule:"column-rule",columnRuleColor:"column-rule-color",columnRuleStyle:"column-rule-style",columnRuleWidth:"column-rule-width",columnSpan:"column-span",columnWidth:"column-width",columns:"columns",contain:"contain",content:"content",contentVisibility:"content-visibility",counterIncrement:"counter-increment",counterReset:"counter-reset",counterSet:"counter-set",cursor:"cursor",direction:"direction",display:"display",emptyCells:"empty-cells",filter:"filter",flex:"flex",flexBasis:"flex-basis",flexDirection:"flex-direction",flexFlow:"flex-flow",flexGrow:"flex-grow",flexShrink:"flex-shrink",flexWrap:"flex-wrap",float:"float",font:"font",fontFamily:"font-family",fontFeatureSettings:"font-feature-settings",fontKerning:"font-kerning",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontSynthesis:"font-synthesis",fontVariant:"font-variant",fontVariantAlternates:"font-variant-alternates",fontVariantCaps:"font-variant-caps",fontVariantEastAsian:"font-variant-east-asian",fontVariantLigatures:"font-variant-ligatures",fontVariantNumeric:"font-variant-numeric",fontVariantPosition:"font-variant-position",fontVariantSettings:"font-variant-settings",fontWeight:"font-weight",forcedColorAdjust:"forced-color-adjust",gap:"gap",grid:"grid",gridArea:"grid-area",gridAutoColumns:"grid-auto-columns",gridAutoFlow:"grid-auto-flow",gridAutoRows:"grid-auto-rows",gridColumn:"grid-column",gridColumnEnd:"grid-column-end",gridColumnGap:"grid-column-gap",gridColumnStart:"grid-column-start",gridGap:"grid-gap",gridRow:"grid-row",gridRowEnd:"grid-row-end",gridRowGap:"grid-row-gap",gridRowStart:"grid-row-start",gridTemplate:"grid-template",gridTemplateAreas:"grid-template-areas",gridTemplateColumns:"grid-template-columns",gridTemplateRows:"grid-template-rows",hangingPunctuation:"hanging-punctuation",height:"height",hyphens:"hyphens",isolation:"isolation",imageOrientation:"image-orientation",imageRendering:"image-rendering",imageResolution:"image-resolution",initialLetter:"initial-letter",inlineSize:"inline-size",inset:"inset",insetBlock:"inset-block",insetBlockStart:"inset-block-end",insetBlockStart:"inset-block-start",insetBlock:"inset-inline",insetInlineStart:"inset-inline-end",insetInlineStart:"inset-inline-start",justifyContent:"justify-content",justifyItems:"justify-items",justifySelf:"justify-self",left:"left",letterSpacing:"letter-spacing",lineHeight:"line-height",lineBreak:"line-break",listStyle:"list-style",listStyleImage:"list-style-image",listStylePosition:"list-style-position",listStyleType:"list-style-type",margin:"margin",marginBlock:"margin-block",marginBlockEnd:"margin-block-end",marginBlockStart:"margin-block-start",marginBottom:"margin-bottom",marginInline:"margin-inline",marginInlineEnd:"margin-inline-end",marginInlineStart:"margin-inline-start",marginLeft:"margin-left",marginRight:"margin-right",marginTop:"margin-top",mask:"mask",maskBorder:"mask-border",maskBorderMode:"mask-border-mode",maskBorderOutset:"mast-border-outset",maskBorderRepeat:"mask-border-repeat",maskBorderSlice:"mask-border-slice",maskBorderSource:"mask-border-source",maskBorderWidth:"mask-border-width",maskClip:"mask-clip",maskComposite:"mask-composite",maskImage:"mask-image",maskMode:"mask-mode",maskOrigin:"mask-origin",maskPosition:"mask-position",maskRepeat:"mask-repeat",maskSize:"mask-size",maskType:"mask-type",mathStyle:"math-style",maxBlockSize:"max-block-size",maxInlineSize:"max-inline-size",minBlockSize:"min-block-size",minInlineSize:"min-inline-size",maxHeight:"max-height",maxWidth:"max-width",minHeight:"min-height",minWidth:"min-width",mixBlendMode:"mix-blend-mode",objectFit:"object-fit",objectPosition:"object-position",offset:"offset",offsetAnchor:"offset-anchor",offsetDistance:"offset-distance",offsetPath:"offset-path",offsetPosition:"offset-position",offsetRotate:"offset-rotate",opacity:"opacity",order:"order",orphans:"orphans",outline:"outline",outlineColor:"outline-color",outlineOffset:"outline-offset",outlineStyle:"outline-style",outlineWidth:"outline-width",overflow:"overflow",overflowAnchor:"overflow-anchor",overflowBlock:"overflow-block",overflowClipMargin:"overflow-clip-margin",overflowInline:"overflow-inline",overflowWrap:"overflow-wrap",overflowX:"overflow-x",overflowY:"overflow-y",overscrollBehavior:"overscroll-behavior",overscrollBehaviorBlock:"overscroll-behavior-block",overscrollBehaviorInline:"overscroll-behavior-inline",overscrollBehaviorX:"overscroll-behavior-x",overscrollBehaviorY:"overscroll-behavior-y",padding:"padding",paddingBlock:"padding-block",paddingBlockEnd:"padding-block-end",paddingBlockStart:"padding-block-start",paddingBottom:"padding-bottom",paddingInline:"padding-inline",paddingInlineEnd:"padding-inline-end",paddingInlineStart:"padding-inline-start",paddingLeft:"padding-left",paddingRight:"padding-right",paddingTop:"padding-top",pageBreakAfter:"page-break-after",pageBreakBefore:"page-break-before",pageBreakInside:"page-break-inside",perspective:"perspective",perspectiveOrigin:"perspective-origin",placeContent:"place-content",placeItems:"place-items",pointerEvents:"pointer-events",position:"position",quotes:"quotes",resize:"resize",revert:"revert",right:"right",rotate:"rotate",rowGap:"row-gap",rubyAlign:"ruby-align",rubyPosition:"ruby-position",scale:"scale",scrollBehavior:"scroll-behavior",scrollMargin:"scroll-margin",scrollMarginBlock:"scroll-margin-block",scrollMarginBlockEnd:"scroll-margin-block-end",scrollMarginBlockStart:"scroll-margin-block-start",scrollMarginBottom:"scroll-margin-bottom",scrollMarginInline:"scroll-margin-inline",scrollMarginInlineEnd:"scroll-margin-inline-end",scrollMarginInlineStart:"scroll-margin-inline-start",scrollMarginLeft:"scroll-margin-left",scrollMarginRight:"scroll-margin-right",scrollMarginTop:"scroll-margin-top",scrollPadding:"scroll-padding",scrollPaddingBlock:"scroll-padding-block",scrollPaddingBlockEnd:"scroll-padding-block-end",scrollPaddingBlockStart:"scroll-padding-block-start",scrollPaddingBottom:"scroll-padding-bottom",scrollPaddingInline:"scroll-padding-inline",scrollPaddingInline:"scroll-padding-inline-end",scrollPaddingInlineStart:"scroll-padding-inline-start",scrollPaddingLeft:"scroll-padding-left",scrollPaddingRight:"scroll-padding-right",scrollPaddingTop:"scroll-padding-top",scrollSnapAlign:"scroll-snap-align",scrollSnapStop:"scroll-snap-stop",scrollSnapType:"scroll-snap-type",scrollbarColor:"scrollbar-color",scrollbarGutter:"scrollbar-gutter",scrollbarWidth:"scrollbar-width",shapeImageThreshold:"shape-image-threshold",shapeMargin:"shape-margin",shapeOutside:"shape-outside",tabSize:"tab-size",tableLayout:"table-layout",textAlign:"text-align",textAlignLast:"text-align-last",textCombineUpright:"text-combine-upright",textDecoration:"text-decoration",textDecorationColor:"text-decoration-color",textDecorationLine:"text-decoration-line",textDecorationSkip:"text-decoration-skip",textDecorationSkipInk:"text-decoration-skip-ink",textDecorationStyle:"text-decoration-style",textDecorationThickness:"text-decoration-thickness",textEmphasis:"text-emphasis",textEmphasisColor:"text-emphasis-color",textEmphasisPosition:"text-emphasis-position",textEmphasisStyle:"text-emphasis-style",textIndent:"text-indent",textJustify:"text-justify",textOrientation:"text-orientation",textOverflow:"text-overflow",textRendering:"text-rendering",textShadow:"text-shadow",textSizeAdjust:"text-size-adjust",textTransform:"text-transform",textUnderlineOffset:"text-underline-offset",textUnderlinePosition:"text-underline-position",top:"top",touchAction:"touch-action",transform:"transform",transformBox:"transform-box",transformOrigin:"transform-origin",transformStyle:"transform-style",transition:"transition",transitionDelay:"transition-delay",transitionDuration:"transition-duration",transitionProperty:"transition-property",transitionTimingFunction:"transiton-timing-function",translate:"translate",unicodeBidi:"unicode-bidi",userSelect:"user-select",verticalAlign:"vertical-align",visibility:"visibility",whiteSpace:"white-space",width:"width",widows:"widows",wordBreak:"word-break",wordSpacing:"word-spacing",wordWrap:"word-wrap",writingMode:"writing-mode",zIndex:"z-index",webkitLineClamp:"-webkit-line-clamp",webkitAppearance:"-webkit-appearance",webkitTextEmphasis:"-webkit-text-emphasis",webkitHyphens:"-webkit-hyphens",mozAppearance:"-moz-appearance",mozTabSize:"-moz-tab-size",mozHyphens:"-moz-hyphens",oTabSize:"-o-tab-size",msHyphens:"-ms-hyphens"},Events:{onAbort:{listener:"abort",on:"onabort"},onAnimationEnd:{listener:"animationend",on:"onanimationend"},onAnimationIteration:{listener:"animationiteration",on:"onanimationiteration"},onAnimationStart:{listener:"animationstart",on:"onanimationstart"},onAnimationEnd:{listener:"animationend",on:"onanimationend"},onBeforePrint:{listener:"beforeprint",on:"onbeforeprint"},onBeforeUnload:{listener:"beforeunload",on:"onberforeunload"},onBlur:{listener:"blur",on:"onblur"},onCanPlay:{listener:"canplay",on:"oncanplay"},onCanPlayThrough:{listener:"canplaythrough",on:"oncanplaythroug"},onChange:{listener:"change",on:"onchange"},onClick:{listener:"click",on:"onclick"},onContextMenu:{listener:"contextmenu",on:"oncontextmenu"},onCopy:{listener:"copy",on:"oncopy"},onCut:{listener:"cut",on:"oncut"},onDoubleClick:{listener:"dblclick",on:"ondblclick"},onDrag:{listener:"drag",on:"ondrag"},onDragEnd:{listener:"dragend",on:"ondragend"},onDragEnter:{listener:"dragenter",on:"ondragenter"},onDragLeave:{listener:"dragleave",on:"ondragleave"},onDragOver:{listener:"dragover",on:"ondragover"},onDragStart:{listener:"dragstart",on:"ondragstart"},onDrop:{listener:"drop",on:"ondrop"},onDurationChange:{listener:"durationchange",on:"ondurationchange"},onEnded:{listener:"ended",on:"onended"},onError:{listener:"error",on:"onerror"},onFocus:{listener:"focus",on:"onfocus"},onFocusIn:{listener:"focusin",on:"onfocusin"},onFocusOut:{listener:"focusout",on:"onfocusout"},onFullScreenChange:{listener:"fullscreenchange",on:"onfullscreenchange"},onHashChange:{listener:"hashchange",on:"onhashchange"},onInput:{listener:"input",on:"oninput"},onInvalid:{listener:"invalid",on:"oninvalid"},onKeyDown:{listener:"keydown",on:"onkeydown"},onKeyPress:{listener:"keypress",on:"onkeypress"},onKeyUp:{listener:"keyup",on:"onkeyup"},onLoad:{listener:"load",on:"onload"},onLoadedData:{listener:"loadeddata",on:"onloadeddata"},onLoadedMetaData:{listener:"loadedmetadata",on:"onloadedmetadata"},onLoadStart:{listener:"loadstart",on:"onloadstart"},onMessage:{listener:"message",on:"onmessage"},onMouseDown:{listener:"mousedown",on:"onmousedown"},onMouseEnter:{listener:"mouseenter",on:"onmouseenter"},onMouseLeave:{listener:"mouseleave",on:"onmouseleave"},onMouseMove:{listener:"mousemove",on:"onmousemove"},onMouseOver:{listener:"mouseover",on:"onmouseover"},onMouseOut:{listener:"mouseout",on:"onmouseout"},onMouseUp:{listener:"mouseup",on:"onmouseup"},onOffline:{listener:"offline",on:"ononffline"},onOnline:{listener:"online",on:"ononline"},onOpen:{listener:"open",on:"onopen"},onPageHide:{listener:"pagehide",on:"onpagehide"},onPageShow:{listener:"pageshow",on:"onpageshow"},onPaste:{listener:"paste",on:"onpaste"},onPause:{listener:"pause",on:"onpause"},onPlay:{listener:"play",on:"onplay"},onPlaying:{listener:"playing",on:"onplaying"},onPopState:{listener:"popstate",on:"onpopstate"},onProgress:{listener:"progress",on:"onprogress"},onRateChange:{listener:"ratechange",on:"onratechange"},onResize:{listener:"resize",on:"onresize"},onReset:{listener:"reset",on:"onreset"},onScroll:{listener:"scroll",on:"onscroll"},onSearch:{listener:"search",on:"onsearch"},onSeeked:{listener:"seeked",on:"onseeked"},onSeeking:{listener:"seeking",on:"onseeking"},onSelect:{listener:"select",on:"onselect"},onSelectionChange:{listener:"selectionchange",on:"onselectionchange"},onShow:{listener:"show",on:"onshow"},onStalled:{listener:"stalled",on:"onstalled"},onStorage:{listener:"storage",on:"onstorage"},onSubmit:{listener:"submit",on:"onsubmit"},onSuspend:{listener:"suspend",on:"onsuspend"},onTimeUpdate:{listener:"timeupdate",on:"ontimeupdate"},onToggle:{listener:"toggle",on:"ontoggle"},onTouchCancel:{listener:"touchcancel",on:"ontouchcancel"},onTouchEnd:{listener:"touchend",on:"ontouchend"},onTouchMove:{listener:"touchmove",on:"ontouchmove"},onTouchStart:{listener:"touchstart",on:"ontouchstart"},onTransitionEnd:{listener:"transitionend",on:"ontransitionend"},onUnload:{listener:"unload",on:"onunload"},onVolumeChange:{listener:"volumnechange",on:"onvolumechange"},onWaiting:{listener:"waiting",on:"onwaiting"},onWheel:{listener:"wheel",on:"onwheel"},onClickGlobal:{listener:"clickglobal",on:"onclickglobal",handler:e=>{window.onclickglobal||(window.onclickglobal=[]),onclickglobal.push(e)}}},Flags:{forceRerender:"force-rerender",renderIf:"render-if"},FontFace:{ascentOverride:"ascent-override",descentOverride:"descent-override",fontDisplay:"font-display",fontFamily:"font-family",fontStretch:"font-stretch",fontStyle:"font-style",fontWeight:"font-weight",fontVariant:"font-variant",fontFeatureSettings:"font-feature-settings",fontVariationSettings:"font-variation-settings",lineGapOverride:"line-gap-override",src:"src",unicodeRange:"unicode-range",sizeAdjust:"size-adjust"},Hooks:{onCreated:"onCreated",onDestroyed:"onDestroyed",onUpdated:"onUpdated",beforeDestroyed:"beforeDestroyed",onRef:"onRef"},CssSelectors:{normal:"",active:":active",anyLink:":any-link",checked:":checked",default:":default",defined:":defined",disabled:":disabled",empty:":empty",enabled:":enabled",first:":first",firstChild:":first-child",firstOfType:":first-of-type",fullscreen:"fullscreen",focus:":focus",focusVisible:":focus-visible",focusWithin:":focus-within",hover:":hover",indeterminate:":indeterminate",inRange:":in-range",invalid:":invalid",lastChild:":last-child",lastOfType:":last-of-type",link:":link",onlyChild:":only-child",onlyOfType:":only-of-type",optional:":optional",outOfRange:":out-of-range",pictureInPicutre:":picture-in-picture",placeholderShown:":placeholder-shown",readOnly:":read-only",readWrite:":read-write",required:":required",scope:":scope",target:":target",valid:":valid",visited:":visited",after:"::after",before:"::before",cue:"::cue",cueRegion:"::cue-region",firstLetter:"::first-letter",firstLine:"::first-line",fileSelectorButton:"::file-selector-button",placeholder:"::placeholder",selection:"::selection",marker:"::marker",webkitScrollbar:"::-webkit-scrollbar",webkitScrollbarTrack:"::-webkit-scrollbar-track",webkitScrollbarThumb:"::-webkit-scrollbar-thumb",webkitScrollbarThumbHover:"::-webkit-scrollbar-thumb:hover",webkitScrollbarThumbActive:"::-webkit-scrollbar-thumb:active"}},c={convertSelectorContent:function(e,t=""){let n="";for(let i in e)a.CssAttributes[i]&&(n+=`${t}${a.CssAttributes[i]}:${e[i]};`);return n},convertAnimation:function(e){let t="";for(const n in e.steps)t+=`${n}{${this.convertSelectorContent(e.steps[`${n}`])}}`;return`@keyframes ${e.name}{${t}}`},convertMediaQueries:function(e,t=!0){let n="";for(var i in e){for(var s in n+=`@media ${i}{`,e[i])n+=`${t?".":""}${s}{${this.convertSelectorContent(e[i][s])}}`;n+="}"}return n},convertFontFace:function(e){let t="";for(let n in e)a.FontFace[n]&&(t+=`${n}:${e[n]};`);return t},exportStatic:function(e){if(!e)return;let t="";if(e.import)for(let n in e.import)t+=`@import ${e.import[n]};`;if(e.font&&(t+=`@font-face {${this.convertFontFace(e.font)}}`),e.charset){t+="";for(let n in e.charset)t+=`@charset "${e.font[n]}";`}if(e.selectors)for(let n in e.selectors)t+=`${n}{${this.convertSelectorContent(e.selectors[n],"")}}`;if(e.media&&(t+="",t+=this.convertMediaQueries(e.media,!1)),e.animations){t+="\n";for(let n in e.animations)t+=this.convertAnimation({name:n,steps:e.animations[n]})}return t},convertStyle:function(e,t,n){let i="";return e.forEach((e=>{i+=`${e.selector}{${this.convertSelectorContent(e.content)}}`})),t.forEach((e=>{i+=this.convertAnimation(e)})),i+=`${this.convertMediaQueries(this.prepareMediaQueries(n))}`,i},overrideSameSelector:function(e,t){for(var n of Object.keys(t))e[n]||(e[n]=t[n]);return e},solveDuplicateSelectors:function(e){const t={};for(let n in e)t[`${e[n].selector}${a.CssSelectors[e[n].type]}`]?t[`${e[n].selector}${a.CssSelectors[e[n].type]}`]=this.overrideSameSelector(e[n].content,t[`${e[n].selector}${a.CssSelectors[e[n].type]}`]):t[`${e[n].selector}${a.CssSelectors[e[n].type]}`]=e[n].content;return t},prepareMediaQueries:function(e){const t={};e.length>0&&e.forEach((e=>{e.queries.forEach((n=>{for(var i in t[n.condition]||(t[n.condition]=[]),n)"condition"!==i&&t[n.condition].push({type:`${i}`,selector:e.className,content:n[i]})}))}));const n={};for(var i in t)n[i]=this.solveDuplicateSelectors(t[i]);return n},export:function(e,t,n,i,s){let r=[],o=[];const a=[],c=[];for(let t in e){let n=!1;for(let i in r)if(r[i].selector===e[t].selector){a.includes(r[i].selector)||a.push(r[i].selector),n=!0,this.overrideSameSelector(r[i].content,e[t].content);break}n||r.push(e[t])}if(t.length>0)for(let e in t){let n=!1;for(let i in o)if(o[i].name===t[e].name){n=!0,c.includes(o[i].name)||c.push(o[i].name),o=o.filter((e=>e.name!==o[i].name)),o.push(t[e]);break}n||o.push(t[e])}return{ss:this.convertStyle(r,o,n),warnings:{animation:c.length>0&&`DUPLICATE ANIMATION${c.length>1?"S":""}: (${c}) => found more than once`,selectors:a.length>0&&`DUPLICATE STYLE${a.length>1?"S":""}: (${a}) => found more than once.`}}}};class l{static singleton=new l;constructor(){l.singleton instanceof l&&o("RecrusiveCSSOM cannot have more than one instance",["RecrusiveCSSOM is an internal class and should not be used in development."]),this.appStaticStyle=document.createElement("style"),this.appStaticStyle.id="app-static-style",this.appDynamicStyle=document.createElement("style"),this.appDynamicStyle.id="app-dynamic-style",this.appStyle=document.createElement("style"),this.appStyle.id="app-components-style",document.querySelector("head").append(this.appStaticStyle),document.querySelector("head").append(this.appStyle),document.querySelector("head").append(this.appDynamicStyle),this.sheet="",this.staticSheet="",this.dynamicSheet="",this.dynamicStack=[],this.current={selectors:[],animations:[],mediaQueries:[]}}update(e){this.injectDynamicStyle(),this.current={selectors:[],animations:[],mediaQueries:[]},e.forEach((e=>{e.className&&((e,t,n,i)=>{if(e)if(e.className){const r=(t,n)=>({selector:`.${e.className.trim()}${t.trim()}`,content:n});for(var s in e.mediaQueries&&n.push({queries:e.mediaQueries,className:e.className}),e.animations&&e.animations.forEach((e=>{i.push(e)})),e)"mediaQueries"!==s&&"animations"!==s&&"className"!==s&&"scoped"!==s&&"inline"!==s&&(a.CssSelectors[s]||"normal"===s?t.push(r(a.CssSelectors[s],e[s])):o(`"${s}" is not a valid CSS selector or is not yet implemented.`,['Wrap your style inside a "normal" selector when using the "style".',"You may have typos."]))}else o('"className" is missing in the "styleSheet"',['The styleSheet does not include a "className" definition.','The "styleSheet" should include a valid "className" to be applied.'])})(e,this.current.selectors,this.current.mediaQueries,this.current.animations)}));const t=c.export(this.current.selectors,this.current.animations,this.current.mediaQueries),n=t.ss;b.devMode&&(t.warnings.animation&&console.warn(t.warnings.animation),t.warnings.selectors&&console.warn(t.warnings.selectors)),this.sheet!==n&&(this.appStyle.innerHTML=n,this.sheet=n)}injectStaticStyle(e){const t=c.exportStatic(e);t!==this.staticSheet&&(this.appStaticStyle.innerHTML=t)}addDynamicDeclaration(e){this.dynamicStack.push(e)}injectDynamicStyle(){let e="";this.dynamicStack.forEach((t=>{e+=c.exportStatic(t)})),e!=this.dynamicSheet&&(this.appDynamicStyle.innerHTML=e,this.dynamicSheet=e),this.dynamicStack=[]}}const h=l;class u{constructor(e,t,n,i){this.uid=t,this.value=e,this.beforeDestroyed=n,this.onInit=i,this.preValue=void 0}static reservedStates=["route"];setValue(e){const t=this.value!==e;this.preValue=this.value,this.value=e,t&&(r.notifyStateChanged(this.uid),!1===r.isBatching()&&r.requestUpdate(this.uid))}static updateAfter(e){r.requestBatchingStart("update-after"),e(),r.requestBatchingEnd("update-after")}static setState(e,t,n,i){return u.reservedStates.includes(e)&&o(`${e} is a reserved state UID`,[`You have used a reserved UID from this list : ${u.reservedStates}`]),f.singleton.setState(new u(t,e,i,n))}static setReservedState(e,t){const n=new u(t,e);return n.isReserved=!0,f.singleton.setState(n)}}const d=u;class p{static singleton=new p;constructor(){p.singleton instanceof p&&o("State Registry already exists",["State Resigtry cannot be instanciated more than once. Are you trying to manually create an object?"]),this.states={},this.current=[],this.new=[]}clean(){for(let e=0;e<this.current.length;e++){const t=this.current[e];d.reservedStates.includes(t)||-1===this.new.indexOf(t)&&(this.states[t]&&"function"==typeof this.states[t].beforeDestroyed&&this.states[t].beforeDestroyed(),delete this.states[t])}this.current=this.new,this.new=[]}static clean=()=>p.singleton.clean();setState(e){let t=!1;e.uid||o("State object does not have a valid uid",["setState accepts two parameters: the first is the unique identifier (UID) and the second is the initial value."]),this.states[e.uid]||(this.states[e.uid]=e,t=!0),this.new.push(e.uid);const n=this.states[e.uid].value,i=this.states[e.uid].preValue;return"function"==typeof e.onInit&&t&&e.onInit(),[n,t=>{this.states[e.uid]&&this.states[e.uid].setValue(t)},i,()=>0!=this.states[e.uid],()=>this.states[e.uid].value]}getState(e){this.states[e]||o(`State with the UID ${e} does not exist!`,["You tried to access a non-existant state.","States could be cleared upon updates, when they are out of scope."]);return[this.states[e].value,t=>{this.states[e]&&this.states[e].setValue(t)},this.states[e].preValue,()=>void 0!==this.states[e],()=>this.states[e].value]}getReservedState(e){d.reservedStates.includes(e)||o(`Reserved state with the UID ${e} does not exist!`,["You tried to access a non-existant reserved state.","States could be cleared upon updates, when they are out of scope."]);return[this.states[e].value,t=>{this.states[e]&&this.states[e].setValue(t)},this.states[e].preValue,()=>void 0!==this.states[e],()=>this.states[e].value]}static getReservedState(e){return this.singleton.getReservedState(e)}}const f=p;class m{static singleton=new m;constructor(){m.singleton instanceof m&&throwError("Ref Registry already exists",["Ref Resigtry cannot be instanciated more than once. Are you trying to manually create an object?"]),this.refs={}}static clean(){for(let e in this.singleton.refs){const t=this.singleton.refs[e];t.exists?t.exists=!1:this.unRef(e)}}static getRef(e){return this.singleton.refs[e]?this.singleton.refs[e].el:document.createElement("div")}static setRef(e,t){this.singleton.refs[e]={ref:e,el:t,exists:!0}}static unRef(e){delete this.singleton.refs[e]}}const g=m;window.addEventListener("click",(e=>{!function(e){const t=e.target;if(!Array.isArray(window.onclickglobal))return;r.requestBatchingStart("custom-event-on-click-global"),window.onclickglobal.forEach((n=>{n.contains(t)||n.events.onClickGlobal(e)})),r.requestBatchingEnd("custom-event-on-click-global");const n=[];window.onclickglobal.forEach((e=>{document.contains(e)&&n.push(e)})),window.onclickglobal=n}(e)}));const y=[];class v{static devMode=!1;static singleton=new v;static enqueueDomAction(e){"function"==typeof e&&v.singleton.domActions.push(e)}static enqueueBeforeDestroyed(e){"function"==typeof e&&v.singleton.beforeDestroyedQueue.push(e)}static enqueueOnDestroyed(e){"function"==typeof e&&v.singleton.onDestroyedQueue.push(e)}static enqueuOnCreated(e){"function"==typeof e&&v.singleton.onCreatedQueue.push(e)}static enqueuOnUpdated(e){"function"==typeof e&&v.singleton.onUpdatedQueue.push(e)}static enqueueOnRef(e){"function"==typeof e&&v.singleton.onRefQueue.push(e)}constructor(){v.singleton instanceof v&&o("RecrusiveDOM cannot have more than one instance",["RecrusiveDOM is an internal class and should not be used in development.","User Recrusive.Render to render your app."]),this.root=document.createElement("div"),this.root.id="root",this.domActions=[],this.beforeDestroyedQueue=[],this.onDestroyedQueue=[],this.onCreatedQueue=[],this.onUpdatedQueue=[],this.onRefQueue=[],document.querySelector("body").append(this.root)}resetQueues(){this.domActions=[],this.beforeDestroyedQueue=[],this.onDestroyedQueue=[],this.onCreatedQueue=[],this.onUpdatedQueue=[],this.onRefQueue=[]}exBeforeDestroyed=()=>this.beforeDestroyedQueue.forEach((e=>e()));exDomActions=()=>this.domActions.forEach((e=>e()));exOnDestroyed=()=>this.onDestroyedQueue.forEach((e=>e()));exOnCreated=()=>this.onCreatedQueue.forEach((e=>e()));exOnUpdated=()=>this.onUpdatedQueue.forEach((e=>e()));exOnRef=()=>this.onRefQueue.forEach((e=>e()));render(){r.changeState(r.states.RENDERING),v.devMode&&console.time("Render"),r.changeState(r.states.COMPUTE_TREE),this.oldRender=this.app(),this.oldRender.uidify("0"),"create-component"!==this.oldRender.$$createcomponent&&o('Root component is not of type "CreateComponent"',["Render only accepts a function call.","You should return CreateComponent from your app function."]),r.changeState(r.states.COMPUTE_STYLE),h.singleton.update(this.oldRender.flattenStyle()),r.changeState(r.states.COMMIT_INTO_DOM),this.root.innerHTML="",this.root.append(this.oldRender.render()),r.changeState(r.states.EXEC_ON_CREATED),this.oldRender.$onCreated(),this.oldRender.$onRefRecursively(),r.changeState(r.states.CLEAN_STATES),this.resetQueues(),v.devMode&&console.timeEnd("Render"),r.changeState(r.states.FREE)}update(){r.changeState(r.states.UPDATING),v.devMode&&console.time("UI Update"),r.changeState(r.states.COMPUTE_TREE);const e=this.app();e.uidify("0"),r.changeState(r.states.COMPUTE_STYLE),h.singleton.update(e.flattenStyle()),r.changeState(r.states.COMPUTE_DIFF),g.clean(),this.oldRender.update(e),this.oldRender=e,r.changeState(r.states.EXEC_BEFORE_DESTROYED),this.exBeforeDestroyed(),r.changeState(r.states.COMMIT_INTO_DOM),this.exDomActions(),r.changeState(r.states.EXEC_ON_DESTROYED),this.exOnDestroyed(),r.changeState(r.states.EXEC_ON_CREATED),this.exOnCreated(),r.changeState(r.states.EXEC_ON_UPDATED),this.exOnUpdated(),this.oldRender.$onRefRecursively(),r.changeState(r.states.CLEAN_STATES),this.resetQueues(),f.clean(),v.devMode&&console.timeEnd("UI Update")}destroy(){this.roots.app.remove()}}const b=v,w=e=>{const t=new M({tag:"p",children:[]});return t.text=e,t.tag="#text",t.render=()=>{const e=document.createTextNode(t.text);return t.domInstance=e,e},t.update=e=>{e.tag!==t.tag?t.$replaceInDOM(e):(t.text!==e.text&&(t.domInstance.data=e.text),e.domInstance=t.domInstance)},t},k={isComponent:e=>e instanceof M,isArrayOfComponents:e=>Array.isArray(e),isValidClassName:e=>!e||(!!/^[a-zA-Z]([a-zA-Z0-9]|(-))+$/.test(e)||o(`${e} is not a valid className`,['Class name can only include alphaneumerical characters and "-".',"Class name should not contain spaces."]))},E=(e,t)=>{if(null!==t)if(Array.isArray(t)){for(let n=0;n<t.length;n++)if(null!==t[n])if(k.isArrayOfComponents(t[n]))o("Child Cannot be of type array",["Check if you are nesting an array inside the children array."]);else if(k.isComponent(t[n]))!1!==t[n].flags.renderIf&&("fragment"===t[n].tag?e.children.push(...t[n].children):e.children.push(t[n]));else{let i=t[n];for(let e=n+1,s=t.length;e<s&&(!k.isComponent(t[e])||null===t[e]);e++)k.isArrayOfComponents(t[e])?o("Child Cannot be of type array",["Check if you are nesting an array inside the children array."]):(i=`${i}${t[e]}`,n++);e.children.push(w(i))}}else void 0!==t&&(t.$$createcomponent?!1!==t.flags.renderIf&&("fragment"===t.tag?e.children=t.children:e.children=[t]):e.children=[w(t)]);else e.children=[]},I=(e,t)=>{if(t&&t.className&&(k.isValidClassName(t.className),e.className?e.className=`${e.className} ${t.className}`:e.className=t.className),e.className){const t=e.className.toString().split(" ");for(var n=0,i=t.length;n<i;n++)k.isValidClassName(t[n])}},T=(e,t)=>{for(var n in t)a.Events[n]?"function"==typeof t[n]?e.events[n]=t[n]:o(`${n} is not function.`,["Event is not of type function"]):o(`${n} is not a valid event name or is yet to be implemented.`,["Event name is non-existant","List of events : https://github.com/RiadhAdrani/recursive/blob/91b3cb8ae80fcbc7aa402b1d7814c0d2b7a0e779/RecursiveDOM/PropList.js#L537"])},S=(e,t)=>{for(let n in t)a.Flags[n]&&(e.flags[n]=t[n])},_=(e,t)=>{for(var n in t)void 0!==t[n]&&(a.Hooks[n]?"function"==typeof t[n]?e.hooks[n]=t[n]:o(`${n} is not a function.`,["Hook is not of type function"]):o(`${n} is not a valid hook name.`,["Hook name is non-existant","List of hooks : https://github.com/RiadhAdrani/recursive/blob/91b3cb8ae80fcbc7aa402b1d7814c0d2b7a0e779/RecursiveDOM/PropList.js#L645"]))},C=(e,t)=>{for(var n in t)a.Attributes[n]&&t[n]&&(e.props[n]=t[n])},x=(e,t)=>{for(let n in e.props)t[a.Attributes[n]]=e.props[n];if(e.style&&e.style.inline)for(let n in e.style.inline)t.style[n]=e.style.inline[n]},A=(e,t)=>{e.children.forEach((e=>{t.append(e.render())}))},N=(e,t)=>{if(e.events){function i(e,n){t.events[e]=n,a.Events[e].handler?a.Events[e].handler(t):t.addEventListener(a.Events[e].listener,(n=>{r.requestBatchingStart(`event-${e}`),t.events[e](n),r.requestBatchingEnd(`event-${e}`)}))}for(var n in t.events={},e.events)a.Events[n]&&i(n,e.events[n])}},R=(e,t,n)=>{let i=!1;for(let r in t.props)a.Attributes[r]&&e.props[r]!==t.props[r]&&(s=r,t.props[s]?n[s]=t.props[s]:n[s]="",i=!0);var s;for(let i in e.props)a.Attributes[i]&&!t.props[i]&&(n[i]="");if(t.style){if(t.style.inline){if(e.style&&e.style.inline)for(let i in e.style.inline)null==t.style.inline[i]&&(n.style[i]="");for(let e in t.style.inline)n.style[e]=t.style.inline[e]}else if(e.style&&e.style.inline)for(let t in e.style.inline)n.style[t]=""}else if(e.style&&e.style.inline)for(let t in e.style.inline)n.style[t]="";return i},D=(e,t)=>{for(let n in e.children)if(!document.contains(e.children[n].domInstance))return void e.$replaceInDOM(t);if(e.map&&t.map){for(let n in e.map)t.map[n]||(e.map[n].c.$removeFromDOM(),delete e.map[n]);for(let n in e.map)e.map[n].c.update(t.map[n].c);for(let n in t.map)e.map[n]||(e.map[n]={...t.map[n],i:Object.keys(e.map).length},t.map[n].c.$appendInDOM(e));for(let n in e.map)e.map[n].i!==t.map[n].i&&e.map[n].c.$changePosition(e,t.map[n].i)}else{function n(){for(let n=0;n<e.children.length;n++)e.children[n].update(t.children[n])}if(e.children.length===t.children.length)n();else if(e.children.length>t.children.length){for(;e.children.length>t.children.length;)e.children.pop().$removeFromDOM();n()}else{for(let n=e.children.length;n<t.children.length;n++)t.children[n].$appendInDOM(e);n()}}},O=(e,t)=>{if(e.events){t.events||(t.events={});for(let i in e.events)t.events[i]||t.addEventListener(a.Events[i].listener,(e=>{r.requestBatchingStart(`event-${i}`),t.events[i](e),r.requestBatchingEnd(`event-${i}`)})),n=i,t.events[n]=e.events[n];for(let n in t.events)e.events[n]||(t.events[n]=()=>{})}else t.events={};var n};class L{static singleton=new L;constructor(){this.context=void 0,this.stack=[]}startContext(e){this.context&&this.stack.push(this.context),this.context=e}endCurrentContext(){this.context&&(this.stack.length>0?this.context=this.stack.pop():this.context=void 0)}}function P(){return L.singleton.context}const M=class{constructor({tag:e,children:t,events:n,className:i,style:s,props:r,flags:a,key:c,hooks:l={}}){if(e||o('"tag" should not be empty or null.',["Make sure to pass an HTML tag to your component."]),this.$$createcomponent="create-component",this.key=c,this.tag=e,this.props={},this.children=[],this.flags={},this.hooks={},this.events={},this.ref=void 0,this.domInstance=void 0,(0!=this.flags.renderIf||null==this.flags.renderIf)&&(i&&(this.className=i),s&&(this.style=s),I(this,s),C(this,{...r,className:this.className}),T(this,n),_(this,l),S(this,a),E(this,t),this.map=!1,this.children))for(let e=0;e<this.children.length;e++)this.children[e].key?(this.map||(this.map={}),this.map[this.children[e].key]&&o(`Component with the key ${this.children[e].key} already exists.`,["Two or more components has the same key."]),this.map[this.children[e].key]={c:this.children[e],i:e}):this.map=!1}uidify(e){const t=P()?`${P().uid}-${e}`:"0";var n;this.uid=t,n={uid:t},L.singleton.startContext(n),this.children.forEach(((e,t)=>{e.uidify(t)})),L.singleton.endCurrentContext()}superRender(e){}render(){let e=document.createElement(this.tag);return x(this,e),N(this,e),A(this,e),this.superRender(e),this.domInstance=e,e}superUpdate(e){}update(e){let t=!1;const n=this.domInstance;if(n||o("Component not found inside the DOM tree: This error should not happen: Report a bug to https://github.com/RiadhAdrani/recursive",["You may have tried to manipulate the DOM manually outside the Recursive context."]),!0===this.flags.forceRerender)return void this.$replaceInDOM(e);if(this.tag!==e.tag)return void this.$replaceInDOM(e);O(e,n),this.className!==e.className&&(e.className?n.className=e.className:n.className="");const i=R(this,e,n);D(this,e,n),t=!!i,this.superUpdate(e),e.domInstance=this.domInstance,t&&b.enqueuOnUpdated((()=>e.$onUpdated()))}$onUpdated(){"function"==typeof this.hooks.onUpdated&&(r.requestBatchingStart("on-updated"),this.hooks.onUpdated(this.domInstance),r.requestBatchingEnd("on-updated"))}$onCreated(){"function"==typeof this.hooks.onCreated&&(r.requestBatchingStart("on-created"),this.hooks.onCreated(this.domInstance),r.requestBatchingEnd("on-created")),this.children&&this.children.forEach((e=>{e.$$createcomponent&&e.$onCreated()}))}$onDestroyed(){"function"==typeof this.hooks.onDestroyed&&(r.requestBatchingStart("on-destroyed"),this.hooks.onDestroyed(this),r.requestBatchingEnd("on-destroyed")),this.children&&this.children.forEach((e=>{e.$$createcomponent&&e.$onDestroyed()}))}$onRerender(){}$beforeDestroyed(){"function"==typeof this.hooks.beforeDestroyed&&(r.requestBatchingStart("before-destroyed"),this.hooks.beforeDestroyed(this),r.requestBatchingEnd("before-destroyed")),this.children&&this.children.forEach((e=>{e.$$createcomponent&&e.$beforeDestroyed()}))}$onRef(){if("function"==typeof this.hooks.onRef){const e=this.hooks.onRef(this.domInstance);"string"==typeof e&&(this.ref=e,g.setRef(e,this.domInstance))}}$onRefRecursively(){this.$onRef(),this.children.forEach((e=>e.$onRefRecursively()))}$removeFromDOM(){b.enqueueBeforeDestroyed((()=>this.$beforeDestroyed())),b.enqueueDomAction((()=>this.domInstance.remove())),b.enqueueOnDestroyed((()=>this.$onDestroyed()))}$replaceInDOM(e){b.enqueueBeforeDestroyed((()=>this.$beforeDestroyed())),b.enqueueDomAction((()=>this.domInstance.replaceWith(e.render()))),b.enqueueOnDestroyed((()=>this.$onDestroyed())),b.enqueuOnCreated((()=>e.$onCreated()))}$appendInDOM(e){b.enqueueDomAction((()=>e.domInstance.append(this.render()))),b.enqueuOnCreated((()=>this.$onCreated()))}$changePosition(e,t){b.enqueueDomAction((()=>e.domInstance.insertBefore(this.domInstance,e.domInstance.children[t])))}addExternalStyle(){y.sendCSSobject({...this.style}),this.children&&this.children.forEach((e=>{e.render&&e.addExternalStyle()}))}flattenStyle(){const e=[];return this.children&&this.children.forEach((t=>{e.push(...t.flattenStyle())})),this.style&&(this.style.scoped&&(this.style.className=`${this.style.className}-${this.tag}-${this.uid}`,this.className=`${this.className}-${this.tag}-${this.uid}`,this.props.className=this.className),e.push(this.style)),e}};class U{constructor({name:e,component:t,title:n,subRoutes:i,onLoad:s,onExit:r,redirectTo:a}){/^\/([a-zA-Z0-9]|-|.|_|~){0,}(\/){0}$/gm.test(e.trim())||o(`Invalid route name "${e}"`,['Route name should start with "/".','Route name should not end with "/".','Route can only accepts these special characters: "-" "." "_" "~".','Dynamic routes parameters start with ":" and end with ";". Example : /example@user=:user;']),/^(\S+){0,}$/gm.test(e.trim())||o(`No white spaces are allowed in route names : "${e}"`,["Remove white spaces from the route name.","If the route is dynamic, make sure to remove white spaces before injecting your parameters."]),this.redirectTo=a,this.name=e.trim(),this.component=t,this.title=n,this.subRoutes=i,this.onLoad=()=>{"function"==typeof s&&s()},this.onExit=()=>{"function"==typeof r&&r()}}flatten(e){e[this.name]=this,this.subRoutes?.forEach((t=>{"/"!==this.name&&(t.name=this.name+t.name),t?.flatten(e)}))}}class V{static singleton=new V;constructor(){V.singleton instanceof V&&o("RecursiveRouterContext cannot have more than one instance",["RecursiveRouterContext is an internal class and should not be used in development.","User RecrusiveRouter.createRouter to make a new router."]),this.context=void 0,this.stack=[],this.depth=0,this.fragments=[],this.anchor=""}startContext(e){this.depth++,this.context&&this.stack.push(this.context),this.context=e}endCurrentContext(){this.context&&(this.stack.length>0?this.context=this.stack.pop():this.context=void 0),this.depth--}getContext=()=>this.stack;encapsulate(e,t){"function"!=typeof t&&o("Encapsulated component is not a function",["RecursiveRouterContext.encapsulate require two parameters :\n                     the first is the context data \n                     and the second being a function return the components to encapsulate"]),this.startContext(e);const n=t();return this.endCurrentContext(),n}setParams=()=>{const[e]=f.getReservedState("route");this.fragments=e.split("/").slice(1).map((e=>`/${e}`))};renderPortion=()=>{if(this.depth>this.fragments.length)return"";const e=this.fragments.slice(0,this.depth).reduce(((e,t)=>`${e}${t}`)),t=z(e);return t?t.isDynamic?t.template.component():t.component():void 0};static encapsulate=(e,t)=>this.singleton.encapsulate(e,t);static getContext=()=>this.singleton.getContext()}class F{static singleton=new F;constructor(){F.singleton instanceof F&&throwError("RecursiveHistory cannot have more than one instance",["RecursiveHistory is an internal class and should not be used in development."])}pushState(e,t,n){history.pushState({route:e},t,this.makeURL(n))}replaceState(e,t,n){history.replaceState({route:e},t,this.makeURL(n))}makeURL(e){let t=`${location.origin}/`;return q().trim()&&(t+=`${q()}/`),"/"==e.charAt(0)?t+=e.slice(1):t+=e,t}}class B{static singleton=void 0;constructor(e,t="",n){B.singleton instanceof B&&throwError("RecursiveRouter cannot have more than one instance",["RecursiveRouter is an internal class and should not be used in development.","User createRouter to make a new router."]),this.root=t,this.scroll=n,this.routes={},e.flatten(this.routes),this.routes["/404"]||(this.routes["/404"]=new U({name:"/404",title:"Not Found",component:()=>"404 NOT FOUND"}));const[]=d.setReservedState("route",(()=>{for(let e in this.routes)return this.routes[e].name})());window.addEventListener("popstate",(e=>{let t;t=e.state?e.state.route:(()=>{for(let e in this.routes)return this.routes[e].name})(),this.loadRoute(this.routes[t])}))}isDynamicRoute(e){const t=/:[^:;]*;/g;for(let n in this.routes){const i=n.toString(),s="recursive",r=e.match(t),o=n.match(t);if(o&&r)try{if(r.length===o.length&&o.length>0&&e.replace(t,s)===i.replace(t,s))return{isDynamic:!0,template:this.routes[n]}}catch(t){console.log(`current route => ${i} vs ${e}`,this.routes,t)}}return{isDynamic:!1}}resolveRoute(e){const t=this.isDynamicRoute(e);if(t.isDynamic)return{path:e,route:t.template};if(this.routes[e]){if(this.routes[e].redirectTo){const t=this.routes[e].redirectTo,n=this.isDynamicRoute(t);return n.isDynamic?{path:t,route:n.template}:this.routes[t]?{path:t,route:this.routes[t]}:{path:t,route:this.routes["/404"]}}return{path:e,route:this.routes[e]}}return{path:e,route:this.routes["/404"]}}findMatch(e){const t=this.isDynamicRoute(e);if(t.isDynamic)return t;for(let t in this.routes)if(e===t)return this.routes[t];return!1}loadRoute(e,t){const[n,i]=f.getReservedState("route");this.routes[n]?.onExit();let s=e;if(i(s.name),t){const e=document.getElementById(t.replace("#",""));e&&e.scrollIntoView()}else this.scroll&&window.scrollTo({top:0,behavior:"smooth"});s?.onLoad()}checkRoute(e){"/"!==e&&(e=e.replace(/\/$/,""));let t="";const n=/#[a-zA-Z0-9-._~:?#\[\]\@!$&'()*+,;=]{1,}$/gm.exec(e);n&&(t=n[0]),t&&(e=e.replace(t,""));const[i]=f.getReservedState("route");if(i===e){if(t){const e=document.getElementById(t.replace("#",""));e&&e.scrollIntoView()}return[!1,""]}return[this.resolveRoute(e),t]}goTo(e){if(!e)return;const[t,n]=this.checkRoute(e);var i,s,r;t&&(i=t.route.name,s=t.route.title,r=`${t.path}${n}`,F.singleton.pushState(i,s,r),this.loadRoute(t.route,n))}replaceWith(e,t){if(!e)return;const[n,i]=this.checkRoute(e);var s,r,o;n&&(s=n.route.name,r=n.route.title,o=`${n.path}${t}`,F.singleton.replaceState(s,r,o),this.loadRoute(n.route,t))}static getParams(){if(!B.singleton||!history.state)return{};const e=/:[^:;]*;/gm,[t]=f.getReservedState("route"),n=this.singleton.routes[t].name.match(e)||[],i=location.pathname.match(e)||[];if(n.length===i.length&&n.length>0){const e={};for(let t=0;t<n.length;t++)e[n[t].replace(":","").replace(";","")]=i[t].replace(":","").replace(";","");return e}return{}}}const j=()=>B.getParams(),q=()=>B.singleton.root,$=e=>B.singleton.goTo(e),z=e=>B.singleton.findMatch(e),H=()=>{const[e]=f.getReservedState("route");return V.singleton.setParams(),B.singleton.routes[e].title&&(document.title=B.singleton.routes[e].title),t={route:e},n=()=>V.singleton.renderPortion(),V.encapsulate(t,n);var t,n},W=({text:e,style:t,id:n,contentEditable:i,draggable:s,autofocus:r,disabled:o,form:a,formAction:c,formEncType:l,formMethod:h,formNoValidate:u,formTarget:d,name:p,type:f,value:m,className:g,key:y,events:v,hooks:b,flags:w})=>new M({children:e,tag:"button",props:{id:n,contentEditable:i,draggable:s,autofocus:r,disabled:o,form:a,formAction:c,formEncType:l,formMethod:h,formNoValidate:u,formTarget:d,name:p,type:f,value:m},className:g,key:y,events:v,hooks:b,style:t,flags:w}),K=({style:e,id:t,contentEditable:n,draggable:i,className:s,key:r,events:o,hooks:a,accept:c,alt:l,autoComplete:h,autofocus:u,capture:d,checked:p,dirname:f,disabled:m,form:g,formAction:y,formEncType:v,formMethod:b,formNoValidate:w,formTarget:k,height:E,list:I,max:T,maxLength:S,min:_,minLength:C,multiple:x,name:A,pattern:N,placeholder:R,readOnly:D,required:O,size:L,src:P,step:U,type:V,value:F,width:B,flags:j})=>new M({tag:"input",props:{id:t,contentEditable:n,draggable:i,type:V,accept:c,alt:l,autoComplete:h,autofocus:u,capture:d,checked:p,dirname:f,disabled:m,form:g,formAction:y,formEncType:v,formMethod:b,formNoValidate:w,formTarget:k,height:E,list:I,max:T,maxLength:S,min:_,minLength:C,multiple:x,name:A,pattern:N,placeholder:R,readOnly:D,required:O,size:L,src:P,step:U,value:F,width:B},className:s,key:r,events:o,hooks:a,style:e,flags:j}),G=({text:e,style:t,id:n,contentEditable:i,draggable:s,className:r,key:o,events:a,hooks:c,flags:l})=>new M({tag:"span",children:e,props:{id:n,contentEditable:i,draggable:s},className:r,key:o,events:a,hooks:c,style:t,flags:l}),Q=({children:e,style:t,to:n,id:i,contentEditable:s,draggable:r,className:o,key:a,events:c,hooks:l,flags:h})=>{return new M({tag:"a",children:e,props:{id:i,contentEditable:s,draggable:r,href:(u=n,F.singleton.makeURL(u))},className:o,key:a,events:{...c,onClick:e=>{c&&c.onClick&&c.onClick(),e.preventDefault(),$(n)}},hooks:l,style:t,flags:h});var u},J=({text:e,style:t,id:n,contentEditable:i,draggable:s,className:r,key:o,events:a,hooks:c,flags:l})=>new M({tag:"i",children:e,props:{id:n,contentEditable:i,draggable:s},className:r,key:o,events:a,hooks:c,style:t,flags:l}),X=({children:e,style:t,id:n,contentEditable:i,draggable:s,download:r,href:o,hrefLang:a,ping:c,referrerPolicy:l,rel:h,target:u,type:d,charSet:p,coords:f,name:m,rev:g,shape:y,className:v,key:b,events:w,hooks:k,flags:E})=>new M({tag:"a",children:e,props:{id:n,contentEditable:i,draggable:s,download:r,href:o,hrefLang:a,ping:c,referrerPolicy:l,rev:g,target:u,rel:h,type:d,charSet:p,coords:f,name:m,shape:y},className:v,key:b,events:w,hooks:k,style:t,flags:E}),Y=({style:e,id:t,contentEditable:n,draggable:i,alt:s,crossOrigin:r,decoding:o,height:a,isMap:c,referrerPolicy:l,sizes:h,src:u,srcSet:d,width:p,useMap:f,loading:m="lazy",className:g,key:y,events:v,hooks:b,flags:w})=>new M({tag:"img",props:{id:t,contentEditable:n,draggable:i,alt:s,crossOrigin:r,decoding:o,height:a,isMap:c,referrerPolicy:l,sizes:h,src:u,srcSet:d,width:p,useMap:f,loading:m},className:g,key:y,events:v,hooks:b,style:e,flags:w}),Z=({text:e,style:t,id:n,contentEditable:i,draggable:s,className:r,key:o,events:a,flags:c,hooks:l})=>new M({tag:"h4",children:e,props:{id:n,contentEditable:i,draggable:s},className:r,key:o,events:a,hooks:l,style:t,flags:c}),ee=({text:e,style:t,id:n,contentEditable:i,draggable:s,className:r,key:o,events:a,hooks:c,flags:l})=>new M({tag:"h2",children:e,props:{id:n,contentEditable:i,draggable:s},className:r,key:o,events:a,hooks:c,style:t,flags:l}),te=({text:e,style:t,id:n,contentEditable:i,draggable:s,className:r,key:o,events:a,hooks:c,flags:l})=>new M({tag:"h1",children:e,props:{id:n,contentEditable:i,draggable:s},className:r,key:o,events:a,hooks:c,style:t,flags:l}),ne=({text:e,className:t,key:n,id:i,contentEditable:s,draggable:r,events:o,style:a,flags:c,hooks:l})=>new M({tag:"p",children:e,style:a,events:o,className:t,key:n,props:{id:i,contentEditable:s,draggable:r},hooks:l,flags:c}),ie=({children:e,style:t,id:n,contentEditable:i,draggable:s,className:r,key:o,events:a,hooks:c,flags:l})=>new M({tag:"div",children:e,props:{id:n,contentEditable:i,draggable:s},className:r,key:o,events:a,style:t,hooks:c,flags:l});const se=({height:e="0px",width:t="0px",id:n,contentEditable:i,draggable:s,events:r,hooks:o,flags:a})=>new M({tag:"empty-box",style:{className:"empty-box",scoped:!0,normal:{height:e,width:t}},events:r,hooks:o,flags:a,props:{id:n,contentEditable:i,draggable:s}});class re extends M{constructor({children:e,id:t,contentEditable:n,draggable:i,className:s,key:r,onObserved:o,events:a,hooks:c,flags:l,style:h}){super({tag:"list-view",children:e,props:{id:t,contentEditable:n,draggable:i},className:s,key:r,events:a,hooks:c,flags:l,style:h}),this.hooks||(this.hooks={}),this.hooks.onRef=()=>{if(c&&c.onRef&&c.onRef(),0!==this.children.length&&"function"==typeof o){var e=new IntersectionObserver((t=>{!0===t[0].isIntersecting&&(e.unobserve(t[0].target),t[0].target===this.domInstance.lastChild&&o(this.domInstance))}),{threshold:[0]});e.observe(this.domInstance.lastChild)}}}}const oe=({children:e,id:t,contentEditable:n,draggable:i,className:s,key:r,events:o,hooks:a,flags:c,style:l,onObserved:h})=>new re({children:e,id:t,contentEditable:n,draggable:i,className:s,key:r,events:o,onObserved:h,hooks:a,flags:c,style:l}),ae=({children:e,style:t,id:n,contentEditable:i,draggable:s,className:r,key:o,events:a,hooks:c,flags:l})=>new M({tag:"column-view",children:e,style:t,props:{id:n,contentEditable:i,draggable:s},className:r,key:o,events:a,hooks:c,flags:l}),ce=({children:e,style:t,id:n,contentEditable:i,draggable:s,className:r,key:o,events:a,hooks:c,flags:l})=>new M({tag:"row-view",children:e,style:t,props:{id:n,contentEditable:i,draggable:s},className:r,key:o,events:a,hooks:c,flags:l}),le=({color:e="black",size:t="30px",thickness:n="5px",duration:i="1.5s",timingFunction:s="ease",flags:r})=>{function o(){function r(e){return e.toString().replace(/[^a-z0-9+]+/gi,"-")}return`border-spinner-${r(e)}-${r(n)}-${r(i)}-${r(s)}-${r(t)}`}return new M({tag:"border-spinner",children:[],style:{className:"border-spinner",scoped:!0,normal:{border:`solid ${n} ${e}`,borderRadius:"50%",borderTopColor:"transparent",height:t,width:t,animation:`${o()}-animation ${i} infinite`,animationTimingFunction:s},animations:[{name:`${o()}-animation`,steps:{"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}}]},flags:r})};class he{static singleton=new he;constructor(){this.items={}}addCache(e){if(e.uuid&&!(!e instanceof ue))return this.items[e.uuid]=e,!0}setCache(e,t,n){let i=!1;e||o("Cache object does not have a valid uuid!",[]),this.items[e]||(this.items[e]=new ue({uuid:e,value:t,onInit:n}),i=!0);const s=this.items[e].value;return"function"==typeof this.items[e].onInit&&i&&(()=>{this.items[e].onInit()})(),[s,t=>{this.items[e]&&this.items[e].setValue(t)},t=>{this.items[e]&&this.items[e].setValueSilently(t)},()=>this.items[e].value]}getCache(e){this.items[e]||o(`Cached object with the UID ${e} does not exist!`,["You tried to access a non-existant cache."]);return[this.items[e].value,t=>{this.items[e]&&this.items[e].setValue(t)},t=>{this.items[e]&&this.items[e].setValueSilently(t)},()=>this.items[e].value]}}class ue{constructor({uuid:e,value:t,onInit:n}){this.uuid=e,this.value=t,this.onInit=n,this.preValue=void 0}setValueSilently(e){this.preValue=this.value,this.value=e}setValue(e){const t=this.value!==e;this.preValue=this.value,this.value=e,t&&(r.notifyStateChanged(this.uuid),!1===r.isBatching()&&r.requestUpdate(this.uuid))}}const de=(e,t,n,i)=>d.setState(e,t,n,i),pe=e=>f.singleton.getState(e),fe=e=>d.updateAfter(e),me=({name:e,component:t,title:n,subRoutes:i,onLoad:s,onExit:r,redirectTo:o})=>new U({name:e,component:t,title:n,subRoutes:i,onLoad:s,onExit:r,redirectTo:o});(()=>{const e=[];class t extends HTMLElement{constructor(){super()}}customElements.define("html-container",t,{extends:"div"}),e.push("html-container{display:block;}");class n extends HTMLElement{constructor(){super()}}customElements.define("empty-box",n,{extends:"img"}),e.push("empty-box{display:block;}");class i extends HTMLElement{constructor(){super()}}customElements.define("list-view",i,{extends:"div"}),e.push("list-view{display:block;}");class s extends HTMLDivElement{constructor(){super()}}customElements.define("column-view",s,{extends:"div"}),e.push("column-view{display:flex;flex-direction:column}");class r extends HTMLDivElement{constructor(){super()}}customElements.define("row-view",r,{extends:"div"}),e.push("row-view{display:flex;flex-direction:row}");class o extends HTMLDivElement{constructor(){super()}}customElements.define("border-spinner",o,{extends:"div"}),e.push("border-spinner{display:block;}");class a extends HTMLDivElement{constructor(){super()}}customElements.define("spawner-view",a,{extends:"div"}),e.push("spawner-view{display:block;position:absolute}");class c extends HTMLDivElement{constructor(){super()}}customElements.define("app-view",c,{extends:"div"}),e.push("app-view{display:block;}");const l=document.createElement("style");e.forEach((e=>{l.innerText+=e})),document.querySelector("head").append(l)})();const ge=e=>ce({style:{className:"timeline-item",normal:{alignItems:"center",marginLeft:"-11px",textAlign:"left",marginBottom:"20px"}},children:[ie({style:{className:"timeline-caret",normal:{minHeight:"15px",minWidth:"15px",maxHeight:"15px",maxWidth:"15px",borderRadius:"50%",backgroundColor:"white",border:"3px solid #1e1e1e"}}}),ae({style:{className:"timeline-info-wrapper",normal:{marginLeft:"20px",flex:1,padding:"20px",border:"1px solid #ffffff22",borderRadius:"10px"}},children:[ee({text:e.title}),Z({text:[e.university,G({text:`  ${e.period}`})],style:{className:"timeline-item-period",normal:{fontWeight:300}}}),e.description?ne({text:e.description,style:{className:"timeline-item-description",normal:{lineHeight:1.5}}}):""]})]}),ye=[{title:"Applied Bachelor of Industrial Computing: Embedded Systems",period:"2017-2020",university:"Higher Institute of Information's Technologies and Communication, Borj Cedria"},{title:"Bachelor of Mathematics",period:"2013-2017",university:"Lyce El-Wafa, Ariana"}],ve=()=>ae({className:"timeline-view",children:[ae({style:{className:"timeline-wrapper",normal:{borderLeft:"1px solid white",padding:"30px 0px",flex:1}},children:[te({text:"Academic Background",style:{className:"timeline-title",normal:{marginBottom:"30px"}}}),...ye.map((e=>ge(e)))]})]}),be=(e,t)=>X({href:e,target:"blank",style:{className:"animated-background-link",normal:{padding:"5px",color:"white"}},events:{onClick:e=>{e.stopPropagation()}},children:J({className:t})}),we=e=>J({className:"fa-solid fa-circle-xmark",style:{className:"exist-x",normal:{fontSize:"2em",position:"absolute",top:"40px",right:"40px",cursor:"pointer"},hover:{transform:"scale(1.3)"}},events:{onClick:()=>{$(e)}}}),ke=()=>{const e=pe("user-data")[0].backgrounds.find((e=>e.id==j().id));return ae({style:{className:"overlay",scoped:!0,normal:{position:"fixed",inset:"0px",justifyContent:"center",background:"#1e1e1efe"}},children:[we("/animated-backgrounds"),ae({style:{className:"anim-bckg",scoped:!0,normal:{textAlign:"center",backgroundSize:"cover",backgroundPosition:"center center",backgroundRepeat:"no-repeat",backgroundImage:`url(${e.preview})`,margin:"100px",borderRadius:"10px"},mediaQueries:[{condition:"(max-width:600px)",normal:{margin:"20px"}}]},children:[ae({style:{className:"anim-bckg-inner",scoped:!0,normal:{background:"#1e1e1ede",padding:"200px 30px",border:"1px solid #ffffff11",borderRadius:"10px"},mediaQueries:[{condition:"(max-width:600px)",normal:{padding:"200px 10px"}}]},children:[ee({text:e.title,style:{className:"anbkgttl",normal:{fontWeight:500,textTransform:"uppercase",borderBottom:"1px solid #ffffff5c"}}}),se({height:"10px"}),ne({style:{className:"anbkgtgs",normal:{lineHeight:2}},text:e.tags.split(" ").map((e=>G({text:`#${e} `,style:{className:"anbkgstgs",normal:{background:"#ffffff",color:"#1e1e1e",borderRadius:"2.5px",margin:"3px",padding:"5px"}}})))}),se({height:"10px"}),ce({style:{className:"anbkglks",normal:{justifyContent:"center",fontSize:"1.5em"}},children:[be(e.artwork,"fa-solid fa-images"),be(e.youtube,"fa-brands fa-youtube"),be(e.download,"fa-solid fa-download")]})]})]})]})},Ee=e=>ae({key:e.id,style:{className:"bg-item",scoped:!0,normal:{textAlign:"left",border:"1px solid #424242",borderRadius:"10px",marginBottom:"20px",backgroundSize:"cover",backgroundPosition:"center center",backgroundRepeat:"no-repeat",backgroundImage:`url(${e.preview})`}},children:[ae({style:{className:"bg-inner-item",normal:{background:"linear-gradient(90deg, rgba(30,30,30,1) 20%,rgba(30,30,30,0.9) 50%, rgba(30,30,30,0.2) 100%)",padding:"40px",fontSize:"1.5em"},mediaQueries:[{condition:"(max-width:600px)",normal:{padding:"40px 20px",fontSize:"1.25em"}}]},children:[ee({text:e.title,style:{className:"bg-title",normal:{fontWeight:500,textTransform:"uppercase",fontSize:"1em"}}}),ce({children:[be(e.artwork,"fa-solid fa-images"),be(e.youtube,"fa-brands fa-youtube"),be(e.download,"fa-solid fa-download")]})]})]}),Ie=(e=!0,t)=>{const[n,i]=de("bg-count",5),[s,r]=de("bg-search","");function o(){const e=pe("user-data")[0].backgrounds;if(!s.trim())return e;return e.filter((e=>e.title.toLocaleLowerCase().includes(s.trim().toLocaleLowerCase()||e.tags.toLocaleLowerCase().includes(s.trim().toLocaleLowerCase()))))}return ae({className:"container",style:{className:"animated-backgrounds-view",normal:{overflow:"auto",padding:"20px"},mediaQueries:[{condition:"(max-width:800px)",normal:{}},{condition:"(max-width:600px)",normal:{padding:"5px"}}]},children:[H(),ae({style:{className:"anim-bg-heading-section",normal:{top:"55px",padding:"40px 0px",background:e?"rgba(30,30,30,0.95)":"transparent"}},children:[te({text:"Animated Backgrounds"}),se({height:"20px"}),K({value:s,placeholder:"Foul Tranished... In search, of the Elden Ring !",events:{onInput:e=>r(e.target.value)},style:{className:"bg-search-box",normal:{background:"#1e1e1e",border:"1px solid #424242",borderRadius:"5px",padding:"10px 20px",color:"inherit",fontFamily:"inherit",width:"50%",alignSelf:"center",transition:"0.3s"},focus:{outline:"1px solid #1e7e1e",borderColor:"transparent",width:"80%"}}})]}),oe({style:{className:"list-wrapper",normal:{marginTop:""}},onObserved:()=>{o().length>n&&fe((()=>{i(n+5)}))},children:o().slice(0,n).map((e=>t?t(e):Q({to:`/animated-backgrounds/:${e.id};`,children:Ee(e),style:{className:"anbgvr",normal:{cursor:"pointer",textDecoration:"none",color:"white"}}})))})]})},Te=e=>Q({to:e.to,style:{className:"editable-item",scoped:!0,normal:{textAlign:"left",border:"1px solid #424242",borderRadius:"10px",marginBottom:"20px",backgroundSize:"cover",backgroundPosition:"center center",backgroundRepeat:"no-repeat",color:"white",textDecoration:"none",backgroundImage:`url(${e.preview})`}},children:[ae({style:{className:"editable-bg",normal:{background:"linear-gradient(90deg, rgba(30,30,30,1) 20%,rgba(30,30,30,0.9) 50%, rgba(30,30,30,0.2) 100%)",padding:"40px"}},children:[ee({text:e.title,style:{className:"editable-title",normal:{fontWeight:500,fontSize:"1.5em"}}})]})]}),Se=()=>{const e=pe("user")[0].auth;return e||"/edit/auth"===f.getReservedState("route")[0]||$("/edit/auth"),ae({className:"container",children:[H(),e?ae({children:[te({text:"Dashboard"}),se({height:"30px"}),ae({children:[Te({title:"Animated Backgrounds",to:"/edit/animated-backgrounds",preview:"https://c4.wallpaperflare.com/wallpaper/1/398/339/elden-ring-landscape-game-art-video-game-art-video-games-hd-wallpaper-preview.jpg"}),Te({title:"About",to:"/edit",preview:"https://images.unsplash.com/photo-1455390582262-044cdead277a?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1073&q=80"}),Te({title:"Skills",to:"/edit",preview:"https://images.unsplash.com/photo-1516259762381-22954d7d3ad2?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1189&q=80"}),Te({title:"Projects",to:"/edit",preview:"https://images.unsplash.com/photo-1521185496955-15097b20c5fe?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1050&q=80"}),Te({title:"Academic Background",to:"/edit",preview:"https://images.unsplash.com/photo-1534702795526-bab4dfcad657?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80"}),Te({title:"Professional Career",to:"/edit",preview:"https://images.unsplash.com/photo-1557424169-2dfbc683a1c6?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80"})]})]}):""]})},_e=[{name:"Skills",to:"/skills"},{name:"Projects",to:"/projects"},{name:"Academic Background",to:"/academic-background"},{name:"Professional Career",to:"/professional-career"},{name:"Animated Backgrounds",to:"/animated-backgrounds"}],Ce=()=>{return ae({className:"container",style:{className:"home-view",normal:{alignItems:"center",justifyContent:"center",flex:1}},children:[(e=200,Y({src:"https://avatars.githubusercontent.com/u/54232641?v=4",alt:"riadh adrani",height:e,width:e,style:{className:"my-logo",normal:{borderRadius:"50%"}}})),se({height:"20px"}),te({text:"Riadh Adrani",style:{className:"main-title-riadh-adrani",normal:{display:"flex",alignItems:"center",fontSize:"2em",fontWeight:500,textTransform:"uppercase"}}}),ee({text:"Web developer | Android developer | Graphic Designer",style:{className:"home-sub-text",normal:{fontWeight:"300",fontSize:"1.4em",textTransform:"uppercase"}}}),se({height:"20px"}),ne({style:{className:"home-description",normal:{lineHeight:"1.5",letterSpacing:"1px",borderTop:"1px solid #ffffff77",borderBottom:"1px solid #ffffff77",padding:"20px 0px"}},text:'Hello there ! my name is Riadh Adrani (pronounced Riyadh Adrani), \n                    I graduated from \n                    the Higher Institute of Information Technologies and communications in Borj Cedria \n                    with the bachelor of "Embedded Systems" from the branch "Industrial Computing". \n                    I started my development journey back in 2019 by developping a small real time messaging android app\n                    for a class project using Kotlin, and the rest is history.'}),se({height:"20px"}),ce({style:{className:"explore-inline",normal:{flexWrap:"wrap",alignItems:"center",justifyContent:"center"}},children:_e.map((e=>Q({children:e.name,to:e.to,style:{className:"custom-button",normal:{background:"white",border:"none",padding:"5px 10px",fontWeight:500,textTransform:"uppercase",textDecoration:"none",color:"#1e1e1e",cursor:"pointer",margin:"5px",borderRadius:"2.5px"},hover:{opacity:"0.7"},active:{transform:"scale(0.95)"}}})))})]});var e},xe=[{title:"Software Development Freelancer",period:"since December 2021",university:"Self-employed",description:'Creating Mobile and Web Apps for customers \n          using various technologies like \n          "Xamarin", "Native Android", "React" ...'},{title:"Web Designer",period:"May 2021 - December 2021",university:"Triweb",description:"My job consisted of designing (Using Adobe Photoshop and Illustrator) \n          the graphical charter of turnkey websites and integrating them \n          with the help of a custom CMS made for Tri-Web."},{title:"Graphic Design Freelancer",period:"July 2020 - June 2021",university:"Self-employed",description:"I made several logos, brochures and graphical charter for friends and customers."},{title:"Intern",period:"January 2020 - July 2020",university:"Brain Academy Tunisia",description:'We developed the prototype of "SMARTchair" which is an EEG controlled wheelchair. \n          Using our skills was not enough, \n          so it was imminent for us to learn and get used to many other programming languages, \n          software and even new operating systems. \n          The project was defended the 19th of July 2020 and got "Very Good" as honor.'},{title:"Summer intern",period:"May 2019 - June 2019",university:"Boudjebel VACPA",description:'This was the opportunity to dive into the professional environment. \n          I was fortunate to acquire some insight within a world-class factory, \n          Boudjebel VACPA is in fact the lead producer of "Deglet Nour" (Nour dates) \n          and many other products around the world.\n          Project: Controlling a light line remotely via an Android App'},{title:"Youtuber",period:"September 2016 - September 2021",university:"Youtube",description:'I created "Extended Remixes" of Neoclassical, New-Age.\n        I use Adobe Premiere Pro to make these tracks last longer.\n        I enjoyed creating animated background to come with the music, \n        so it creates a cinematic feeling. \n        These animated background are created using Adobe Photoshop and Adobe After Effects.\n        Note: The channel is demonetized, I gain $0. I just enjoy the process of creating the videos.'}],Ae=()=>ae({className:"timeline-view",children:[ae({style:{className:"timeline-wrapper",normal:{borderLeft:"1px solid white",padding:"30px 0px",flex:1}},children:[te({text:"Professional Career",style:{className:"timeline-title",normal:{marginBottom:"30px"}}}),...xe.map((e=>ge(e)))]})]}),Ne=e=>te({text:e,style:{className:"title",scoped:!0,normal:{marginBottom:"30px"}}}),Re=[{name:"WeTube",type:"Web App",color:"#00a8e8",logo:"https://raw.githubusercontent.com/RiadhAdrani/wetube-fe/master/wetube.png",description:"WeTube is a Youtube clone made with Recursive (Front End), Express (Back End) and PostgreSQL (Database).",technologies:["Javascript","Recursive","Express","PostgreSQL"],projectLink:["https://github.com/RiadhAdrani/wetube-fe","https://github.com/RiadhAdrani/wetube-be"]},{name:"Audiphy",type:"Desktop App",color:"#3083f6",logo:"https://raw.githubusercontent.com/RiadhAdrani/audiphy/master/ss/audiphy.png",description:'Audiphy is a simple audio player inspired from "Spotify", made with Electron.js and Recursive.js for Windows OS',technologies:["Javascript","Recursive","Electron.js"],projectLink:"https://github.com/RiadhAdrani/audiphy"},{name:"Wroddit",type:"Web App",color:"#E9ECEF",logo:"https://riadhadrani.github.io/wroddit/imgs/wroddit-dark.ce2166f57a4607631a155b725ccc621a.png",description:'Wroddit is a "Reddit" clone developed using "Recursive.js". \n        The App allow the user to create an account, create communities, write posts within them, \n        add comments, and make replies nested up to a depth of 10. The Web App support dark mode.',technologies:["Javascript","Recursive","Firebase","Font Awesome"],projectLink:"https://github.com/RiadhAdrani/wroddit",demoLink:"https://riadhadrani.github.io/wroddit/"},{name:"Dwidder",type:"Web App",color:"#1e9eae",logo:"https://raw.githubusercontent.com/RiadhAdrani/dwidder/master/src/assets/icon.png",description:'Dwidder is a social network based on "Twitter". \n        The name is inspired from a Tunisian meal called "Dwida". \n        The App allow the user to create an account (), \n        create posts (text and image), \n        search for other users and check their profiles, \n        change the theme of the App (Light, Dark and Abyss) \n        and real time messaging using "Firebase Firestore"',technologies:["Javascript","Recursive","Firebase","Font Awesome"],projectLink:"https://github.com/RiadhAdrani/dwidder",demoLink:"https://riadhadrani.github.io/dwidder/"},{name:"Color Noter",type:"Web App",color:"#8cacb9",logo:"https://raw.githubusercontent.com/RiadhAdrani/color-noter-desktop/master/md/color-noter.png",description:"Color Noter is a color based note taking \n          app that offer the user the ability to write \n          and save his ideas and todos in an easy to use environment.",technologies:["Javascript","Recursive","Firebase"],projectLink:"https://github.com/RiadhAdrani/color-noter-web",demoLink:"https://riadhadrani.github.io/color-noter-web/"},{name:"Recursive",type:"Front End Framework",color:"#cf2026",logo:"https://raw.githubusercontent.com/RiadhAdrani/create-recursive-app/master/src/logo.png",description:"Recursive is an ongoing project that allow developers to build a functional,\n         component-based, Javascript only, beautiful and interactive Web applications.",technologies:["Javascript"],projectLink:"https://github.com/RiadhAdrani/recursive",demoLink:"https://riadhadrani.github.io/recursive-website/"},{name:"Color Noter",type:"Desktop App",color:"#8cacb9",logo:"https://raw.githubusercontent.com/RiadhAdrani/color-noter-desktop/master/md/color-noter.png",description:"Color Noter is a color based note taking app \n        that offer the user the ability to write and save his ideas \n        and todos in an easy to use environment.",technologies:["Javascript","Electron","React","Firebase"],projectLink:"https://github.com/RiadhAdrani/color-noter-desktop"},{name:"Question Submission",type:"Web App",color:"#ffde16",logo:"https://raw.githubusercontent.com/RiadhAdrani/guess-app-questions-submission/master/src/assets/logo_solid.png",description:"In order to collect questions for an upcoming Android project, \n          I made this website in which the user can submit a question \n          that will be saved to Firebase's Firestore database.",technologies:["Javascript","Vue","Firebase"],projectLink:"https://github.com/RiadhAdrani/guess-app-questions-submission",demoLink:"https://riadhadrani.github.io/guess-app-questions-submission"},{name:"Azur City - Prototype",type:"Android App",color:"#01acc8",logo:"https://raw.githubusercontent.com/RiadhAdrani/azur_app/master/app/src/main/res/drawable/ic_app_icon.jpg",description:"A prototype of a commercial app made for Azur City. \n        The App was presented as an End of studies projects.",technologies:["Kotlin","Android"],projectLink:"https://github.com/RiadhAdrani/azur_app"},{name:"Werewolves of the Miller Hollow",type:"Android App",color:"#fbb03b",logo:"https://raw.githubusercontent.com/RiadhAdrani/werewolves_of_the_millers_hollow/master/app/src/main/res/drawable/ww_app_icon.jpg",description:"This app aims to help the narrator of a Werewolves game avoid making error \n        by managing all the actions made by the players, and computing them according to the game rules.",technologies:["Kotlin","Android"],projectLink:"https://github.com/RiadhAdrani/werewolves_of_the_millers_hollow"},{name:"Color Noter",type:"Android App",color:"#8cacb9",logo:"https://raw.githubusercontent.com/RiadhAdrani/color-noter-desktop/master/md/color-noter.png",description:"Color Noter is a color based note taking app \n      that offer the user the ability to write and save his ideas \n      and todos in an easy to use environment.",technologies:["Java","Android","Firebase"],projectLink:"https://github.com/RiadhAdrani/color_note_plus"}],De=()=>ae({className:"container",children:[Ne("Projects"),...Re.map((e=>(e=>{const t=Array.isArray(e.projectLink)?e.projectLink:[e.projectLink];return ce({style:{className:"project-view",normal:{textAlign:"left",padding:"20px 30px",border:"1px solid #ffffff22",borderRadius:"5px",marginBottom:"20px"},mediaQueries:[{condition:"(max-width:800px)",normal:{flexDirection:"column",padding:"20px 15px"}}]},children:[Y({src:e.logo,height:90,width:90,style:{className:"project-view-img",scoped:!0,normal:{marginRight:"20px",border:`3px solid ${e.color}`,borderRadius:"50%",marginLeft:"5px"}}}),ae({children:[ee({style:{className:"project-view-title",scoped:!0,normal:{color:e.color}},text:[e.name,G({style:{className:"project-type",normal:{fontWeight:300}},text:` (${e.type}) `}),G({flags:{renderIf:null!=e.projectLink},text:t.map((e=>X({href:e,target:"blank",style:{inline:{color:"inherit",paddingRight:"5px"}},children:J({className:"fa-brands fa-github"})})))}),G({text:" "}),X({flags:{renderIf:null!=e.demoLink},href:e.demoLink,style:{inline:{color:"inherit"}},children:J({className:"fa-solid fa-globe"})})]}),ne({style:{className:"project-description",normal:{padding:"5px",lineHeight:1.35}},text:e.description}),ce({style:{className:"projects-techs",normal:{flexWrap:"wrap"}},children:e.technologies.map((t=>G({text:t,style:{className:"technology",scoped:!0,normal:{padding:"5px 15px",marginRight:"5px",marginTop:"7.5px",border:`1px solid ${e.color}`,color:e.color,borderRadius:"15px"},hover:{background:e.color,color:"black",cursor:"pointer"}}})))})]})]})})(e)))]}),Oe=[{title:"Web Development",subTitle:"Building beautiful web Apps",text:'I started learning the web in Mars 2021 \n        by taking the freeCodeCamp courses and dived deeper into React. \n        I watched a documentary about Vue.js and decided to learn it too, \n        it was a good experience. Meanwhile, \n        I worked as a Web Designer, which improved my skills further.\n        After Vue.js, I tried to learn Angular, \n        I understood the structure of the framework, \n        but I think, and still think, that it is overengineered.\n        And with that, I decided to make my own Front End framework which I called "Recursive"',background:"https://wallpaperaccess.com/full/4635743.jpg",technologies:["Javascript","Typescript","Dart","React","Vue","Angular","Svelte","Flutter","Recursive","Bootstrap"]},{title:"Back End",subTitle:"Behind the scene",text:'Created multiple project using Google\'s "Firebase", but decided later that I should learn the "real" backend.',background:"https://wallpapercave.com/wp/wp10318660.jpg",technologies:["Javascript","Java","Express","Spring Boot","Firebase"]},{title:"Mobile Development",subTitle:"Android > iOS",text:'Android Development was actually my "First Love" which started all of this! \n          My first App was a Messenger clone made for a class project using "Kotlin" and "Firebase".\n          In addition to that, \n          I created a note-taking app called "Color Noter" using "Java" and then I forgot about that language.\n          I also made more apps, for friends and customers, as Freelance.',background:"https://wallpapercave.com/wp/wp9517064.jpg",technologies:["Java","Kotlin","Dart","C#","Native","Flutter","Xamarin","Ionic"]},{title:"Desktop Development",subTitle:"Electron for the win",text:'Front End development is easy, very easy (at least for me), \n          and I found it hard to get into the ".NET" universe (I don\'t have a Mac),\n          and then I stumbled upon "Electron.js" : \n          which basically load a web page in a chromium instance and that\'s very genius! \n          And it works for all major platforms too!\n          So, you use what you learned in web to develop Desktop apps.\n          Hey wait! I am a hobbyist game developer too...',background:"https://wallpaper.dog/large/13690.png",technologies:["Javascript","C#","Electron","Unity"]},{title:"Graphic Designer",subTitle:"Adobe got them all",text:'I had a youtube channel in which I posted "Extended Remixes" \n          for "Epic-Neo-classical-Orchestral" music (google Two Steps From Hell). \n          I created animated backgrounds too using After Effects and Photoshop. \n          I refined my skills during the pandemic in which a lot of courses became free, \n          and that was not a waste of time as I got my first job as a Web Designer.',background:"https://wallpapercave.com/wp/wp3985137.jpg",technologies:["Adobe Photoshop","Adobe Illustrator","Adobe After Effects","Adobe Premiere Pro"]}],Le=()=>ae({className:"container",children:[Ne("Skills"),...Oe.map((e=>(e=>ae({style:{className:"skill-item",scoped:!0,normal:{textAlign:"left",border:"1px solid #424242",borderRadius:"10px",marginBottom:"20px",backgroundSize:"cover",backgroundPosition:"center center",backgroundRepeat:"no-repeat",backgroundImage:`url(${e.background})`}},children:[ae({style:{className:"skill-bg",normal:{background:"linear-gradient(90deg, rgba(30,30,30,1) 33%,rgba(30,30,30,0.9) 80%, rgba(30,30,30,0.6) 100%)",padding:"30px"},mediaQueries:[{condition:"(max-width:800px) and (min-width:601px)",normal:{padding:"20px 15px"}},{condition:"(max-width:600px)",normal:{padding:"20px 10px"}}]},children:[ee({text:e.title,style:{className:"skill-title",normal:{fontWeight:500,fontSize:"1.85em",textTransform:"uppercase"}}}),Z({text:e.subTitle,style:{className:"skill-sub-title",normal:{fontWeight:300,fontSize:"1.5em"}}}),se({height:"15px"}),ne({text:e.text,style:{className:"skill-text",normal:{padding:"5px",lineHeight:1.5}}}),se({height:"15px"}),ce({style:{className:"skill-text",normal:{flexWrap:"wrap"}},children:e.technologies.map((e=>G({text:e,style:{className:"skill-span",normal:{padding:"5px 15px",marginRight:"5px",marginTop:"7.5px",border:"1px solid white",borderRadius:"15px"},hover:{background:"white",color:"#1e1e1e",cursor:"pointer"}}})))})]})]}))(e)))]}),Pe=(e,t)=>W({text:e,style:{className:"form-button",normal:{padding:"10px 20px",color:"#1e1e1e",backgroundColor:"white",border:"none",borderRadius:"5px",font:"inherit",fontWeight:500,textTransform:"uppercase"}},events:{onClick:t}}),Me=(e,t,n="text")=>{const[i,s]=pe(e);return K({value:i,placeholder:t,type:n,events:{onChange:e=>s(e.target.value)},style:{className:"input-field",normal:{background:"#1e1e1e",border:"1px solid #424242",borderRadius:"5px",padding:"10px 20px",color:"inherit",fontFamily:"inherit",transition:"0.3s"},focus:{outline:"1px solid #1e7e1e"}}})},Ue=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let s=e.charCodeAt(i);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=63&s|128):55296==(64512&s)&&i+1<e.length&&56320==(64512&e.charCodeAt(i+1))?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++i)),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=63&s|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=63&s|128)}return t},Ve={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let t=0;t<e.length;t+=3){const s=e[t],r=t+1<e.length,o=r?e[t+1]:0,a=t+2<e.length,c=a?e[t+2]:0,l=s>>2,h=(3&s)<<4|o>>4;let u=(15&o)<<2|c>>6,d=63&c;a||(d=64,r||(u=64)),i.push(n[l],n[h],n[u],n[d])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Ue(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,i=0;for(;n<e.length;){const s=e[n++];if(s<128)t[i++]=String.fromCharCode(s);else if(s>191&&s<224){const r=e[n++];t[i++]=String.fromCharCode((31&s)<<6|63&r)}else if(s>239&&s<365){const r=((7&s)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[i++]=String.fromCharCode(55296+(r>>10)),t[i++]=String.fromCharCode(56320+(1023&r))}else{const r=e[n++],o=e[n++];t[i++]=String.fromCharCode((15&s)<<12|(63&r)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let t=0;t<e.length;){const s=n[e.charAt(t++)],r=t<e.length?n[e.charAt(t)]:0;++t;const o=t<e.length?n[e.charAt(t)]:64;++t;const a=t<e.length?n[e.charAt(t)]:64;if(++t,null==s||null==r||null==o||null==a)throw Error();const c=s<<2|r>>4;if(i.push(c),64!==o){const e=r<<4&240|o>>2;if(i.push(e),64!==a){const e=o<<6&192|a;i.push(e)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},Fe=function(e){try{return Ve.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};class Be{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function je(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function qe(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(je())}function $e(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function ze(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function He(){const e=je();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}class We extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,We.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ke.prototype.create)}}class Ke{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],r=s?function(e,t){return e.replace(Ge,((e,n)=>{const i=t[n];return null!=i?String(i):`<${n}?>`}))}(s,n):"Error",o=`${this.serviceName}: ${r} (${i}).`;return new We(i,o,n)}}const Ge=/\{\$([^}]+)}/g;function Qe(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const s of n){if(!i.includes(s))return!1;const n=e[s],r=t[s];if(Je(n)&&Je(r)){if(!Qe(n,r))return!1}else if(n!==r)return!1}for(const e of i)if(!n.includes(e))return!1;return!0}function Je(e){return null!==e&&"object"==typeof e}function Xe(e){const t=[];for(const[n,i]of Object.entries(e))Array.isArray(i)?i.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function Ye(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,i]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(i)}})),t}function Ze(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class et{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let i;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");i=function(e,t){if("object"!=typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"==typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===i.next&&(i.next=tt),void 0===i.error&&(i.error=tt),void 0===i.complete&&(i.complete=tt);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(e){}})),this.observers.push(i),s}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function tt(){}function nt(e){return e&&e._delegate?e._delegate:e}class it{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const st="[DEFAULT]";class rt{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Be;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),i=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(i)return null;throw e}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:st})}catch(e){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(e){}}}}clearInstance(e="[DEFAULT]"){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(e="[DEFAULT]"){return this.instances.has(e)}getOptions(e="[DEFAULT]"){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[e,t]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(e)&&t.resolve(i)}return i}onInit(e,t){var n;const i=this.normalizeInstanceIdentifier(t),s=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;s.add(e),this.onInitCallbacks.set(i,s);const r=this.instances.get(i);return r&&e(r,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(i=e,i===st?void 0:i),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(e){}var i;return n||null}normalizeInstanceIdentifier(e="[DEFAULT]"){return this.component?this.component.multipleInstances?e:st:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ot{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new rt(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const at=[];var ct;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(ct||(ct={}));const lt={debug:ct.DEBUG,verbose:ct.VERBOSE,info:ct.INFO,warn:ct.WARN,error:ct.ERROR,silent:ct.SILENT},ht=ct.INFO,ut={[ct.DEBUG]:"log",[ct.VERBOSE]:"log",[ct.INFO]:"info",[ct.WARN]:"warn",[ct.ERROR]:"error"},dt=(e,t,...n)=>{if(t<e.logLevel)return;const i=(new Date).toISOString(),s=ut[t];if(!s)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[s](`[${i}]  ${e.name}:`,...n)};class pt{constructor(e){this.name=e,this._logLevel=ht,this._logHandler=dt,this._userLogHandler=null,at.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ct))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?lt[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ct.DEBUG,...e),this._logHandler(this,ct.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ct.VERBOSE,...e),this._logHandler(this,ct.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ct.INFO,...e),this._logHandler(this,ct.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ct.WARN,...e),this._logHandler(this,ct.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ct.ERROR,...e),this._logHandler(this,ct.ERROR,...e)}}class ft{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const mt="@firebase/app",gt="0.7.17",yt=new pt("@firebase/app"),vt="[DEFAULT]",bt={[mt]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},wt=new Map,kt=new Map;function Et(e,t){try{e.container.addComponent(t)}catch(n){yt.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function It(e){const t=e.name;if(kt.has(t))return yt.debug(`There were multiple attempts to register component ${t}.`),!1;kt.set(t,e);for(const t of wt.values())Et(t,e);return!0}function Tt(e,t){return e.container.getProvider(t)}const St=new Ke("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class _t{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new it("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw St.create("app-deleted",{appName:this._name})}}const Ct="9.6.7";function xt(e="[DEFAULT]"){const t=wt.get(e);if(!t)throw St.create("no-app",{appName:e});return t}function At(e,t,n){var i;let s=null!==(i=bt[e])&&void 0!==i?i:e;n&&(s+=`-${n}`);const r=s.match(/\s|\//),o=t.match(/\s|\//);if(r||o){const e=[`Unable to register library "${s}" with version "${t}":`];return r&&e.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void yt.warn(e.join(" "))}It(new it(`${s}-version`,(()=>({library:s,version:t})),"VERSION"))}var Nt;Nt="",It(new it("platform-logger",(e=>new ft(e)),"PRIVATE")),At(mt,gt,Nt),At(mt,gt,"esm2017"),At("fire-js","");At("firebase","9.6.7","app");var Rt,Dt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==e.g?e.g:"undefined"!=typeof self?self:{},Ot={},Lt=Lt||{},Pt=Dt||self;function Mt(){}function Ut(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Vt(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Ft="closure_uid_"+(1e9*Math.random()>>>0),Bt=0;function jt(e,t,n){return e.call.apply(e.bind,arguments)}function qt(e,t,n){if(!e)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function $t(e,t,n){return($t=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?jt:qt).apply(null,arguments)}function zt(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Ht(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,i){for(var s=Array(arguments.length-2),r=2;r<arguments.length;r++)s[r-2]=arguments[r];return t.prototype[n].apply(e,s)}}function Wt(){this.s=this.s,this.o=this.o}var Kt={};Wt.prototype.s=!1,Wt.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,Ft)&&e[Ft]||(e[Ft]=++Bt)}(this);delete Kt[e]}},Wt.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Gt=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},Qt=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){const i=e.length,s="string"==typeof e?e.split(""):e;for(let r=0;r<i;r++)r in s&&t.call(n,s[r],r,e)};function Jt(e){return Array.prototype.concat.apply([],arguments)}function Xt(e){const t=e.length;if(0<t){const n=Array(t);for(let i=0;i<t;i++)n[i]=e[i];return n}return[]}function Yt(e){return/^[\s\xa0]*$/.test(e)}var Zt,en=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function tn(e,t){return-1!=e.indexOf(t)}function nn(e,t){return e<t?-1:e>t?1:0}e:{var sn=Pt.navigator;if(sn){var rn=sn.userAgent;if(rn){Zt=rn;break e}}Zt=""}function on(e,t,n){for(const i in e)t.call(n,e[i],i,e)}function an(e){const t={};for(const n in e)t[n]=e[n];return t}var cn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ln(e,t){let n,i;for(let t=1;t<arguments.length;t++){for(n in i=arguments[t],i)e[n]=i[n];for(let t=0;t<cn.length;t++)n=cn[t],Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}}function hn(e){return hn[" "](e),e}hn[" "]=Mt;var un,dn,pn=tn(Zt,"Opera"),fn=tn(Zt,"Trident")||tn(Zt,"MSIE"),mn=tn(Zt,"Edge"),gn=mn||fn,yn=tn(Zt,"Gecko")&&!(tn(Zt.toLowerCase(),"webkit")&&!tn(Zt,"Edge"))&&!(tn(Zt,"Trident")||tn(Zt,"MSIE"))&&!tn(Zt,"Edge"),vn=tn(Zt.toLowerCase(),"webkit")&&!tn(Zt,"Edge");function bn(){var e=Pt.document;return e?e.documentMode:void 0}e:{var wn="",kn=(dn=Zt,yn?/rv:([^\);]+)(\)|;)/.exec(dn):mn?/Edge\/([\d\.]+)/.exec(dn):fn?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(dn):vn?/WebKit\/(\S+)/.exec(dn):pn?/(?:Version)[ \/]?(\S+)/.exec(dn):void 0);if(kn&&(wn=kn?kn[1]:""),fn){var En=bn();if(null!=En&&En>parseFloat(wn)){un=String(En);break e}}un=wn}var In,Tn={};function Sn(){return function(e){var t=Tn;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){let e=0;const t=en(String(un)).split("."),n=en("9").split("."),i=Math.max(t.length,n.length);for(let o=0;0==e&&o<i;o++){var s=t[o]||"",r=n[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],0==s[0].length&&0==r[0].length)break;e=nn(0==s[1].length?0:parseInt(s[1],10),0==r[1].length?0:parseInt(r[1],10))||nn(0==s[2].length,0==r[2].length)||nn(s[2],r[2]),s=s[3],r=r[3]}while(0==e)}return 0<=e}))}if(Pt.document&&fn){var _n=bn();In=_n||(parseInt(un,10)||void 0)}else In=void 0;var Cn=In,xn=function(){if(!Pt.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Pt.addEventListener("test",Mt,t),Pt.removeEventListener("test",Mt,t)}catch(e){}return e}();function An(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function Nn(e,t){if(An.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,i=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(yn){e:{try{hn(t.nodeName);var s=!0;break e}catch(e){}s=!1}s||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:Rn[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Nn.Z.h.call(this)}}An.prototype.h=function(){this.defaultPrevented=!0},Ht(Nn,An);var Rn={2:"touch",3:"pen",4:"mouse"};Nn.prototype.h=function(){Nn.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Dn="closure_listenable_"+(1e6*Math.random()|0),On=0;function Ln(e,t,n,i,s){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!i,this.ia=s,this.key=++On,this.ca=this.fa=!1}function Pn(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function Mn(e){this.src=e,this.g={},this.h=0}function Un(e,t){var n=t.type;if(n in e.g){var i,s=e.g[n],r=Gt(s,t);(i=0<=r)&&Array.prototype.splice.call(s,r,1),i&&(Pn(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Vn(e,t,n,i){for(var s=0;s<e.length;++s){var r=e[s];if(!r.ca&&r.listener==t&&r.capture==!!n&&r.ia==i)return s}return-1}Mn.prototype.add=function(e,t,n,i,s){var r=e.toString();(e=this.g[r])||(e=this.g[r]=[],this.h++);var o=Vn(e,t,i,s);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new Ln(t,this.src,r,!!i,s)).fa=n,e.push(t)),t};var Fn="closure_lm_"+(1e6*Math.random()|0),Bn={};function jn(e,t,n,i,s){if(i&&i.once)return $n(e,t,n,i,s);if(Array.isArray(t)){for(var r=0;r<t.length;r++)jn(e,t[r],n,i,s);return null}return n=Jn(n),e&&e[Dn]?e.N(t,n,Vt(i)?!!i.capture:!!i,s):qn(e,t,n,!1,i,s)}function qn(e,t,n,i,s,r){if(!t)throw Error("Invalid event type");var o=Vt(s)?!!s.capture:!!s,a=Gn(e);if(a||(e[Fn]=a=new Mn(e)),(n=a.add(t,n,i,o,r)).proxy)return n;if(i=function(){function e(n){return t.call(e.src,e.listener,n)}var t=Kn;return e}(),n.proxy=i,i.src=e,i.listener=n,e.addEventListener)xn||(s=o),void 0===s&&(s=!1),e.addEventListener(t.toString(),i,s);else if(e.attachEvent)e.attachEvent(Wn(t.toString()),i);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(i)}return n}function $n(e,t,n,i,s){if(Array.isArray(t)){for(var r=0;r<t.length;r++)$n(e,t[r],n,i,s);return null}return n=Jn(n),e&&e[Dn]?e.O(t,n,Vt(i)?!!i.capture:!!i,s):qn(e,t,n,!0,i,s)}function zn(e,t,n,i,s){if(Array.isArray(t))for(var r=0;r<t.length;r++)zn(e,t[r],n,i,s);else i=Vt(i)?!!i.capture:!!i,n=Jn(n),e&&e[Dn]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Vn(r=e.g[t],n,i,s))&&(Pn(r[n]),Array.prototype.splice.call(r,n,1),0==r.length&&(delete e.g[t],e.h--)))):e&&(e=Gn(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Vn(t,n,i,s)),(n=-1<e?t[e]:null)&&Hn(n))}function Hn(e){if("number"!=typeof e&&e&&!e.ca){var t=e.src;if(t&&t[Dn])Un(t.i,e);else{var n=e.type,i=e.proxy;t.removeEventListener?t.removeEventListener(n,i,e.capture):t.detachEvent?t.detachEvent(Wn(n),i):t.addListener&&t.removeListener&&t.removeListener(i),(n=Gn(t))?(Un(n,e),0==n.h&&(n.src=null,t[Fn]=null)):Pn(e)}}}function Wn(e){return e in Bn?Bn[e]:Bn[e]="on"+e}function Kn(e,t){if(e.ca)e=!0;else{t=new Nn(t,this);var n=e.listener,i=e.ia||e.src;e.fa&&Hn(e),e=n.call(i,t)}return e}function Gn(e){return(e=e[Fn])instanceof Mn?e:null}var Qn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Jn(e){return"function"==typeof e?e:(e[Qn]||(e[Qn]=function(t){return e.handleEvent(t)}),e[Qn])}function Xn(){Wt.call(this),this.i=new Mn(this),this.P=this,this.I=null}function Yn(e,t){var n,i=e.I;if(i)for(n=[];i;i=i.I)n.push(i);if(e=e.P,i=t.type||t,"string"==typeof t)t=new An(t,e);else if(t instanceof An)t.target=t.target||e;else{var s=t;ln(t=new An(i,e),s)}if(s=!0,n)for(var r=n.length-1;0<=r;r--){var o=t.g=n[r];s=Zn(o,i,!0,t)&&s}if(s=Zn(o=t.g=e,i,!0,t)&&s,s=Zn(o,i,!1,t)&&s,n)for(r=0;r<n.length;r++)s=Zn(o=t.g=n[r],i,!1,t)&&s}function Zn(e,t,n,i){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var s=!0,r=0;r<t.length;++r){var o=t[r];if(o&&!o.ca&&o.capture==n){var a=o.listener,c=o.ia||o.src;o.fa&&Un(e.i,o),s=!1!==a.call(c,i)&&s}}return s&&!i.defaultPrevented}Ht(Xn,Wt),Xn.prototype[Dn]=!0,Xn.prototype.removeEventListener=function(e,t,n,i){zn(this,e,t,n,i)},Xn.prototype.M=function(){if(Xn.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],i=0;i<n.length;i++)Pn(n[i]);delete t.g[e],t.h--}}this.I=null},Xn.prototype.N=function(e,t,n,i){return this.i.add(String(e),t,!1,n,i)},Xn.prototype.O=function(e,t,n,i){return this.i.add(String(e),t,!0,n,i)};var ei=Pt.JSON.stringify;function ti(){var e=ci;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var ni,ii=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new si),(e=>e.reset()));class si{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function ri(e){Pt.setTimeout((()=>{throw e}),0)}function oi(e,t){ni||function(){var e=Pt.Promise.resolve(void 0);ni=function(){e.then(li)}}(),ai||(ni(),ai=!0),ci.add(e,t)}var ai=!1,ci=new class{constructor(){this.h=this.g=null}add(e,t){const n=ii.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}};function li(){for(var e;e=ti();){try{e.h.call(e.g)}catch(e){ri(e)}var t=ii;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}ai=!1}function hi(e,t){Xn.call(this),this.h=e||1,this.g=t||Pt,this.j=$t(this.kb,this),this.l=Date.now()}function ui(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function di(e,t,n){if("function"==typeof e)n&&(e=$t(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=$t(e.handleEvent,e)}return 2147483647<Number(t)?-1:Pt.setTimeout(e,t||0)}function pi(e){e.g=di((()=>{e.g=null,e.i&&(e.i=!1,pi(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}Ht(hi,Xn),(Rt=hi.prototype).da=!1,Rt.S=null,Rt.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Yn(this,"tick"),this.da&&(ui(this),this.start()))}},Rt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Rt.M=function(){hi.Z.M.call(this),ui(this),delete this.g};class fi extends Wt{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:pi(this)}M(){super.M(),this.g&&(Pt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function mi(e){Wt.call(this),this.h=e,this.g={}}Ht(mi,Wt);var gi=[];function yi(e,t,n,i){Array.isArray(n)||(n&&(gi[0]=n.toString()),n=gi);for(var s=0;s<n.length;s++){var r=jn(t,n[s],i||e.handleEvent,!1,e.h||e);if(!r)break;e.g[r.key]=r}}function vi(e){on(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Hn(e)}),e),e.g={}}function bi(){this.g=!0}function wi(e,t,n,i){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var i=n[e];if(!(2>i.length)){var s=i[1];if(Array.isArray(s)&&!(1>s.length)){var r=s[0];if("noop"!=r&&"stop"!=r&&"close"!=r)for(var o=1;o<s.length;o++)s[o]=""}}}return ei(n)}catch(e){return t}}(e,n)+(i?" "+i:"")}))}mi.prototype.M=function(){mi.Z.M.call(this),vi(this)},mi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},bi.prototype.Aa=function(){this.g=!1},bi.prototype.info=function(){};var ki={},Ei=null;function Ii(){return Ei=Ei||new Xn}function Ti(e){An.call(this,ki.Ma,e)}function Si(e){const t=Ii();Yn(t,new Ti(t,e))}function _i(e,t){An.call(this,ki.STAT_EVENT,e),this.stat=t}function Ci(e){const t=Ii();Yn(t,new _i(t,e))}function xi(e,t){An.call(this,ki.Na,e),this.size=t}function Ai(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return Pt.setTimeout((function(){e()}),t)}ki.Ma="serverreachability",Ht(Ti,An),ki.STAT_EVENT="statevent",Ht(_i,An),ki.Na="timingevent",Ht(xi,An);var Ni={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Ri={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Di(){}function Oi(e){return e.h||(e.h=e.i())}function Li(){}Di.prototype.h=null;var Pi,Mi={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Ui(){An.call(this,"d")}function Vi(){An.call(this,"c")}function Fi(){}function Bi(e,t,n,i){this.l=e,this.j=t,this.m=n,this.X=i||1,this.V=new mi(this),this.P=qi,e=gn?125:void 0,this.W=new hi(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new ji}function ji(){this.i=null,this.g="",this.h=!1}Ht(Ui,An),Ht(Vi,An),Ht(Fi,Di),Fi.prototype.g=function(){return new XMLHttpRequest},Fi.prototype.i=function(){return{}},Pi=new Fi;var qi=45e3,$i={},zi={};function Hi(e,t,n){e.K=1,e.v=fs(cs(t)),e.s=n,e.U=!0,Wi(e,null)}function Wi(e,t){e.F=Date.now(),Ji(e),e.A=cs(e.v);var n=e.A,i=e.X;Array.isArray(i)||(i=[String(i)]),Cs(n.h,"t",i),e.C=0,n=e.l.H,e.h=new ji,e.g=Cr(e.l,n?t:null,!e.s),0<e.O&&(e.L=new fi($t(e.Ia,e,e.g),e.O)),yi(e.V,e.g,"readystatechange",e.gb),t=e.H?an(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Si(1),function(e,t,n,i,s,r){e.info((function(){if(e.g)if(r)for(var o="",a=r.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var h=l[0];l=l[1];var u=h.split("_");o=2<=u.length&&"type"==u[1]?o+(h+"=")+l+"&":o+(h+"=redacted&")}}else o=null;else o=r;return"XMLHTTP REQ ("+i+") [attempt "+s+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function Ki(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function Gi(e,t,n){let i,s=!0;for(;!e.I&&e.C<n.length;){if(i=Qi(e,n),i==zi){4==t&&(e.o=4,Ci(14),s=!1),wi(e.j,e.m,null,"[Incomplete Response]");break}if(i==$i){e.o=4,Ci(15),wi(e.j,e.m,n,"[Invalid Chunk]"),s=!1;break}wi(e.j,e.m,i,null),ts(e,i)}Ki(e)&&i!=zi&&i!=$i&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Ci(16),s=!1),e.i=e.i&&s,s?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),br(t),t.L=!0,Ci(11))):(wi(e.j,e.m,n,"[Invalid Chunked Response]"),es(e),Zi(e))}function Qi(e,t){var n=e.C,i=t.indexOf("\n",n);return-1==i?zi:(n=Number(t.substring(n,i)),isNaN(n)?$i:(i+=1)+n>t.length?zi:(t=t.substr(i,n),e.C=i+n,t))}function Ji(e){e.Y=Date.now()+e.P,Xi(e,e.P)}function Xi(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ai($t(e.eb,e),t)}function Yi(e){e.B&&(Pt.clearTimeout(e.B),e.B=null)}function Zi(e){0==e.l.G||e.I||Er(e.l,e)}function es(e){Yi(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,ui(e.W),vi(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function ts(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||Os(n.i,e)))if(n.I=e.N,!e.J&&Os(n.i,e)&&3==n.G){try{var i=n.Ca.g.parse(t)}catch(e){i=null}if(Array.isArray(i)&&3==i.length){var s=i;if(0==s[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;kr(n),hr(n)}vr(n),Ci(18)}}else n.ta=s[1],0<n.ta-n.U&&37500>s[2]&&n.N&&0==n.A&&!n.v&&(n.v=Ai($t(n.ab,n),6e3));if(1>=Ds(n.i)&&n.ka){try{n.ka()}catch(e){}n.ka=void 0}}else Tr(n,11)}else if((e.J||n.g==e)&&kr(n),!Yt(t))for(s=n.Ca.g.parse(t),t=0;t<s.length;t++){let l=s[t];if(n.U=l[0],l=l[1],2==n.G)if("c"==l[0]){n.J=l[1],n.la=l[2];const t=l[3];null!=t&&(n.ma=t,n.h.info("VER="+n.ma));const s=l[4];null!=s&&(n.za=s,n.h.info("SVER="+n.za));const h=l[5];null!=h&&"number"==typeof h&&0<h&&(i=1.5*h,n.K=i,n.h.info("backChannelRequestTimeoutMs_="+i)),i=n;const u=e.g;if(u){const e=u.g?u.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var r=i.i;!r.g&&(tn(e,"spdy")||tn(e,"quic")||tn(e,"h2"))&&(r.j=r.l,r.g=new Set,r.h&&(Ls(r,r.h),r.h=null))}if(i.D){const e=u.g?u.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(i.sa=e,ps(i.F,i.D,e))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var o=e;if((i=n).oa=_r(i,i.H?i.la:null,i.W),o.J){Ps(i.i,o);var a=o,c=i.K;c&&a.setTimeout(c),a.B&&(Yi(a),Ji(a)),i.g=o}else yr(i);0<n.l.length&&pr(n)}else"stop"!=l[0]&&"close"!=l[0]||Tr(n,7);else 3==n.G&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?Tr(n,7):lr(n):"noop"!=l[0]&&n.j&&n.j.wa(l),n.A=0)}Si(4)}catch(e){}}function ns(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Ut(e)||"string"==typeof e)Qt(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(Ut(e)||"string"==typeof e){n=[];for(var i=e.length,s=0;s<i;s++)n.push(s)}else for(s in n=[],i=0,e)n[i++]=s;i=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"==typeof e)return e.split("");if(Ut(e)){for(var t=[],n=e.length,i=0;i<n;i++)t.push(e[i]);return t}for(i in t=[],n=0,e)t[n++]=e[i];return t}(e),s=i.length;for(var r=0;r<s;r++)t.call(void 0,i[r],n&&n[r],e)}}function is(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var i=0;i<n;i+=2)this.set(arguments[i],arguments[i+1])}else if(e)if(e instanceof is)for(n=e.T(),i=0;i<n.length;i++)this.set(n[i],e.get(n[i]));else for(i in e)this.set(i,e[i])}function ss(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var i=e.g[t];rs(e.h,i)&&(e.g[n++]=i),t++}e.g.length=n}if(e.i!=e.g.length){var s={};for(n=t=0;t<e.g.length;)rs(s,i=e.g[t])||(e.g[n++]=i,s[i]=1),t++;e.g.length=n}}function rs(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(Rt=Bi.prototype).setTimeout=function(e){this.P=e},Rt.gb=function(e){e=e.target;const t=this.L;t&&3==sr(e)?t.l():this.Ia(e)},Rt.Ia=function(e){try{if(e==this.g)e:{const h=sr(this.g);var t=this.g.Da();const u=this.g.ba();if(!(3>h)&&(3!=h||gn||this.g&&(this.h.h||this.g.ga()||rr(this.g)))){this.I||4!=h||7==t||Si(8==t||0>=u?3:2),Yi(this);var n=this.g.ba();this.N=n;t:if(Ki(this)){var i=rr(this.g);e="";var s=i.length,r=4==sr(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){es(this),Zi(this);var o="";break t}this.h.i=new Pt.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(i[t],{stream:r&&t==s-1});i.splice(0,s),this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.ga();if(this.i=200==n,function(e,t,n,i,s,r,o){e.info((function(){return"XMLHTTP RESP ("+i+") [ attempt "+s+"]: "+t+"\n"+n+"\n"+r+" "+o}))}(this.j,this.u,this.A,this.m,this.X,h,n),this.i){if(this.$&&!this.J){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Yt(a)){var l=a;break t}}l=null}if(!(n=l)){this.i=!1,this.o=3,Ci(12),es(this),Zi(this);break e}wi(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,ts(this,n)}this.U?(Gi(this,h,o),gn&&this.i&&3==h&&(yi(this.V,this.W,"tick",this.fb),this.W.start())):(wi(this.j,this.m,o,null),ts(this,o)),4==h&&es(this),this.i&&!this.I&&(4==h?Er(this.l,this):(this.i=!1,Ji(this)))}else 400==n&&0<o.indexOf("Unknown SID")?(this.o=3,Ci(12)):(this.o=0,Ci(13)),es(this),Zi(this)}}}catch(e){}},Rt.fb=function(){if(this.g){var e=sr(this.g),t=this.g.ga();this.C<t.length&&(Yi(this),Gi(this,e,t),this.i&&4!=e&&Ji(this))}},Rt.cancel=function(){this.I=!0,es(this)},Rt.eb=function(){this.B=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(Si(3),Ci(17)),es(this),this.o=2,Zi(this)):Xi(this,this.Y-e)},(Rt=is.prototype).R=function(){ss(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},Rt.T=function(){return ss(this),this.g.concat()},Rt.get=function(e,t){return rs(this.h,e)?this.h[e]:t},Rt.set=function(e,t){rs(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},Rt.forEach=function(e,t){for(var n=this.T(),i=0;i<n.length;i++){var s=n[i],r=this.get(s);e.call(t,r,s,this)}};var os=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function as(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof as){this.g=void 0!==t?t:e.g,ls(this,e.j),this.s=e.s,hs(this,e.i),us(this,e.m),this.l=e.l,t=e.h;var n=new Is;n.i=t.i,t.g&&(n.g=new is(t.g),n.h=t.h),ds(this,n),this.o=e.o}else e&&(n=String(e).match(os))?(this.g=!!t,ls(this,n[1]||"",!0),this.s=ms(n[2]||""),hs(this,n[3]||"",!0),us(this,n[4]),this.l=ms(n[5]||"",!0),ds(this,n[6]||"",!0),this.o=ms(n[7]||"")):(this.g=!!t,this.h=new Is(null,this.g))}function cs(e){return new as(e)}function ls(e,t,n){e.j=n?ms(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function hs(e,t,n){e.i=n?ms(t,!0):t}function us(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function ds(e,t,n){t instanceof Is?(e.h=t,function(e,t){t&&!e.j&&(Ts(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Ss(this,t),Cs(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=gs(t,ks)),e.h=new Is(t,e.g))}function ps(e,t,n){e.h.set(t,n)}function fs(e){return ps(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ms(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function gs(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,ys),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ys(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}as.prototype.toString=function(){var e=[],t=this.j;t&&e.push(gs(t,vs,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(gs(t,vs,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(gs(n,"/"==n.charAt(0)?ws:bs,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",gs(n,Es)),e.join("")};var vs=/[#\/\?@]/g,bs=/[#\?:]/g,ws=/[#\?]/g,ks=/[#\?@]/g,Es=/#/g;function Is(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Ts(e){e.g||(e.g=new is,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var i=e[n].indexOf("="),s=null;if(0<=i){var r=e[n].substring(0,i);s=e[n].substring(i+1)}else r=e[n];t(r,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Ss(e,t){Ts(e),t=xs(e,t),rs(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,rs((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&ss(e)))}function _s(e,t){return Ts(e),t=xs(e,t),rs(e.g.h,t)}function Cs(e,t,n){Ss(e,t),0<n.length&&(e.i=null,e.g.set(xs(e,t),Xt(n)),e.h+=n.length)}function xs(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Rt=Is.prototype).add=function(e,t){Ts(this),this.i=null,e=xs(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Rt.forEach=function(e,t){Ts(this),this.g.forEach((function(n,i){Qt(n,(function(n){e.call(t,n,i,this)}),this)}),this)},Rt.T=function(){Ts(this);for(var e=this.g.R(),t=this.g.T(),n=[],i=0;i<t.length;i++)for(var s=e[i],r=0;r<s.length;r++)n.push(t[i]);return n},Rt.R=function(e){Ts(this);var t=[];if("string"==typeof e)_s(this,e)&&(t=Jt(t,this.g.get(xs(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=Jt(t,e[n])}return t},Rt.set=function(e,t){return Ts(this),this.i=null,_s(this,e=xs(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Rt.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},Rt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var i=t[n],s=encodeURIComponent(String(i));i=this.R(i);for(var r=0;r<i.length;r++){var o=s;""!==i[r]&&(o+="="+encodeURIComponent(String(i[r]))),e.push(o)}}return this.i=e.join("&")};function As(e){this.l=e||Ns,Pt.PerformanceNavigationTiming?e=0<(e=Pt.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Pt.g&&Pt.g.Ea&&Pt.g.Ea()&&Pt.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Ns=10;function Rs(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ds(e){return e.h?1:e.g?e.g.size:0}function Os(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Ls(e,t){e.g?e.g.add(t):e.h=t}function Ps(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Ms(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return Xt(e.i)}function Us(){}function Vs(){this.g=new Us}function Fs(e,t,n){const i=n||"";try{ns(e,(function(e,n){let s=e;Vt(e)&&(s=ei(e)),t.push(i+n+"="+encodeURIComponent(s))}))}catch(e){throw t.push(i+"type="+encodeURIComponent("_badmap")),e}}function Bs(e,t,n,i,s){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,s(i)}catch(e){}}function js(e){this.l=e.$b||null,this.j=e.ib||!1}function qs(e,t){Xn.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=$s,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}As.prototype.cancel=function(){if(this.i=Ms(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}},Us.prototype.stringify=function(e){return Pt.JSON.stringify(e,void 0)},Us.prototype.parse=function(e){return Pt.JSON.parse(e,void 0)},Ht(js,Di),js.prototype.g=function(){return new qs(this.l,this.j)},js.prototype.i=function(e){return function(){return e}}({}),Ht(qs,Xn);var $s=0;function zs(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function Hs(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Ws(e)}function Ws(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Rt=qs.prototype).open=function(e,t){if(this.readyState!=$s)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Ws(this)},Rt.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Pt).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},Rt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Hs(this)),this.readyState=$s},Rt.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Ws(this)),this.g&&(this.readyState=3,Ws(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Pt.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;zs(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},Rt.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Hs(this):Ws(this),3==this.readyState&&zs(this)}},Rt.Ua=function(e){this.g&&(this.response=this.responseText=e,Hs(this))},Rt.Ta=function(e){this.g&&(this.response=e,Hs(this))},Rt.ha=function(){this.g&&Hs(this)},Rt.setRequestHeader=function(e,t){this.v.append(e,t)},Rt.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Rt.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(qs.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Ks=Pt.JSON.parse;function Gs(e){Xn.call(this),this.headers=new is,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Qs,this.K=this.L=!1}Ht(Gs,Xn);var Qs="",Js=/^https?$/i,Xs=["POST","PUT"];function Ys(e){return"content-type"==e.toLowerCase()}function Zs(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,er(e),nr(e)}function er(e){e.D||(e.D=!0,Yn(e,"complete"),Yn(e,"error"))}function tr(e){if(e.h&&void 0!==Lt&&(!e.C[1]||4!=sr(e)||2!=e.ba()))if(e.v&&4==sr(e))di(e.Fa,0,e);else if(Yn(e,"readystatechange"),4==sr(e)){e.h=!1;try{const a=e.ba();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var i;if(i=0===a){var s=String(e.H).match(os)[1]||null;if(!s&&Pt.self&&Pt.self.location){var r=Pt.self.location.protocol;s=r.substr(0,r.length-1)}i=!Js.test(s?s.toLowerCase():"")}n=i}if(n)Yn(e,"complete"),Yn(e,"success");else{e.m=6;try{var o=2<sr(e)?e.g.statusText:""}catch(e){o=""}e.j=o+" ["+e.ba()+"]",er(e)}}finally{nr(e)}}}function nr(e,t){if(e.g){ir(e);const n=e.g,i=e.C[0]?Mt:null;e.g=null,e.C=null,t||Yn(e,"ready");try{n.onreadystatechange=i}catch(e){}}}function ir(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Pt.clearTimeout(e.A),e.A=null)}function sr(e){return e.g?e.g.readyState:0}function rr(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case Qs:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(e){return null}}function or(e,t,n){e:{for(i in n){var i=!1;break e}i=!0}i||(n=function(e){let t="";return on(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):ps(e,t,n))}function ar(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function cr(e){this.za=0,this.l=[],this.h=new bi,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=ar("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=ar("baseRetryDelayMs",5e3,e),this.$a=ar("retryDelaySeedMs",1e4,e),this.Ya=ar("forwardChannelMaxRetries",2,e),this.ra=ar("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new As(e&&e.concurrentRequestLimit),this.Ca=new Vs,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function lr(e){if(ur(e),3==e.G){var t=e.V++,n=cs(e.F);ps(n,"SID",e.J),ps(n,"RID",t),ps(n,"TYPE","terminate"),mr(e,n),(t=new Bi(e,e.h,t,void 0)).K=2,t.v=fs(cs(n)),n=!1,Pt.navigator&&Pt.navigator.sendBeacon&&(n=Pt.navigator.sendBeacon(t.v.toString(),"")),!n&&Pt.Image&&((new Image).src=t.v,n=!0),n||(t.g=Cr(t.l,null),t.g.ea(t.v)),t.F=Date.now(),Ji(t)}Sr(e)}function hr(e){e.g&&(br(e),e.g.cancel(),e.g=null)}function ur(e){hr(e),e.u&&(Pt.clearTimeout(e.u),e.u=null),kr(e),e.i.cancel(),e.m&&("number"==typeof e.m&&Pt.clearTimeout(e.m),e.m=null)}function dr(e,t){e.l.push(new class{constructor(e,t){this.h=e,this.g=t}}(e.Za++,t)),3==e.G&&pr(e)}function pr(e){Rs(e.i)||e.m||(e.m=!0,oi(e.Ha,e),e.C=0)}function fr(e,t){var n;n=t?t.m:e.V++;const i=cs(e.F);ps(i,"SID",e.J),ps(i,"RID",n),ps(i,"AID",e.U),mr(e,i),e.o&&e.s&&or(i,e.o,e.s),n=new Bi(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=gr(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),Ls(e.i,n),Hi(n,i,t)}function mr(e,t){e.j&&ns({},(function(e,n){ps(t,n,e)}))}function gr(e,t,n){n=Math.min(e.l.length,n);var i=e.j?$t(e.j.Oa,e.j,e):null;e:{var s=e.l;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=s[0].h,e.push("ofs="+t)):t=0:e.push("ofs="+t);let r=!0;for(let o=0;o<n;o++){let n=s[o].h;const a=s[o].g;if(n-=t,0>n)t=Math.max(0,s[o].h-100),r=!1;else try{Fs(a,e,"req"+n+"_")}catch(e){i&&i(a)}}if(r){i=e.join("&");break e}}}return e=e.l.splice(0,n),t.D=e,i}function yr(e){e.g||e.u||(e.Y=1,oi(e.Ga,e),e.A=0)}function vr(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=Ai($t(e.Ga,e),Ir(e,e.A)),e.A++,!0)}function br(e){null!=e.B&&(Pt.clearTimeout(e.B),e.B=null)}function wr(e){e.g=new Bi(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=cs(e.oa);ps(t,"RID","rpc"),ps(t,"SID",e.J),ps(t,"CI",e.N?"0":"1"),ps(t,"AID",e.U),mr(e,t),ps(t,"TYPE","xmlhttp"),e.o&&e.s&&or(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=fs(cs(t)),n.s=null,n.U=!0,Wi(n,e)}function kr(e){null!=e.v&&(Pt.clearTimeout(e.v),e.v=null)}function Er(e,t){var n=null;if(e.g==t){kr(e),br(e),e.g=null;var i=2}else{if(!Os(e.i,t))return;n=t.D,Ps(e.i,t),i=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==i){n=t.s?t.s.length:0,t=Date.now()-t.F;var s=e.C;Yn(i=Ii(),new xi(i,n,t,s)),pr(e)}else yr(e);else if(3==(s=t.o)||0==s&&0<e.I||!(1==i&&function(e,t){return!(Ds(e.i)>=e.i.j-(e.m?1:0)||(e.m?(e.l=t.D.concat(e.l),0):1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya)||(e.m=Ai($t(e.Ha,e,t),Ir(e,e.C)),e.C++,0)))}(e,t)||2==i&&vr(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),s){case 1:Tr(e,5);break;case 4:Tr(e,10);break;case 3:Tr(e,6);break;default:Tr(e,2)}}function Ir(e,t){let n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function Tr(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var i=$t(e.jb,e);n||(n=new as("//www.google.com/images/cleardot.gif"),Pt.location&&"http"==Pt.location.protocol||ls(n,"https"),fs(n)),function(e,t){const n=new bi;if(Pt.Image){const i=new Image;i.onload=zt(Bs,n,i,"TestLoadImage: loaded",!0,t),i.onerror=zt(Bs,n,i,"TestLoadImage: error",!1,t),i.onabort=zt(Bs,n,i,"TestLoadImage: abort",!1,t),i.ontimeout=zt(Bs,n,i,"TestLoadImage: timeout",!1,t),Pt.setTimeout((function(){i.ontimeout&&i.ontimeout()}),1e4),i.src=e}else t(!1)}(n.toString(),i)}else Ci(2);e.G=0,e.j&&e.j.va(t),Sr(e),ur(e)}function Sr(e){e.G=0,e.I=-1,e.j&&(0==Ms(e.i).length&&0==e.l.length||(e.i.i.length=0,Xt(e.l),e.l.length=0),e.j.ua())}function _r(e,t,n){let i=function(e){return e instanceof as?cs(e):new as(e,void 0)}(n);if(""!=i.i)t&&hs(i,t+"."+i.i),us(i,i.m);else{const e=Pt.location;i=function(e,t,n,i){var s=new as(null,void 0);return e&&ls(s,e),t&&hs(s,t),n&&us(s,n),i&&(s.l=i),s}(e.protocol,t?t+"."+e.hostname:e.hostname,+e.port,n)}return e.aa&&on(e.aa,(function(e,t){ps(i,t,e)})),t=e.D,n=e.sa,t&&n&&ps(i,t,n),ps(i,"VER",e.ma),mr(e,i),i}function Cr(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new Gs(new js({ib:!0})):new Gs(e.qa)).L=e.H,t}function xr(){}function Ar(){if(fn&&!(10<=Number(Cn)))throw Error("Environmental error: no available transport.")}function Nr(e,t){Xn.call(this),this.g=new cr(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!Yt(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Yt(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Or(this)}function Rr(e){Ui.call(this);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Dr(){Vi.call(this),this.status=1}function Or(e){this.g=e}(Rt=Gs.prototype).ea=function(e,t,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Pi.g(),this.C=this.u?Oi(this.u):Oi(Pi),this.g.onreadystatechange=$t(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(e){return void Zs(this,e)}e=n||"";const s=new is(this.headers);i&&ns(i,(function(e,t){s.set(t,e)})),i=function(e){e:{var t=Ys;const n=e.length,i="string"==typeof e?e.split(""):e;for(let s=0;s<n;s++)if(s in i&&t.call(void 0,i[s],s,e)){t=s;break e}t=-1}return 0>t?null:"string"==typeof e?e.charAt(t):e[t]}(s.T()),n=Pt.FormData&&e instanceof Pt.FormData,!(0<=Gt(Xs,t))||i||n||s.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),s.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{ir(this),0<this.B&&((this.K=function(e){return fn&&Sn()&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=$t(this.pa,this)):this.A=di(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(e){Zs(this,e)}},Rt.pa=function(){void 0!==Lt&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Yn(this,"timeout"),this.abort(8))},Rt.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Yn(this,"complete"),Yn(this,"abort"),nr(this))},Rt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),nr(this,!0)),Gs.Z.M.call(this)},Rt.Fa=function(){this.s||(this.F||this.v||this.l?tr(this):this.cb())},Rt.cb=function(){tr(this)},Rt.ba=function(){try{return 2<sr(this)?this.g.status:-1}catch(e){return-1}},Rt.ga=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},Rt.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Ks(t)}},Rt.Da=function(){return this.m},Rt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Rt=cr.prototype).ma=8,Rt.G=1,Rt.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(e){}},Rt.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;const s=new Bi(this,this.h,e,void 0);let r=this.s;if(this.P&&(r?(r=an(r),ln(r,this.P)):r=this.P),null===this.o&&(s.H=r),this.ja)e:{for(var t=0,n=0;n<this.l.length;n++){var i=this.l[n];if(void 0===(i="__data__"in i.g&&"string"==typeof(i=i.g.__data__)?i.length:void 0))break;if(4096<(t+=i)){t=n;break e}if(4096===t||n===this.l.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=gr(this,s,t),ps(n=cs(this.F),"RID",e),ps(n,"CVER",22),this.D&&ps(n,"X-HTTP-Session-Id",this.D),mr(this,n),this.o&&r&&or(n,this.o,r),Ls(this.i,s),this.Ra&&ps(n,"TYPE","init"),this.ja?(ps(n,"$req",t),ps(n,"SID","null"),s.$=!0,Hi(s,n,null)):Hi(s,n,t),this.G=2}}else 3==this.G&&(e?fr(this,e):0==this.l.length||Rs(this.i)||fr(this))},Rt.Ga=function(){if(this.u=null,wr(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=Ai($t(this.bb,this),e)}},Rt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Ci(10),hr(this),wr(this))},Rt.ab=function(){null!=this.v&&(this.v=null,hr(this),vr(this),Ci(19))},Rt.jb=function(e){e?(this.h.info("Successfully pinged google.com"),Ci(2)):(this.h.info("Failed to ping google.com"),Ci(1))},(Rt=xr.prototype).xa=function(){},Rt.wa=function(){},Rt.va=function(){},Rt.ua=function(){},Rt.Oa=function(){},Ar.prototype.g=function(e,t){return new Nr(e,t)},Ht(Nr,Xn),Nr.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),oi($t(e.hb,e,t))),Ci(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=_r(e,null,e.W),pr(e)},Nr.prototype.close=function(){lr(this.g)},Nr.prototype.u=function(e){if("string"==typeof e){var t={};t.__data__=e,dr(this.g,t)}else this.v?((t={}).__data__=ei(e),dr(this.g,t)):dr(this.g,e)},Nr.prototype.M=function(){this.g.j=null,delete this.j,lr(this.g),delete this.g,Nr.Z.M.call(this)},Ht(Rr,Ui),Ht(Dr,Vi),Ht(Or,xr),Or.prototype.xa=function(){Yn(this.g,"a")},Or.prototype.wa=function(e){Yn(this.g,new Rr(e))},Or.prototype.va=function(e){Yn(this.g,new Dr(e))},Or.prototype.ua=function(){Yn(this.g,"b")},Ar.prototype.createWebChannel=Ar.prototype.g,Nr.prototype.send=Nr.prototype.u,Nr.prototype.open=Nr.prototype.m,Nr.prototype.close=Nr.prototype.close,Ni.NO_ERROR=0,Ni.TIMEOUT=8,Ni.HTTP_ERROR=6,Ri.COMPLETE="complete",Li.EventType=Mi,Mi.OPEN="a",Mi.CLOSE="b",Mi.ERROR="c",Mi.MESSAGE="d",Xn.prototype.listen=Xn.prototype.N,Gs.prototype.listenOnce=Gs.prototype.O,Gs.prototype.getLastError=Gs.prototype.La,Gs.prototype.getLastErrorCode=Gs.prototype.Da,Gs.prototype.getStatus=Gs.prototype.ba,Gs.prototype.getResponseJson=Gs.prototype.Qa,Gs.prototype.getResponseText=Gs.prototype.ga,Gs.prototype.send=Gs.prototype.ea;var Lr=Ot.createWebChannelTransport=function(){return new Ar},Pr=Ot.getStatEventTarget=function(){return Ii()},Mr=Ot.ErrorCode=Ni,Ur=Ot.EventType=Ri,Vr=Ot.Event=ki,Fr=Ot.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Br=Ot.FetchXmlHttpFactory=js,jr=Ot.WebChannel=Li,qr=Ot.XhrIo=Gs;const $r="@firebase/firestore";class zr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}zr.UNAUTHENTICATED=new zr(null),zr.GOOGLE_CREDENTIALS=new zr("google-credentials-uid"),zr.FIRST_PARTY=new zr("first-party-uid"),zr.MOCK_USER=new zr("mock-user");let Hr="9.6.7";const Wr=new pt("@firebase/firestore");function Kr(){return Wr.logLevel}function Gr(e,...t){if(Wr.logLevel<=ct.DEBUG){const n=t.map(Xr);Wr.debug(`Firestore (${Hr}): ${e}`,...n)}}function Qr(e,...t){if(Wr.logLevel<=ct.ERROR){const n=t.map(Xr);Wr.error(`Firestore (${Hr}): ${e}`,...n)}}function Jr(e,...t){if(Wr.logLevel<=ct.WARN){const n=t.map(Xr);Wr.warn(`Firestore (${Hr}): ${e}`,...n)}}function Xr(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Yr(e="Unexpected state"){const t=`FIRESTORE (${Hr}) INTERNAL ASSERTION FAILED: `+e;throw Qr(t),new Error(t)}function Zr(e,t){e||Yr()}function eo(e,t){return e}const to={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class no extends We{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class io{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class so{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ro{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(zr.UNAUTHENTICATED)))}shutdown(){}}class oo{constructor(e){this.t=e,this.currentUser=zr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const i=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let s=new io;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new io,e.enqueueRetryable((()=>i(this.currentUser)))};const r=()=>{const t=s;e.enqueueRetryable((async()=>{await t.promise,await i(this.currentUser)}))},o=e=>{Gr("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),r()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(Gr("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new io)}}),0),r()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Gr("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Zr("string"==typeof t.accessToken),new so(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Zr(null===e||"string"==typeof e),new zr(e)}}class ao{constructor(e,t,n){this.type="FirstParty",this.user=zr.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),n&&this.headers.set("X-Goog-Iam-Authorization-Token",n)}}class co{constructor(e,t,n){this.h=e,this.l=t,this.m=n}getToken(){return Promise.resolve(new ao(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable((()=>t(zr.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class lo{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ho{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const n=e=>{null!=e.error&&Gr("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.p;return this.p=e.token,Gr("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const i=e=>{Gr("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.g.onInit((e=>i(e))),setTimeout((()=>{if(!this.appCheck){const e=this.g.getImmediate({optional:!0});e?i(e):Gr("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Zr("string"==typeof e.token),this.p=e.token,new lo(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class uo{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.I(e),this.T=e=>t.writeSequenceNumber(e))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function po(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let t=0;t<e;t++)n[t]=Math.floor(256*Math.random());return n}uo.A=-1;class fo{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const i=po(40);for(let s=0;s<i.length;++s)n.length<20&&i[s]<t&&(n+=e.charAt(i[s]%e.length))}return n}}function mo(e,t){return e<t?-1:e>t?1:0}function go(e,t,n){return e.length===t.length&&e.every(((e,i)=>n(e,t[i])))}class yo{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new no(to.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new no(to.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new no(to.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new no(to.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return yo.fromMillis(Date.now())}static fromDate(e){return yo.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new yo(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?mo(this.nanoseconds,e.nanoseconds):mo(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class vo{constructor(e){this.timestamp=e}static fromTimestamp(e){return new vo(e)}static min(){return new vo(new yo(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function bo(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function wo(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function ko(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Eo{constructor(e,t,n){void 0===t?t=0:t>e.length&&Yr(),void 0===n?n=e.length-t:n>e.length-t&&Yr(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Eo.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Eo?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const n=e.get(i),s=t.get(i);if(n<s)return-1;if(n>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Io extends Eo{construct(e,t,n){return new Io(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new no(to.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((e=>e.length>0)))}return new Io(t)}static emptyPath(){return new Io([])}}const To=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class So extends Eo{construct(e,t,n){return new So(e,t,n)}static isValidIdentifier(e){return To.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),So.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new So(["__name__"])}static fromServerFormat(e){const t=[];let n="",i=0;const s=()=>{if(0===n.length)throw new no(to.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let r=!1;for(;i<e.length;){const t=e[i];if("\\"===t){if(i+1===e.length)throw new no(to.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[i+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new no(to.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,i+=2}else"`"===t?(r=!r,i++):"."!==t||r?(n+=t,i++):(s(),i++)}if(s(),r)throw new no(to.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new So(t)}static emptyPath(){return new So([])}}class _o{constructor(e){this.fields=e,e.sort(So.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return go(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class Co{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Co(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Co(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return mo(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Co.EMPTY_BYTE_STRING=new Co("");const xo=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ao(e){if(Zr(!!e),"string"==typeof e){let t=0;const n=xo.exec(e);if(Zr(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:No(e.seconds),nanos:No(e.nanos)}}function No(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Ro(e){return"string"==typeof e?Co.fromBase64String(e):Co.fromUint8Array(e)}function Do(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Oo(e){const t=e.mapValue.fields.__previous_value__;return Do(t)?Oo(t):t}function Lo(e){const t=Ao(e.mapValue.fields.__local_write_time__.timestampValue);return new yo(t.seconds,t.nanos)}class Po{constructor(e,t,n,i,s,r,o,a){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=i,this.ssl=s,this.forceLongPolling=r,this.autoDetectLongPolling=o,this.useFetchStreams=a}}class Mo{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Mo("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Mo&&e.projectId===this.projectId&&e.database===this.database}}function Uo(e){return null==e}function Vo(e){return 0===e&&1/e==-1/0}function Fo(e){return"number"==typeof e&&Number.isInteger(e)&&!Vo(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}class Bo{constructor(e){this.path=e}static fromPath(e){return new Bo(Io.fromString(e))}static fromName(e){return new Bo(Io.fromString(e).popFirst(5))}static empty(){return new Bo(Io.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Io.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Io.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Bo(new Io(e.slice()))}}const jo={mapValue:{fields:{__type__:{stringValue:"__max___"}}}};function qo(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Do(e)?4:10:Yr()}function $o(e,t){if(e===t)return!0;const n=qo(e);if(n!==qo(t))return!1;switch(n){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Lo(e).isEqual(Lo(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Ao(e.timestampValue),i=Ao(t.timestampValue);return n.seconds===i.seconds&&n.nanos===i.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Ro(e.bytesValue).isEqual(Ro(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return No(e.geoPointValue.latitude)===No(t.geoPointValue.latitude)&&No(e.geoPointValue.longitude)===No(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return No(e.integerValue)===No(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=No(e.doubleValue),i=No(t.doubleValue);return n===i?Vo(n)===Vo(i):isNaN(n)&&isNaN(i)}return!1}(e,t);case 9:return go(e.arrayValue.values||[],t.arrayValue.values||[],$o);case 10:return function(e,t){const n=e.mapValue.fields||{},i=t.mapValue.fields||{};if(bo(n)!==bo(i))return!1;for(const e in n)if(n.hasOwnProperty(e)&&(void 0===i[e]||!$o(n[e],i[e])))return!1;return!0}(e,t);default:return Yr()}}function zo(e,t){return void 0!==(e.values||[]).find((e=>$o(e,t)))}function Ho(e,t){if(e===t)return 0;const n=qo(e),i=qo(t);if(n!==i)return mo(n,i);switch(n){case 0:return 0;case 1:return mo(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=No(e.integerValue||e.doubleValue),i=No(t.integerValue||t.doubleValue);return n<i?-1:n>i?1:n===i?0:isNaN(n)?isNaN(i)?0:-1:1}(e,t);case 3:return Wo(e.timestampValue,t.timestampValue);case 4:return Wo(Lo(e),Lo(t));case 5:return mo(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Ro(e),i=Ro(t);return n.compareTo(i)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),i=t.split("/");for(let e=0;e<n.length&&e<i.length;e++){const t=mo(n[e],i[e]);if(0!==t)return t}return mo(n.length,i.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=mo(No(e.latitude),No(t.latitude));return 0!==n?n:mo(No(e.longitude),No(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],i=t.values||[];for(let e=0;e<n.length&&e<i.length;++e){const t=Ho(n[e],i[e]);if(t)return t}return mo(n.length,i.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){const n=e.fields||{},i=Object.keys(n),s=t.fields||{},r=Object.keys(s);i.sort(),r.sort();for(let e=0;e<i.length&&e<r.length;++e){const t=mo(i[e],r[e]);if(0!==t)return t;const o=Ho(n[i[e]],s[r[e]]);if(0!==o)return o}return mo(i.length,r.length)}(e.mapValue,t.mapValue);default:throw Yr()}}function Wo(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return mo(e,t);const n=Ao(e),i=Ao(t),s=mo(n.seconds,i.seconds);return 0!==s?s:mo(n.nanos,i.nanos)}function Ko(e){return Go(e)}function Go(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Ao(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Ro(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Bo.fromName(n).toString()):"geoPointValue"in e?`geo(${(t=e.geoPointValue).latitude},${t.longitude})`:"arrayValue"in e?function(e){let t="[",n=!0;for(const i of e.values||[])n?n=!1:t+=",",t+=Go(i);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",i=!0;for(const s of t)i?i=!1:n+=",",n+=`${s}:${Go(e.fields[s])}`;return n+"}"}(e.mapValue):Yr();var t,n}function Qo(e){return!!e&&"integerValue"in e}function Jo(e){return!!e&&"arrayValue"in e}function Xo(e){return!!e&&"nullValue"in e}function Yo(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Zo(e){return!!e&&"mapValue"in e}function ea(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return wo(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=ea(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=ea(e.arrayValue.values[n]);return t}return Object.assign({},e)}class ta{constructor(e){this.value=e}static empty(){return new ta({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Zo(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ea(t)}setAll(e){let t=So.emptyPath(),n={},i=[];e.forEach(((e,s)=>{if(!t.isImmediateParentOf(s)){const e=this.getFieldsMap(t);this.applyChanges(e,n,i),n={},i=[],t=s.popLast()}e?n[s.lastSegment()]=ea(e):i.push(s.lastSegment())}));const s=this.getFieldsMap(t);this.applyChanges(s,n,i)}delete(e){const t=this.field(e.popLast());Zo(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return $o(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=t.mapValue.fields[e.get(n)];Zo(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,n){wo(t,((t,n)=>e[t]=n));for(const t of n)delete e[t]}clone(){return new ta(ea(this.value))}}function na(e){const t=[];return wo(e.fields,((e,n)=>{const i=new So([e]);if(Zo(n)){const e=na(n.mapValue).fields;if(0===e.length)t.push(i);else for(const n of e)t.push(i.child(n))}else t.push(i)})),new _o(t)}class ia{constructor(e,t,n,i,s,r){this.key=e,this.documentType=t,this.version=n,this.readTime=i,this.data=s,this.documentState=r}static newInvalidDocument(e){return new ia(e,0,vo.min(),vo.min(),ta.empty(),0)}static newFoundDocument(e,t,n){return new ia(e,1,t,vo.min(),n,0)}static newNoDocument(e,t){return new ia(e,2,t,vo.min(),ta.empty(),0)}static newUnknownDocument(e,t){return new ia(e,3,t,vo.min(),ta.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ta.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ta.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ia&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ia(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class sa{constructor(e,t,n,i){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=i}}sa.UNKNOWN_ID=-1;class ra{constructor(e,t=null,n=[],i=[],s=null,r=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=i,this.limit=s,this.startAt=r,this.endAt=o,this.P=null}}function oa(e,t=null,n=[],i=[],s=null,r=null,o=null){return new ra(e,t,n,i,s,r,o)}function aa(e){const t=eo(e);if(null===t.P){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>{return(t=e).field.canonicalString()+t.op.toString()+Ko(t.value);var t})).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),Uo(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Ko(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Ko(e))).join(",")),t.P=e}return t.P}function ca(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!ka(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let s=0;s<e.filters.length;s++)if(n=e.filters[s],i=t.filters[s],n.op!==i.op||!n.field.isEqual(i.field)||!$o(n.value,i.value))return!1;var n,i;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Ia(e.startAt,t.startAt)&&Ia(e.endAt,t.endAt)}function la(e){return Bo.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class ha extends class{}{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.v(e,t,n):new ua(e,t,n):"array-contains"===t?new ma(e,n):"in"===t?new ga(e,n):"not-in"===t?new ya(e,n):"array-contains-any"===t?new va(e,n):new ha(e,t,n)}static v(e,t,n){return"in"===t?new da(e,n):new pa(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.V(Ho(t,this.value)):null!==t&&qo(this.value)===qo(t)&&this.V(Ho(t,this.value))}V(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Yr()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class ua extends ha{constructor(e,t,n){super(e,t,n),this.key=Bo.fromName(n.referenceValue)}matches(e){const t=Bo.comparator(e.key,this.key);return this.V(t)}}class da extends ha{constructor(e,t){super(e,"in",t),this.keys=fa("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class pa extends ha{constructor(e,t){super(e,"not-in",t),this.keys=fa("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function fa(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>Bo.fromName(e.referenceValue)))}class ma extends ha{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Jo(t)&&zo(t.arrayValue,this.value)}}class ga extends ha{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&zo(this.value.arrayValue,t)}}class ya extends ha{constructor(e,t){super(e,"not-in",t)}matches(e){if(zo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!zo(this.value.arrayValue,t)}}class va extends ha{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Jo(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>zo(this.value.arrayValue,e)))}}class ba{constructor(e,t){this.position=e,this.inclusive=t}}class wa{constructor(e,t="asc"){this.field=e,this.dir=t}}function ka(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function Ea(e,t,n){let i=0;for(let s=0;s<e.position.length;s++){const r=t[s],o=e.position[s];if(i=r.field.isKeyField()?Bo.comparator(Bo.fromName(o.referenceValue),n.key):Ho(o,n.data.field(r.field)),"desc"===r.dir&&(i*=-1),0!==i)break}return i}function Ia(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!$o(e.position[n],t.position[n]))return!1;return!0}class Ta{constructor(e,t=null,n=[],i=[],s=null,r="F",o=null,a=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=i,this.limit=s,this.limitType=r,this.startAt=o,this.endAt=a,this.D=null,this.C=null,this.startAt,this.endAt}}function Sa(e,t,n,i,s,r,o,a){return new Ta(e,t,n,i,s,r,o,a)}function _a(e){return new Ta(e)}function Ca(e){return!Uo(e.limit)&&"F"===e.limitType}function xa(e){return!Uo(e.limit)&&"L"===e.limitType}function Aa(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Na(e){for(const t of e.filters)if(t.S())return t.field;return null}function Ra(e){return null!==e.collectionGroup}function Da(e){const t=eo(e);if(null===t.D){t.D=[];const e=Na(t),n=Aa(t);if(null!==e&&null===n)e.isKeyField()||t.D.push(new wa(e)),t.D.push(new wa(So.keyField(),"asc"));else{let e=!1;for(const n of t.explicitOrderBy)t.D.push(n),n.field.isKeyField()&&(e=!0);if(!e){const e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.D.push(new wa(So.keyField(),e))}}}return t.D}function Oa(e){const t=eo(e);if(!t.C)if("F"===t.limitType)t.C=oa(t.path,t.collectionGroup,Da(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const n of Da(t)){const t="desc"===n.dir?"asc":"desc";e.push(new wa(n.field,t))}const n=t.endAt?new ba(t.endAt.position,!t.endAt.inclusive):null,i=t.startAt?new ba(t.startAt.position,!t.startAt.inclusive):null;t.C=oa(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}return t.C}function La(e,t,n){return new Ta(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Pa(e,t){return ca(Oa(e),Oa(t))&&e.limitType===t.limitType}function Ma(e){return`${aa(Oa(e))}|lt:${e.limitType}`}function Ua(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>{return`${(t=e).field.canonicalString()} ${t.op} ${Ko(t.value)}`;var t})).join(", ")}]`),Uo(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Ko(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Ko(e))).join(",")),`Target(${t})`}(Oa(e))}; limitType=${e.limitType})`}function Va(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Bo.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of e.explicitOrderBy)if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const i=Ea(e,t,n);return e.inclusive?i<=0:i<0}(e.startAt,Da(e),t))&&!(e.endAt&&!function(e,t,n){const i=Ea(e,t,n);return e.inclusive?i>=0:i>0}(e.endAt,Da(e),t))}(e,t)}function Fa(e){return(t,n)=>{let i=!1;for(const s of Da(e)){const e=Ba(s,t,n);if(0!==e)return e;i=i||s.field.isKeyField()}return 0}}function Ba(e,t,n){const i=e.field.isKeyField()?Bo.comparator(t.key,n.key):function(e,t,n){const i=t.data.field(e),s=n.data.field(e);return null!==i&&null!==s?Ho(i,s):Yr()}(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return Yr()}}function ja(e,t){if(e.N){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Vo(t)?"-0":t}}function qa(e){return{integerValue:""+e}}function $a(e,t){return Fo(t)?qa(t):ja(e,t)}class za{constructor(){this._=void 0}}function Ha(e,t,n){return e instanceof Ga?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Qa?Ja(e,t):e instanceof Xa?Ya(e,t):function(e,t){const n=Ka(e,t),i=ec(n)+ec(e.k);return Qo(n)&&Qo(e.k)?qa(i):ja(e.O,i)}(e,t)}function Wa(e,t,n){return e instanceof Qa?Ja(e,t):e instanceof Xa?Ya(e,t):n}function Ka(e,t){return e instanceof Za?Qo(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}class Ga extends za{}class Qa extends za{constructor(e){super(),this.elements=e}}function Ja(e,t){const n=tc(t);for(const t of e.elements)n.some((e=>$o(e,t)))||n.push(t);return{arrayValue:{values:n}}}class Xa extends za{constructor(e){super(),this.elements=e}}function Ya(e,t){let n=tc(t);for(const t of e.elements)n=n.filter((e=>!$o(e,t)));return{arrayValue:{values:n}}}class Za extends za{constructor(e,t){super(),this.O=e,this.k=t}}function ec(e){return No(e.integerValue||e.doubleValue)}function tc(e){return Jo(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class nc{constructor(e,t){this.version=e,this.transformResults=t}}class ic{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ic}static exists(e){return new ic(void 0,e)}static updateTime(e){return new ic(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function sc(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class rc{}function oc(e,t,n){e instanceof uc?function(e,t,n){const i=e.value.clone(),s=fc(e.fieldTransforms,t,n.transformResults);i.setAll(s),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):e instanceof dc?function(e,t,n){if(!sc(e.precondition,t))return void t.convertToUnknownDocument(n.version);const i=fc(e.fieldTransforms,t,n.transformResults),s=t.data;s.setAll(pc(e)),s.setAll(i),t.convertToFoundDocument(n.version,s).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function ac(e,t,n){e instanceof uc?function(e,t,n){if(!sc(e.precondition,t))return;const i=e.value.clone(),s=mc(e.fieldTransforms,n,t);i.setAll(s),t.convertToFoundDocument(hc(t),i).setHasLocalMutations()}(e,t,n):e instanceof dc?function(e,t,n){if(!sc(e.precondition,t))return;const i=mc(e.fieldTransforms,n,t),s=t.data;s.setAll(pc(e)),s.setAll(i),t.convertToFoundDocument(hc(t),s).setHasLocalMutations()}(e,t,n):function(e,t){sc(e.precondition,t)&&t.convertToNoDocument(vo.min())}(e,t)}function cc(e,t){let n=null;for(const i of e.fieldTransforms){const e=t.data.field(i.field),s=Ka(i.transform,e||null);null!=s&&(null==n&&(n=ta.empty()),n.set(i.field,s))}return n||null}function lc(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&go(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Qa&&t instanceof Qa||e instanceof Xa&&t instanceof Xa?go(e.elements,t.elements,$o):e instanceof Za&&t instanceof Za?$o(e.k,t.k):e instanceof Ga&&t instanceof Ga}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function hc(e){return e.isFoundDocument()?e.version:vo.min()}class uc extends rc{constructor(e,t,n,i=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=i,this.type=0}}class dc extends rc{constructor(e,t,n,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=i,this.fieldTransforms=s,this.type=1}}function pc(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=e.data.field(n);t.set(n,i)}})),t}function fc(e,t,n){const i=new Map;Zr(e.length===n.length);for(let s=0;s<n.length;s++){const r=e[s],o=r.transform,a=t.data.field(r.field);i.set(r.field,Wa(o,a,n[s]))}return i}function mc(e,t,n){const i=new Map;for(const s of e){const e=s.transform,r=n.data.field(s.field);i.set(s.field,Ha(e,r,t))}return i}class gc extends rc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class yc extends rc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class vc{constructor(e){this.count=e}}var bc,wc;function kc(e){switch(e){default:return Yr();case to.CANCELLED:case to.UNKNOWN:case to.DEADLINE_EXCEEDED:case to.RESOURCE_EXHAUSTED:case to.INTERNAL:case to.UNAVAILABLE:case to.UNAUTHENTICATED:return!1;case to.INVALID_ARGUMENT:case to.NOT_FOUND:case to.ALREADY_EXISTS:case to.PERMISSION_DENIED:case to.FAILED_PRECONDITION:case to.ABORTED:case to.OUT_OF_RANGE:case to.UNIMPLEMENTED:case to.DATA_LOSS:return!0}}function Ec(e){if(void 0===e)return Qr("GRPC error has no .code"),to.UNKNOWN;switch(e){case bc.OK:return to.OK;case bc.CANCELLED:return to.CANCELLED;case bc.UNKNOWN:return to.UNKNOWN;case bc.DEADLINE_EXCEEDED:return to.DEADLINE_EXCEEDED;case bc.RESOURCE_EXHAUSTED:return to.RESOURCE_EXHAUSTED;case bc.INTERNAL:return to.INTERNAL;case bc.UNAVAILABLE:return to.UNAVAILABLE;case bc.UNAUTHENTICATED:return to.UNAUTHENTICATED;case bc.INVALID_ARGUMENT:return to.INVALID_ARGUMENT;case bc.NOT_FOUND:return to.NOT_FOUND;case bc.ALREADY_EXISTS:return to.ALREADY_EXISTS;case bc.PERMISSION_DENIED:return to.PERMISSION_DENIED;case bc.FAILED_PRECONDITION:return to.FAILED_PRECONDITION;case bc.ABORTED:return to.ABORTED;case bc.OUT_OF_RANGE:return to.OUT_OF_RANGE;case bc.UNIMPLEMENTED:return to.UNIMPLEMENTED;case bc.DATA_LOSS:return to.DATA_LOSS;default:return Yr()}}(wc=bc||(bc={}))[wc.OK=0]="OK",wc[wc.CANCELLED=1]="CANCELLED",wc[wc.UNKNOWN=2]="UNKNOWN",wc[wc.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",wc[wc.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",wc[wc.NOT_FOUND=5]="NOT_FOUND",wc[wc.ALREADY_EXISTS=6]="ALREADY_EXISTS",wc[wc.PERMISSION_DENIED=7]="PERMISSION_DENIED",wc[wc.UNAUTHENTICATED=16]="UNAUTHENTICATED",wc[wc.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",wc[wc.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",wc[wc.ABORTED=10]="ABORTED",wc[wc.OUT_OF_RANGE=11]="OUT_OF_RANGE",wc[wc.UNIMPLEMENTED=12]="UNIMPLEMENTED",wc[wc.INTERNAL=13]="INTERNAL",wc[wc.UNAVAILABLE=14]="UNAVAILABLE",wc[wc.DATA_LOSS=15]="DATA_LOSS";class Ic{constructor(e,t){this.comparator=e,this.root=t||Sc.EMPTY}insert(e,t){return new Ic(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Sc.BLACK,null,null))}remove(e){return new Ic(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Sc.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(0===i)return t+n.left.size;i<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Tc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Tc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Tc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Tc(this.root,e,this.comparator,!0)}}class Tc{constructor(e,t,n,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Sc{constructor(e,t,n,i,s){this.key=e,this.value=t,this.color=null!=n?n:Sc.RED,this.left=null!=i?i:Sc.EMPTY,this.right=null!=s?s:Sc.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,i,s){return new Sc(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let i=this;const s=n(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,n),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Sc.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Sc.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Sc.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Sc.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Yr();if(this.right.isRed())throw Yr();const e=this.left.check();if(e!==this.right.check())throw Yr();return e+(this.isRed()?0:1)}}Sc.EMPTY=null,Sc.RED=!0,Sc.BLACK=!1,Sc.EMPTY=new class{constructor(){this.size=0}get key(){throw Yr()}get value(){throw Yr()}get color(){throw Yr()}get left(){throw Yr()}get right(){throw Yr()}copy(e,t,n,i,s){return this}insert(e,t,n){return new Sc(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class _c{constructor(e){this.comparator=e,this.data=new Ic(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Cc(this.data.getIterator())}getIteratorFrom(e){return new Cc(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof _c))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,i=n.getNext().key;if(0!==this.comparator(e,i))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new _c(this.comparator);return t.data=e,t}}class Cc{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const xc=new Ic(Bo.comparator);function Ac(){return xc}const Nc=new Ic(Bo.comparator);function Rc(){return Nc}const Dc=new Ic(Bo.comparator),Oc=new _c(Bo.comparator);function Lc(...e){let t=Oc;for(const n of e)t=t.add(n);return t}const Pc=new _c(mo);function Mc(){return Pc}class Uc{constructor(e,t,n,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t){const n=new Map;return n.set(e,Vc.createSynthesizedTargetChangeForCurrentChange(e,t)),new Uc(vo.min(),n,Mc(),Ac(),Lc())}}class Vc{constructor(e,t,n,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Vc(Co.EMPTY_BYTE_STRING,t,Lc(),Lc(),Lc())}}class Fc{constructor(e,t,n,i){this.M=e,this.removedTargetIds=t,this.key=n,this.$=i}}class Bc{constructor(e,t){this.targetId=e,this.F=t}}class jc{constructor(e,t,n=Co.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=i}}class qc{constructor(){this.B=0,this.L=Hc(),this.U=Co.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=Lc(),t=Lc(),n=Lc();return this.L.forEach(((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:n=n.add(i);break;default:Yr()}})),new Vc(this.U,this.q,e,t,n)}J(){this.K=!1,this.L=Hc()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class $c{constructor(e){this.nt=e,this.st=new Map,this.it=Ac(),this.rt=zc(),this.ot=new _c(mo)}ct(e){for(const t of e.M)e.$&&e.$.isFoundDocument()?this.ut(t,e.$):this.at(t,e.key,e.$);for(const t of e.removedTargetIds)this.at(t,e.key,e.$)}ht(e){this.forEachTarget(e,(t=>{const n=this.lt(t);switch(e.state){case 0:this.ft(t)&&n.W(e.resumeToken);break;case 1:n.tt(),n.G||n.J(),n.W(e.resumeToken);break;case 2:n.tt(),n.G||this.removeTarget(t);break;case 3:this.ft(t)&&(n.et(),n.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),n.W(e.resumeToken));break;default:Yr()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach(((e,n)=>{this.ft(n)&&t(n)}))}_t(e){const t=e.targetId,n=e.F.count,i=this.wt(t);if(i){const e=i.target;if(la(e))if(0===n){const n=new Bo(e.path);this.at(t,n,ia.newNoDocument(n,vo.min()))}else Zr(1===n);else this.gt(t)!==n&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach(((n,i)=>{const s=this.wt(i);if(s){if(n.current&&la(s.target)){const t=new Bo(s.target.path);null!==this.it.get(t)||this.It(i,t)||this.at(i,t,ia.newNoDocument(t,e))}n.j&&(t.set(i,n.H()),n.J())}}));let n=Lc();this.rt.forEach(((e,t)=>{let i=!0;t.forEachWhile((e=>{const t=this.wt(e);return!t||2===t.purpose||(i=!1,!1)})),i&&(n=n.add(e))})),this.it.forEach(((t,n)=>n.setReadTime(e)));const i=new Uc(e,t,this.ot,this.it,n);return this.it=Ac(),this.rt=zc(),this.ot=new _c(mo),i}ut(e,t){if(!this.ft(e))return;const n=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,n),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Et(t.key).add(e))}at(e,t,n){if(!this.ft(e))return;const i=this.lt(e);this.It(e,t)?i.Y(t,1):i.X(t),this.rt=this.rt.insert(t,this.Et(t).delete(e)),n&&(this.it=this.it.insert(t,n))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new qc,this.st.set(e,t)),t}Et(e){let t=this.rt.get(e);return t||(t=new _c(mo),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Gr("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Tt(e)}dt(e){this.st.set(e,new qc),this.nt.getRemoteKeysForTarget(e).forEach((t=>{this.at(e,t,null)}))}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function zc(){return new Ic(Bo.comparator)}function Hc(){return new Ic(Bo.comparator)}const Wc={asc:"ASCENDING",desc:"DESCENDING"},Kc={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Gc{constructor(e,t){this.databaseId=e,this.N=t}}function Qc(e,t){return e.N?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Jc(e,t){return e.N?t.toBase64():t.toUint8Array()}function Xc(e,t){return Qc(e,t.toTimestamp())}function Yc(e){return Zr(!!e),vo.fromTimestamp(function(e){const t=Ao(e);return new yo(t.seconds,t.nanos)}(e))}function Zc(e,t){return function(e){return new Io(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function el(e){const t=Io.fromString(e);return Zr(wl(t)),t}function tl(e,t){return Zc(e.databaseId,t.path)}function nl(e,t){const n=el(t);if(n.get(1)!==e.databaseId.projectId)throw new no(to.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new no(to.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Bo(ol(n))}function il(e,t){return Zc(e.databaseId,t)}function sl(e){const t=el(e);return 4===t.length?Io.emptyPath():ol(t)}function rl(e){return new Io(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function ol(e){return Zr(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function al(e,t,n){return{name:tl(e,t),fields:n.value.mapValue.fields}}function cl(e,t){let n;if(t instanceof uc)n={update:al(e,t.key,t.value)};else if(t instanceof gc)n={delete:tl(e,t.key)};else if(t instanceof dc)n={update:al(e,t.key,t.data),updateMask:bl(t.fieldMask)};else{if(!(t instanceof yc))return Yr();n={verify:tl(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof Ga)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Qa)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Xa)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Za)return{fieldPath:t.field.canonicalString(),increment:n.k};throw Yr()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Xc(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Yr()}(e,t.precondition)),n}function ll(e,t){return{documents:[il(e,t.path)]}}function hl(e,t){const n={structuredQuery:{}},i=t.path;null!==t.collectionGroup?(n.parent=il(e,i),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=il(e,i.popLast()),n.structuredQuery.from=[{collectionId:i.lastSegment()}]);const s=function(e){if(0===e.length)return;const t=e.map((e=>function(e){if("=="===e.op){if(Yo(e.value))return{unaryFilter:{field:ml(e.field),op:"IS_NAN"}};if(Xo(e.value))return{unaryFilter:{field:ml(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Yo(e.value))return{unaryFilter:{field:ml(e.field),op:"IS_NOT_NAN"}};if(Xo(e.value))return{unaryFilter:{field:ml(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ml(e.field),op:fl(e.op),value:e.value}}}(e)));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}(t.filters);s&&(n.structuredQuery.where=s);const r=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:ml(e.field),direction:pl(e.dir)}}(e)))}(t.orderBy);r&&(n.structuredQuery.orderBy=r);const o=function(e,t){return e.N||Uo(t)?t:{value:t}}(e,t.limit);var a;return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt={before:(a=t.startAt).inclusive,values:a.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function ul(e){let t=sl(e.parent);const n=e.structuredQuery,i=n.from?n.from.length:0;let s=null;if(i>0){Zr(1===i);const e=n.from[0];e.allDescendants?s=e.collectionId:t=t.child(e.collectionId)}let r=[];n.where&&(r=dl(n.where));let o=[];n.orderBy&&(o=n.orderBy.map((e=>function(e){return new wa(gl(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Uo(t)?null:t}(n.limit));let c=null;n.startAt&&(c=function(e){const t=!!e.before,n=e.values||[];return new ba(n,t)}(n.startAt));let l=null;return n.endAt&&(l=function(e){const t=!e.before,n=e.values||[];return new ba(n,t)}(n.endAt)),Sa(t,s,o,r,a,"F",c,l)}function dl(e){return e?void 0!==e.unaryFilter?[vl(e)]:void 0!==e.fieldFilter?[yl(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((e=>dl(e))).reduce(((e,t)=>e.concat(t))):Yr():[]}function pl(e){return Wc[e]}function fl(e){return Kc[e]}function ml(e){return{fieldPath:e.canonicalString()}}function gl(e){return So.fromServerFormat(e.fieldPath)}function yl(e){return ha.create(gl(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Yr()}}(e.fieldFilter.op),e.fieldFilter.value)}function vl(e){switch(e.unaryFilter.op){case"IS_NAN":const t=gl(e.unaryFilter.field);return ha.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=gl(e.unaryFilter.field);return ha.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=gl(e.unaryFilter.field);return ha.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=gl(e.unaryFilter.field);return ha.create(s,"!=",{nullValue:"NULL_VALUE"});default:return Yr()}}function bl(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function wl(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function kl(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Il(t)),t=El(e.get(n),t);return Il(t)}function El(e,t){let n=t;const i=e.length;for(let t=0;t<i;t++){const i=e.charAt(t);switch(i){case"\0":n+="";break;case"":n+="";break;default:n+=i}}return n}function Il(e){return e+""}class Tl{constructor(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n}}Tl.store="owner",Tl.key="owner";class Sl{constructor(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n}}Sl.store="mutationQueues",Sl.keyPath="userId";class _l{constructor(e,t,n,i,s){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=i,this.mutations=s}}_l.store="mutations",_l.keyPath="batchId",_l.userMutationsIndex="userMutationsIndex",_l.userMutationsKeyPath=["userId","batchId"];class Cl{constructor(){}static prefixForUser(e){return[e]}static prefixForPath(e,t){return[e,kl(t)]}static key(e,t,n){return[e,kl(t),n]}}Cl.store="documentMutations",Cl.PLACEHOLDER=new Cl;class xl{constructor(e,t,n,i,s,r){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=i,this.readTime=s,this.parentPath=r}}xl.store="remoteDocuments",xl.readTimeIndex="readTimeIndex",xl.readTimeIndexPath="readTime",xl.collectionReadTimeIndex="collectionReadTimeIndex",xl.collectionReadTimeIndexPath=["parentPath","readTime"];class Al{constructor(e){this.byteSize=e}}Al.store="remoteDocumentGlobal",Al.key="remoteDocumentGlobalKey";class Nl{constructor(e,t,n,i,s,r,o){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=i,this.lastListenSequenceNumber=s,this.lastLimboFreeSnapshotVersion=r,this.query=o}}Nl.store="targets",Nl.keyPath="targetId",Nl.queryTargetsIndexName="queryTargetsIndex",Nl.queryTargetsKeyPath=["canonicalId","targetId"];class Rl{constructor(e,t,n){this.targetId=e,this.path=t,this.sequenceNumber=n}}Rl.store="targetDocuments",Rl.keyPath=["targetId","path"],Rl.documentTargetsIndex="documentTargetsIndex",Rl.documentTargetsKeyPath=["path","targetId"];class Dl{constructor(e,t,n,i){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=i}}Dl.key="targetGlobalKey",Dl.store="targetGlobal";class Ol{constructor(e,t){this.collectionId=e,this.parent=t}}Ol.store="collectionParents",Ol.keyPath=["collectionId","parent"];class Ll{constructor(e,t,n,i){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=i}}Ll.store="clientMetadata",Ll.keyPath="clientId";class Pl{constructor(e,t,n){this.bundleId=e,this.createTime=t,this.version=n}}Pl.store="bundles",Pl.keyPath="bundleId";class Ml{constructor(e,t,n){this.name=e,this.readTime=t,this.bundledQuery=n}}Ml.store="namedQueries",Ml.keyPath="name";class Ul{constructor(e,t,n){this.indexId=e,this.collectionGroup=t,this.fields=n}}Ul.store="indexConfiguration",Ul.keyPath="indexId",Ul.collectionGroupIndex="collectionGroupIndex",Ul.collectionGroupIndexPath="collectionGroup";class Vl{constructor(e,t,n,i,s,r){this.indexId=e,this.uid=t,this.sequenceNumber=n,this.readTime=i,this.documentKey=s,this.largestBatchId=r}}Vl.store="indexState",Vl.keyPath=["indexId","uid"],Vl.sequenceNumberIndex="sequenceNumberIndex",Vl.sequenceNumberIndexPath=["uid","sequenceNumber"];class Fl{constructor(e,t,n,i,s){this.indexId=e,this.uid=t,this.arrayValue=n,this.directionalValue=i,this.documentKey=s}}Fl.store="indexEntries",Fl.keyPath=["indexId","uid","arrayValue","directionalValue","documentKey"],Fl.documentKeyIndex="documentKeyIndex",Fl.documentKeyIndexPath=["indexId","uid","documentKey"];class Bl{constructor(e,t,n,i,s,r){this.userId=e,this.collectionPath=t,this.documentId=n,this.collectionGroup=i,this.largestBatchId=s,this.overlayMutation=r}}Bl.store="documentOverlays",Bl.keyPath=["userId","collectionPath","documentId"],Bl.collectionPathOverlayIndex="collectionPathOverlayIndex",Bl.collectionPathOverlayIndexPath=["userId","collectionPath","largestBatchId"],Bl.collectionGroupOverlayIndex="collectionGroupOverlayIndex",Bl.collectionGroupOverlayIndexPath=["userId","collectionGroup","largestBatchId"];const jl=[Sl.store,_l.store,Cl.store,xl.store,Nl.store,Tl.store,Dl.store,Rl.store,Ll.store,Al.store,Ol.store,Pl.store,Ml.store],ql=[...jl,Bl.store],$l=(Ul.store,Vl.store,Fl.store,"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.");class zl{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}class Hl{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Yr(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Hl(((n,i)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,i)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Hl?t:Hl.resolve(t)}catch(e){return Hl.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Hl.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Hl.reject(t)}static resolve(e){return new Hl(((t,n)=>{t(e)}))}static reject(e){return new Hl(((t,n)=>{n(e)}))}static waitFor(e){return new Hl(((t,n)=>{let i=0,s=0,r=!1;e.forEach((e=>{++i,e.next((()=>{++s,r&&s===i&&t()}),(e=>n(e)))})),r=!0,s===i&&t()}))}static or(e){let t=Hl.resolve(!1);for(const n of e)t=t.next((e=>e?Hl.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,i)=>{n.push(t.call(this,e,i))})),this.waitFor(n)}}function Wl(e){return"IndexedDbTransactionError"===e.name}class Kl{constructor(e,t,n,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let t=0;t<this.mutations.length;t++){const i=this.mutations[t];i.key.isEqual(e.key)&&oc(i,e,n[t])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&ac(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&ac(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach((t=>{const n=e.get(t.key),i=n;this.applyToLocalView(i),n.isValidDocument()||i.convertToNoDocument(vo.min())}))}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Lc())}isEqual(e){return this.batchId===e.batchId&&go(this.mutations,e.mutations,((e,t)=>lc(e,t)))&&go(this.baseMutations,e.baseMutations,((e,t)=>lc(e,t)))}}class Gl{constructor(e,t,n,i){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=i}static from(e,t,n){Zr(e.mutations.length===n.length);let i=Dc;const s=e.mutations;for(let e=0;e<s.length;e++)i=i.insert(s[e].key,n[e].version);return new Gl(e,t,n,i)}}class Ql{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Jl{constructor(e,t,n,i,s=vo.min(),r=vo.min(),o=Co.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=r,this.resumeToken=o}withSequenceNumber(e){return new Jl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Jl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Jl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Xl{constructor(e){this.Ht=e}}function Yl(e){const t=ul({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?La(t,t.limit,"L"):t}class Zl{constructor(){}Xt(e,t){this.Zt(e,t),t.te()}Zt(e,t){if("nullValue"in e)this.ee(t,5);else if("booleanValue"in e)this.ee(t,10),t.ne(e.booleanValue?1:0);else if("integerValue"in e)this.ee(t,15),t.ne(No(e.integerValue));else if("doubleValue"in e){const n=No(e.doubleValue);isNaN(n)?this.ee(t,13):(this.ee(t,15),Vo(n)?t.ne(0):t.ne(n))}else if("timestampValue"in e){const n=e.timestampValue;this.ee(t,20),"string"==typeof n?t.se(n):(t.se(`${n.seconds||""}`),t.ne(n.nanos||0))}else if("stringValue"in e)this.ie(e.stringValue,t),this.re(t);else if("bytesValue"in e)this.ee(t,30),t.oe(Ro(e.bytesValue)),this.re(t);else if("referenceValue"in e)this.ce(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.ee(t,45),t.ne(n.latitude||0),t.ne(n.longitude||0)}else"mapValue"in e?$o(e,jo)?this.ee(t,Number.MAX_SAFE_INTEGER):(this.ue(e.mapValue,t),this.re(t)):"arrayValue"in e?(this.ae(e.arrayValue,t),this.re(t)):Yr()}ie(e,t){this.ee(t,25),this.he(e,t)}he(e,t){t.se(e)}ue(e,t){const n=e.fields||{};this.ee(t,55);for(const e of Object.keys(n))this.ie(e,t),this.Zt(n[e],t)}ae(e,t){const n=e.values||[];this.ee(t,50);for(const e of n)this.Zt(e,t)}ce(e,t){this.ee(t,37),Bo.fromName(e).path.forEach((e=>{this.ee(t,60),this.he(e,t)}))}ee(e,t){e.ne(t)}re(e){e.ne(2)}}Zl.le=new Zl;class eh{constructor(){this.xe=new th}addToCollectionParentIndex(e,t){return this.xe.add(t),Hl.resolve()}getCollectionParents(e,t){return Hl.resolve(this.xe.getEntries(t))}addFieldIndex(e,t){return Hl.resolve()}deleteFieldIndex(e,t){return Hl.resolve()}getDocumentsMatchingTarget(e,t,n){return Hl.resolve(Lc())}getFieldIndex(e,t){return Hl.resolve(null)}getFieldIndexes(e,t){return Hl.resolve([])}getNextCollectionGroupToUpdate(e){return Hl.resolve(null)}updateCollectionGroup(e,t,n){return Hl.resolve()}updateIndexEntries(e,t){return Hl.resolve()}}class th{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t]||new _c(Io.comparator),s=!i.has(n);return this.index[t]=i.add(n),s}has(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t];return i&&i.has(n)}getEntries(e){return(this.index[e]||new _c(Io.comparator)).toArray()}}class nh{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new nh(e,nh.DEFAULT_COLLECTION_PERCENTILE,nh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}nh.DEFAULT_COLLECTION_PERCENTILE=10,nh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,nh.DEFAULT=new nh(41943040,nh.DEFAULT_COLLECTION_PERCENTILE,nh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),nh.DISABLED=new nh(-1,0,0);class ih{constructor(e){this.ze=e}next(){return this.ze+=2,this.ze}static He(){return new ih(0)}static Je(){return new ih(-1)}}async function sh(e){if(e.code!==to.FAILED_PRECONDITION||e.message!==$l)throw e;Gr("LocalStore","Unexpectedly lost primary lease")}class rh{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[t,i]of n)if(this.equalsFn(t,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),i=this.inner[n];if(void 0!==i){for(let n=0;n<i.length;n++)if(this.equalsFn(i[n][0],e))return void(i[n]=[e,t]);i.push([e,t])}else this.inner[n]=[[e,t]]}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return 1===n.length?delete this.inner[t]:n.splice(i,1),!0;return!1}forEach(e){wo(this.inner,((t,n)=>{for(const[t,i]of n)e(t,i)}))}isEmpty(){return ko(this.inner)}}class oh{constructor(){this.changes=new rh((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ia.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Hl.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class ah{constructor(e,t,n){this.qn=e,this.gs=t,this.indexManager=n}ys(e,t){return this.gs.getAllMutationBatchesAffectingDocumentKey(e,t).next((n=>this.ps(e,t,n)))}ps(e,t,n){return this.qn.getEntry(e,t).next((e=>{for(const t of n)t.applyToLocalView(e);return e}))}Is(e,t){e.forEach(((e,n)=>{for(const e of t)e.applyToLocalView(n)}))}Es(e,t){return this.qn.getEntries(e,t).next((t=>this.Ts(e,t).next((()=>t))))}Ts(e,t){return this.gs.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>this.Is(t,e)))}As(e,t,n){return function(e){return Bo.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.Rs(e,t.path):Ra(t)?this.Ps(e,t,n):this.bs(e,t,n)}Rs(e,t){return this.ys(e,new Bo(t)).next((e=>{let t=Rc();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}Ps(e,t,n){const i=t.collectionGroup;let s=Rc();return this.indexManager.getCollectionParents(e,i).next((r=>Hl.forEach(r,(r=>{const o=function(e,t){return new Ta(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,r.child(i));return this.bs(e,o,n).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}bs(e,t,n){let i;return this.qn.getAll(e,t.path,n).next((n=>(i=n,this.gs.getAllMutationBatchesAffectingQuery(e,t)))).next((e=>{for(const t of e)for(const e of t.mutations){const n=e.key;let s=i.get(n);null==s&&(s=ia.newInvalidDocument(n),i=i.insert(n,s)),ac(e,s,t.localWriteTime),s.isFoundDocument()||(i=i.remove(n))}})).next((()=>(i.forEach(((e,n)=>{Va(t,n)||(i=i.remove(e))})),i)))}}class ch{constructor(e,t,n,i){this.targetId=e,this.fromCache=t,this.vs=n,this.Vs=i}static Ss(e,t){let n=Lc(),i=Lc();for(const e of t.docChanges)switch(e.type){case 0:n=n.add(e.doc.key);break;case 1:i=i.add(e.doc.key)}return new ch(e,t.fromCache,n,i)}}class lh{Ds(e){this.Cs=e}As(e,t,n,i){return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||n.isEqual(vo.min())?this.Ns(e,t):this.Cs.Es(e,i).next((s=>{const r=this.xs(t,s);return(Ca(t)||xa(t))&&this.ks(t.limitType,r,i,n)?this.Ns(e,t):(Kr()<=ct.DEBUG&&Gr("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Ua(t)),this.Cs.As(e,t,n).next((e=>(r.forEach((t=>{e=e.insert(t.key,t)})),e))))}))}xs(e,t){let n=new _c(Fa(e));return t.forEach(((t,i)=>{Va(e,i)&&(n=n.add(i))})),n}ks(e,t,n,i){if(n.size!==t.size)return!0;const s="F"===e?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ns(e,t){return Kr()<=ct.DEBUG&&Gr("QueryEngine","Using full collection scan to execute query:",Ua(t)),this.Cs.As(e,t,vo.min())}}class hh{constructor(e,t,n,i){this.persistence=e,this.Os=t,this.O=i,this.Ms=new Ic(mo),this.$s=new rh((e=>aa(e)),ca),this.Fs=vo.min(),this.Bs=e.getRemoteDocumentCache(),this.Un=e.getTargetCache(),this.Kn=e.getBundleCache(),this.Ls(n)}Ls(e){this.indexManager=this.persistence.getIndexManager(e),this.gs=this.persistence.getMutationQueue(e,this.indexManager),this.Us=new ah(this.Bs,this.gs,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Os.Ds(this.Us)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function uh(e,t,n,i){return new hh(e,t,n,i)}async function dh(e,t){const n=eo(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let i;return n.gs.getAllMutationBatches(e).next((s=>(i=s,n.Ls(t),n.gs.getAllMutationBatches(e)))).next((t=>{const s=[],r=[];let o=Lc();for(const e of i){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){r.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.Us.Es(e,o).next((e=>({qs:e,removedBatchIds:s,addedBatchIds:r})))}))}))}function ph(e){const t=eo(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Un.getLastRemoteSnapshotVersion(e)))}function fh(e,t,n){let i=Lc();return n.forEach((e=>i=i.add(e))),t.getEntries(e,i).next((e=>{let i=Ac();return n.forEach(((n,s)=>{const r=e.get(n);s.isNoDocument()&&s.version.isEqual(vo.min())?(t.removeEntry(n,s.readTime),i=i.insert(n,s)):!r.isValidDocument()||s.version.compareTo(r.version)>0||0===s.version.compareTo(r.version)&&r.hasPendingWrites?(t.addEntry(s),i=i.insert(n,s)):Gr("LocalStore","Ignoring outdated watch update for ",n,". Current version:",r.version," Watch version:",s.version)})),i}))}function mh(e,t){const n=eo(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.gs.getNextMutationBatchAfterBatchId(e,t))))}function gh(e,t){const n=eo(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let i;return n.Un.getTargetData(e,t).next((s=>s?(i=s,Hl.resolve(i)):n.Un.allocateTargetId(e).next((s=>(i=new Jl(t,s,0,e.currentSequenceNumber),n.Un.addTargetData(e,i).next((()=>i)))))))})).then((e=>{const i=n.Ms.get(e.targetId);return(null===i||e.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(e.targetId,e),n.$s.set(t,e.targetId)),e}))}async function yh(e,t,n){const i=eo(e),s=i.Ms.get(t),r=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",r,(e=>i.persistence.referenceDelegate.removeTarget(e,s)))}catch(e){if(!Wl(e))throw e;Gr("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}i.Ms=i.Ms.remove(t),i.$s.delete(s.target)}function vh(e,t,n){const i=eo(e);let s=vo.min(),r=Lc();return i.persistence.runTransaction("Execute query","readonly",(e=>function(e,t,n){const i=eo(e),s=i.$s.get(n);return void 0!==s?Hl.resolve(i.Ms.get(s)):i.Un.getTargetData(t,n)}(i,e,Oa(t)).next((t=>{if(t)return s=t.lastLimboFreeSnapshotVersion,i.Un.getMatchingKeysForTargetId(e,t.targetId).next((e=>{r=e}))})).next((()=>i.Os.As(e,t,n?s:vo.min(),n?r:Lc()))).next((e=>({documents:e,Ks:r})))))}class bh{constructor(e){this.O=e,this.Ws=new Map,this.zs=new Map}getBundleMetadata(e,t){return Hl.resolve(this.Ws.get(t))}saveBundleMetadata(e,t){var n;return this.Ws.set(t.id,{id:(n=t).id,version:n.version,createTime:Yc(n.createTime)}),Hl.resolve()}getNamedQuery(e,t){return Hl.resolve(this.zs.get(t))}saveNamedQuery(e,t){return this.zs.set(t.name,function(e){return{name:e.name,query:Yl(e.bundledQuery),readTime:Yc(e.readTime)}}(t)),Hl.resolve()}}class wh{constructor(){this.overlays=new Ic(Bo.comparator),this.Hs=new Map}getOverlay(e,t){return Hl.resolve(this.overlays.get(t))}saveOverlays(e,t,n){return n.forEach((n=>{this.Yt(e,t,n)})),Hl.resolve()}removeOverlaysForBatchId(e,t,n){const i=this.Hs.get(n);return void 0!==i&&(i.forEach((e=>this.overlays=this.overlays.remove(e))),this.Hs.delete(n)),Hl.resolve()}getOverlaysForCollection(e,t,n){const i=new Map,s=t.length+1,r=new Bo(t.child("")),o=this.overlays.getIteratorFrom(r);for(;o.hasNext();){const e=o.getNext().value,r=e.getKey();if(!t.isPrefixOf(r.path))break;r.path.length===s&&e.largestBatchId>n&&i.set(e.getKey(),e)}return Hl.resolve(i)}getOverlaysForCollectionGroup(e,t,n,i){let s=new Ic(((e,t)=>e-t));const r=this.overlays.getIterator();for(;r.hasNext();){const e=r.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=s.get(e.largestBatchId);null===t&&(t=new Map,s=s.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=new Map,a=s.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(t,e))),!(o.size>=i)););return Hl.resolve(o)}Yt(e,t,n){if(null===n)return;const i=this.overlays.get(n.key);null!==i&&this.Hs.get(i.largestBatchId).delete(n.key),this.overlays=this.overlays.insert(n.key,new Ql(t,n));let s=this.Hs.get(t);void 0===s&&(s=new Set,this.Hs.set(t,s)),s.add(n.key)}}class kh{constructor(){this.Js=new _c(Eh.Ys),this.Xs=new _c(Eh.Zs)}isEmpty(){return this.Js.isEmpty()}addReference(e,t){const n=new Eh(e,t);this.Js=this.Js.add(n),this.Xs=this.Xs.add(n)}ti(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.ei(new Eh(e,t))}ni(e,t){e.forEach((e=>this.removeReference(e,t)))}si(e){const t=new Bo(new Io([])),n=new Eh(t,e),i=new Eh(t,e+1),s=[];return this.Xs.forEachInRange([n,i],(e=>{this.ei(e),s.push(e.key)})),s}ii(){this.Js.forEach((e=>this.ei(e)))}ei(e){this.Js=this.Js.delete(e),this.Xs=this.Xs.delete(e)}ri(e){const t=new Bo(new Io([])),n=new Eh(t,e),i=new Eh(t,e+1);let s=Lc();return this.Xs.forEachInRange([n,i],(e=>{s=s.add(e.key)})),s}containsKey(e){const t=new Eh(e,0),n=this.Js.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Eh{constructor(e,t){this.key=e,this.oi=t}static Ys(e,t){return Bo.comparator(e.key,t.key)||mo(e.oi,t.oi)}static Zs(e,t){return mo(e.oi,t.oi)||Bo.comparator(e.key,t.key)}}class Ih{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.gs=[],this.ci=1,this.ui=new _c(Eh.Ys)}checkEmpty(e){return Hl.resolve(0===this.gs.length)}addMutationBatch(e,t,n,i){const s=this.ci;this.ci++,this.gs.length>0&&this.gs[this.gs.length-1];const r=new Kl(s,t,n,i);this.gs.push(r);for(const t of i)this.ui=this.ui.add(new Eh(t.key,s)),this.indexManager.addToCollectionParentIndex(e,t.key.path.popLast());return Hl.resolve(r)}lookupMutationBatch(e,t){return Hl.resolve(this.ai(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,i=this.hi(n),s=i<0?0:i;return Hl.resolve(this.gs.length>s?this.gs[s]:null)}getHighestUnacknowledgedBatchId(){return Hl.resolve(0===this.gs.length?-1:this.ci-1)}getAllMutationBatches(e){return Hl.resolve(this.gs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Eh(t,0),i=new Eh(t,Number.POSITIVE_INFINITY),s=[];return this.ui.forEachInRange([n,i],(e=>{const t=this.ai(e.oi);s.push(t)})),Hl.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new _c(mo);return t.forEach((e=>{const t=new Eh(e,0),i=new Eh(e,Number.POSITIVE_INFINITY);this.ui.forEachInRange([t,i],(e=>{n=n.add(e.oi)}))})),Hl.resolve(this.li(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,i=n.length+1;let s=n;Bo.isDocumentKey(s)||(s=s.child(""));const r=new Eh(new Bo(s),0);let o=new _c(mo);return this.ui.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===i&&(o=o.add(e.oi)),!0)}),r),Hl.resolve(this.li(o))}li(e){const t=[];return e.forEach((e=>{const n=this.ai(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Zr(0===this.fi(t.batchId,"removed")),this.gs.shift();let n=this.ui;return Hl.forEach(t.mutations,(i=>{const s=new Eh(i.key,t.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.ui=n}))}Qe(e){}containsKey(e,t){const n=new Eh(t,0),i=this.ui.firstAfterOrEqual(n);return Hl.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.gs.length,Hl.resolve()}fi(e,t){return this.hi(e)}hi(e){return 0===this.gs.length?0:e-this.gs[0].batchId}ai(e){const t=this.hi(e);return t<0||t>=this.gs.length?null:this.gs[t]}}class Th{constructor(e){this.di=e,this.docs=new Ic(Bo.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,i=this.docs.get(n),s=i?i.size:0,r=this.di(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:r}),this.size+=r-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Hl.resolve(n?n.document.mutableCopy():ia.newInvalidDocument(t))}getEntries(e,t){let n=Ac();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():ia.newInvalidDocument(e))})),Hl.resolve(n)}getAll(e,t,n){let i=Ac();const s=new Bo(t.child("")),r=this.docs.getIteratorFrom(s);for(;r.hasNext();){const{key:e,value:{document:s}}=r.getNext();if(!t.isPrefixOf(e.path))break;e.path.length>t.length+1||s.readTime.compareTo(n)<=0||(i=i.insert(s.key,s.mutableCopy()))}return Hl.resolve(i)}_i(e,t){return Hl.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new Sh(this)}getSize(e){return Hl.resolve(this.size)}}class Sh extends oh{constructor(e){super(),this.Tn=e}applyChanges(e){const t=[];return this.changes.forEach(((n,i)=>{i.isValidDocument()?t.push(this.Tn.addEntry(e,i)):this.Tn.removeEntry(n)})),Hl.waitFor(t)}getFromCache(e,t){return this.Tn.getEntry(e,t)}getAllFromCache(e,t){return this.Tn.getEntries(e,t)}}class _h{constructor(e){this.persistence=e,this.wi=new rh((e=>aa(e)),ca),this.lastRemoteSnapshotVersion=vo.min(),this.highestTargetId=0,this.mi=0,this.gi=new kh,this.targetCount=0,this.yi=ih.He()}forEachTarget(e,t){return this.wi.forEach(((e,n)=>t(n))),Hl.resolve()}getLastRemoteSnapshotVersion(e){return Hl.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Hl.resolve(this.mi)}allocateTargetId(e){return this.highestTargetId=this.yi.next(),Hl.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.mi&&(this.mi=t),Hl.resolve()}Ze(e){this.wi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.yi=new ih(t),this.highestTargetId=t),e.sequenceNumber>this.mi&&(this.mi=e.sequenceNumber)}addTargetData(e,t){return this.Ze(t),this.targetCount+=1,Hl.resolve()}updateTargetData(e,t){return this.Ze(t),Hl.resolve()}removeTargetData(e,t){return this.wi.delete(t.target),this.gi.si(t.targetId),this.targetCount-=1,Hl.resolve()}removeTargets(e,t,n){let i=0;const s=[];return this.wi.forEach(((r,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.wi.delete(r),s.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)})),Hl.waitFor(s).next((()=>i))}getTargetCount(e){return Hl.resolve(this.targetCount)}getTargetData(e,t){const n=this.wi.get(t)||null;return Hl.resolve(n)}addMatchingKeys(e,t,n){return this.gi.ti(t,n),Hl.resolve()}removeMatchingKeys(e,t,n){this.gi.ni(t,n);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach((t=>{s.push(i.markPotentiallyOrphaned(e,t))})),Hl.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.gi.si(t),Hl.resolve()}getMatchingKeysForTargetId(e,t){const n=this.gi.ri(t);return Hl.resolve(n)}containsKey(e,t){return Hl.resolve(this.gi.containsKey(t))}}class Ch{constructor(e,t){this.pi={},this.overlays={},this.Nn=new uo(0),this.xn=!1,this.xn=!0,this.referenceDelegate=e(this),this.Un=new _h(this),this.indexManager=new eh,this.qn=function(e){return new Th(e)}((e=>this.referenceDelegate.Ii(e))),this.O=new Xl(t),this.Kn=new bh(this.O)}start(){return Promise.resolve()}shutdown(){return this.xn=!1,Promise.resolve()}get started(){return this.xn}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new wh,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.pi[e.toKey()];return n||(n=new Ih(t,this.referenceDelegate),this.pi[e.toKey()]=n),n}getTargetCache(){return this.Un}getRemoteDocumentCache(){return this.qn}getBundleCache(){return this.Kn}runTransaction(e,t,n){Gr("MemoryPersistence","Starting transaction:",e);const i=new xh(this.Nn.next());return this.referenceDelegate.Ei(),n(i).next((e=>this.referenceDelegate.Ti(i).next((()=>e)))).toPromise().then((e=>(i.raiseOnCommittedEvent(),e)))}Ai(e,t){return Hl.or(Object.values(this.pi).map((n=>()=>n.containsKey(e,t))))}}class xh extends zl{constructor(e){super(),this.currentSequenceNumber=e}}class Ah{constructor(e){this.persistence=e,this.Ri=new kh,this.Pi=null}static bi(e){return new Ah(e)}get vi(){if(this.Pi)return this.Pi;throw Yr()}addReference(e,t,n){return this.Ri.addReference(n,t),this.vi.delete(n.toString()),Hl.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.vi.add(n.toString()),Hl.resolve()}markPotentiallyOrphaned(e,t){return this.vi.add(t.toString()),Hl.resolve()}removeTarget(e,t){this.Ri.si(t.targetId).forEach((e=>this.vi.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.vi.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Ei(){this.Pi=new Set}Ti(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Hl.forEach(this.vi,(n=>{const i=Bo.fromPath(n);return this.Vi(e,i).next((e=>{e||t.removeEntry(i,vo.min())}))})).next((()=>(this.Pi=null,t.apply(e))))}updateLimboDocument(e,t){return this.Vi(e,t).next((e=>{e?this.vi.delete(t.toString()):this.vi.add(t.toString())}))}Ii(e){return 0}Vi(e,t){return Hl.or([()=>Hl.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Nh{constructor(){this.activeTargetIds=Mc()}Ci(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ni(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Di(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Rh{constructor(){this._r=new Nh,this.wr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this._r.Ci(e),this.wr[e]||"not-current"}updateQueryState(e,t,n){this.wr[e]=t}removeLocalQueryTarget(e){this._r.Ni(e)}isLocalQueryTarget(e){return this._r.activeTargetIds.has(e)}clearQueryState(e){delete this.wr[e]}getAllActiveQueryTargets(){return this._r.activeTargetIds}isActiveQueryTarget(e){return this._r.activeTargetIds.has(e)}start(){return this._r=new Nh,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}}class Dh{mr(e){}shutdown(){}}class Oh{constructor(){this.gr=()=>this.yr(),this.pr=()=>this.Ir(),this.Er=[],this.Tr()}mr(e){this.Er.push(e)}shutdown(){window.removeEventListener("online",this.gr),window.removeEventListener("offline",this.pr)}Tr(){window.addEventListener("online",this.gr),window.addEventListener("offline",this.pr)}yr(){Gr("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Er)e(0)}Ir(){Gr("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Er)e(1)}static Vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Lh={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Ph{constructor(e){this.Ar=e.Ar,this.Rr=e.Rr}Pr(e){this.br=e}vr(e){this.Vr=e}onMessage(e){this.Sr=e}close(){this.Rr()}send(e){this.Ar(e)}Dr(){this.br()}Cr(e){this.Vr(e)}Nr(e){this.Sr(e)}}class Mh extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http";this.kr=t+"://"+e.host,this.Or="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Mr(e,t,n,i,s){const r=this.$r(e,t);Gr("RestConnection","Sending: ",r,n);const o={};return this.Fr(o,i,s),this.Br(e,r,o,n).then((e=>(Gr("RestConnection","Received: ",e),e)),(t=>{throw Jr("RestConnection",`${e} failed with error: `,t,"url: ",r,"request:",n),t}))}Lr(e,t,n,i,s){return this.Mr(e,t,n,i,s)}Fr(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Hr,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}$r(e,t){const n=Lh[e];return`${this.kr}/v1/${t}:${n}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}Br(e,t,n,i){return new Promise(((s,r)=>{const o=new qr;o.listenOnce(Ur.COMPLETE,(()=>{try{switch(o.getLastErrorCode()){case Mr.NO_ERROR:const t=o.getResponseJson();Gr("Connection","XHR received:",JSON.stringify(t)),s(t);break;case Mr.TIMEOUT:Gr("Connection",'RPC "'+e+'" timed out'),r(new no(to.DEADLINE_EXCEEDED,"Request time out"));break;case Mr.HTTP_ERROR:const n=o.getStatus();if(Gr("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){const e=o.getResponseJson().error;if(e&&e.status&&e.message){const t=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(to).indexOf(t)>=0?t:to.UNKNOWN}(e.status);r(new no(t,e.message))}else r(new no(to.UNKNOWN,"Server responded with status "+o.getStatus()))}else r(new no(to.UNAVAILABLE,"Connection failed."));break;default:Yr()}}finally{Gr("Connection",'RPC "'+e+'" completed.')}}));const a=JSON.stringify(i);o.send(t,"POST",a,n,15)}))}Ur(e,t,n){const i=[this.kr,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Lr(),r=Pr(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new Br({})),this.Fr(o.initMessageHeaders,t,n),qe()||ze()||je().indexOf("Electron/")>=0||He()||je().indexOf("MSAppHost/")>=0||$e()||(o.httpHeadersOverwriteParam="$httpHeaders");const a=i.join("");Gr("Connection","Creating WebChannel: "+a,o);const c=s.createWebChannel(a,o);let l=!1,h=!1;const u=new Ph({Ar:e=>{h?Gr("Connection","Not sending because WebChannel is closed:",e):(l||(Gr("Connection","Opening WebChannel transport."),c.open(),l=!0),Gr("Connection","WebChannel sending:",e),c.send(e))},Rr:()=>c.close()}),d=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return d(c,jr.EventType.OPEN,(()=>{h||Gr("Connection","WebChannel transport opened.")})),d(c,jr.EventType.CLOSE,(()=>{h||(h=!0,Gr("Connection","WebChannel transport closed"),u.Cr())})),d(c,jr.EventType.ERROR,(e=>{h||(h=!0,Jr("Connection","WebChannel transport errored:",e),u.Cr(new no(to.UNAVAILABLE,"The operation could not be completed")))})),d(c,jr.EventType.MESSAGE,(e=>{var t;if(!h){const n=e.data[0];Zr(!!n);const i=n,s=i.error||(null===(t=i[0])||void 0===t?void 0:t.error);if(s){Gr("Connection","WebChannel received error:",s);const e=s.status;let t=function(e){const t=bc[e];if(void 0!==t)return Ec(t)}(e),n=s.message;void 0===t&&(t=to.INTERNAL,n="Unknown error status: "+e+" with message "+s.message),h=!0,u.Cr(new no(t,n)),c.close()}else Gr("Connection","WebChannel received:",n),u.Nr(n)}})),d(r,Vr.STAT_EVENT,(e=>{e.stat===Fr.PROXY?Gr("Connection","Detected buffering proxy"):e.stat===Fr.NOPROXY&&Gr("Connection","Detected no buffering proxy")})),setTimeout((()=>{u.Dr()}),0),u}}function Uh(){return"undefined"!=typeof document?document:null}function Vh(e){return new Gc(e,!0)}class Fh{constructor(e,t,n=1e3,i=1.5,s=6e4){this.Sn=e,this.timerId=t,this.qr=n,this.Kr=i,this.Gr=s,this.jr=0,this.Qr=null,this.Wr=Date.now(),this.reset()}reset(){this.jr=0}zr(){this.jr=this.Gr}Hr(e){this.cancel();const t=Math.floor(this.jr+this.Jr()),n=Math.max(0,Date.now()-this.Wr),i=Math.max(0,t-n);i>0&&Gr("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.jr} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.Qr=this.Sn.enqueueAfterDelay(this.timerId,i,(()=>(this.Wr=Date.now(),e()))),this.jr*=this.Kr,this.jr<this.qr&&(this.jr=this.qr),this.jr>this.Gr&&(this.jr=this.Gr)}Yr(){null!==this.Qr&&(this.Qr.skipDelay(),this.Qr=null)}cancel(){null!==this.Qr&&(this.Qr.cancel(),this.Qr=null)}Jr(){return(Math.random()-.5)*this.jr}}class Bh{constructor(e,t,n,i,s,r,o,a){this.Sn=e,this.Xr=n,this.Zr=i,this.eo=s,this.authCredentialsProvider=r,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.no=0,this.so=null,this.io=null,this.stream=null,this.ro=new Fh(e,t)}oo(){return 1===this.state||5===this.state||this.co()}co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.uo()}async stop(){this.oo()&&await this.close(0)}ao(){this.state=0,this.ro.reset()}ho(){this.co()&&null===this.so&&(this.so=this.Sn.enqueueAfterDelay(this.Xr,6e4,(()=>this.lo())))}fo(e){this._o(),this.stream.send(e)}async lo(){if(this.co())return this.close(0)}_o(){this.so&&(this.so.cancel(),this.so=null)}wo(){this.io&&(this.io.cancel(),this.io=null)}async close(e,t){this._o(),this.wo(),this.ro.cancel(),this.no++,4!==e?this.ro.reset():t&&t.code===to.RESOURCE_EXHAUSTED?(Qr(t.toString()),Qr("Using maximum backoff delay to prevent overloading the backend."),this.ro.zr()):t&&t.code===to.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.mo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.vr(t)}mo(){}auth(){this.state=1;const e=this.yo(this.no),t=this.no;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([e,n])=>{this.no===t&&this.po(e,n)}),(t=>{e((()=>{const e=new no(to.UNKNOWN,"Fetching auth token failed: "+t.message);return this.Io(e)}))}))}po(e,t){const n=this.yo(this.no);this.stream=this.Eo(e,t),this.stream.Pr((()=>{n((()=>(this.state=2,this.io=this.Sn.enqueueAfterDelay(this.Zr,1e4,(()=>(this.co()&&(this.state=3),Promise.resolve()))),this.listener.Pr())))})),this.stream.vr((e=>{n((()=>this.Io(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}uo(){this.state=5,this.ro.Hr((async()=>{this.state=0,this.start()}))}Io(e){return Gr("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}yo(e){return t=>{this.Sn.enqueueAndForget((()=>this.no===e?t():(Gr("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class jh extends Bh{constructor(e,t,n,i,s,r){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,i,r),this.O=s}Eo(e,t){return this.eo.Ur("Listen",e,t)}onMessage(e){this.ro.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const i=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Yr()}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],r=function(e,t){return e.N?(Zr(void 0===t||"string"==typeof t),Co.fromBase64String(t||"")):(Zr(void 0===t||t instanceof Uint8Array),Co.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?to.UNKNOWN:Ec(e.code);return new no(t,e.message||"")}(o);n=new jc(i,s,r,a||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const s=nl(e,i.document.name),r=Yc(i.document.updateTime),o=new ta({mapValue:{fields:i.document.fields}}),a=ia.newFoundDocument(s,r,o),c=i.targetIds||[],l=i.removedTargetIds||[];n=new Fc(c,l,a.key,a)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const s=nl(e,i.document),r=i.readTime?Yc(i.readTime):vo.min(),o=ia.newNoDocument(s,r),a=i.removedTargetIds||[];n=new Fc([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const s=nl(e,i.document),r=i.removedTargetIds||[];n=new Fc([],r,s,null)}else{if(!("filter"in t))return Yr();{t.filter;const e=t.filter;e.targetId;const i=e.count||0,s=new vc(i),r=e.targetId;n=new Bc(r,s)}}return n}(this.O,e),n=function(e){if(!("targetChange"in e))return vo.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?vo.min():t.readTime?Yc(t.readTime):vo.min()}(e);return this.listener.To(t,n)}Ao(e){const t={};t.database=rl(this.O),t.addTarget=function(e,t){let n;const i=t.target;return n=la(i)?{documents:ll(e,i)}:{query:hl(e,i)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=Jc(e,t.resumeToken):t.snapshotVersion.compareTo(vo.min())>0&&(n.readTime=Qc(e,t.snapshotVersion.toTimestamp())),n}(this.O,e);const n=function(e,t){const n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Yr()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.O,e);n&&(t.labels=n),this.fo(t)}Ro(e){const t={};t.database=rl(this.O),t.removeTarget=e,this.fo(t)}}class qh extends Bh{constructor(e,t,n,i,s,r){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,i,r),this.O=s,this.Po=!1}get bo(){return this.Po}start(){this.Po=!1,this.lastStreamToken=void 0,super.start()}mo(){this.Po&&this.vo([])}Eo(e,t){return this.eo.Ur("Write",e,t)}onMessage(e){if(Zr(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Po){this.ro.reset();const t=function(e,t){return e&&e.length>0?(Zr(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?Yc(e.updateTime):Yc(t);return n.isEqual(vo.min())&&(n=Yc(t)),new nc(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=Yc(e.commitTime);return this.listener.Vo(n,t)}return Zr(!e.writeResults||0===e.writeResults.length),this.Po=!0,this.listener.So()}Do(){const e={};e.database=rl(this.O),this.fo(e)}vo(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>cl(this.O,e)))};this.fo(t)}}class $h extends class{}{constructor(e,t,n,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.eo=n,this.O=i,this.Co=!1}No(){if(this.Co)throw new no(to.FAILED_PRECONDITION,"The client has already been terminated.")}Mr(e,t,n){return this.No(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,s])=>this.eo.Mr(e,t,n,i,s))).catch((e=>{throw"FirebaseError"===e.name?(e.code===to.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new no(to.UNKNOWN,e.toString())}))}Lr(e,t,n){return this.No(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,s])=>this.eo.Lr(e,t,n,i,s))).catch((e=>{throw"FirebaseError"===e.name?(e.code===to.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new no(to.UNKNOWN,e.toString())}))}terminate(){this.Co=!0}}class zh{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.xo=0,this.ko=null,this.Oo=!0}Mo(){0===this.xo&&(this.$o("Unknown"),this.ko=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.ko=null,this.Fo("Backend didn't respond within 10 seconds."),this.$o("Offline"),Promise.resolve()))))}Bo(e){"Online"===this.state?this.$o("Unknown"):(this.xo++,this.xo>=1&&(this.Lo(),this.Fo(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.$o("Offline")))}set(e){this.Lo(),this.xo=0,"Online"===e&&(this.Oo=!1),this.$o(e)}$o(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}Fo(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Oo?(Qr(t),this.Oo=!1):Gr("OnlineStateTracker",t)}Lo(){null!==this.ko&&(this.ko.cancel(),this.ko=null)}}class Hh{constructor(e,t,n,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Uo=[],this.qo=new Map,this.Ko=new Set,this.Go=[],this.jo=s,this.jo.mr((e=>{n.enqueueAndForget((async()=>{eu(this)&&(Gr("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=eo(e);t.Ko.add(4),await Kh(t),t.Qo.set("Unknown"),t.Ko.delete(4),await Wh(t)}(this))}))})),this.Qo=new zh(n,i)}}async function Wh(e){if(eu(e))for(const t of e.Go)await t(!0)}async function Kh(e){for(const t of e.Go)await t(!1)}function Gh(e,t){const n=eo(e);n.qo.has(t.targetId)||(n.qo.set(t.targetId,t),Zh(n)?Yh(n):vu(n).co()&&Jh(n,t))}function Qh(e,t){const n=eo(e),i=vu(n);n.qo.delete(t),i.co()&&Xh(n,t),0===n.qo.size&&(i.co()?i.ho():eu(n)&&n.Qo.set("Unknown"))}function Jh(e,t){e.Wo.Z(t.targetId),vu(e).Ao(t)}function Xh(e,t){e.Wo.Z(t),vu(e).Ro(t)}function Yh(e){e.Wo=new $c({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Tt:t=>e.qo.get(t)||null}),vu(e).start(),e.Qo.Mo()}function Zh(e){return eu(e)&&!vu(e).oo()&&e.qo.size>0}function eu(e){return 0===eo(e).Ko.size}function tu(e){e.Wo=void 0}async function nu(e){e.qo.forEach(((t,n)=>{Jh(e,t)}))}async function iu(e,t){tu(e),Zh(e)?(e.Qo.Bo(t),Yh(e)):e.Qo.set("Unknown")}async function su(e,t,n){if(e.Qo.set("Online"),t instanceof jc&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const i of t.targetIds)e.qo.has(i)&&(await e.remoteSyncer.rejectListen(i,n),e.qo.delete(i),e.Wo.removeTarget(i))}(e,t)}catch(n){Gr("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await ru(e,n)}else if(t instanceof Fc?e.Wo.ct(t):t instanceof Bc?e.Wo._t(t):e.Wo.ht(t),!n.isEqual(vo.min()))try{const t=await ph(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Wo.yt(t);return n.targetChanges.forEach(((n,i)=>{if(n.resumeToken.approximateByteSize()>0){const s=e.qo.get(i);s&&e.qo.set(i,s.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((t=>{const n=e.qo.get(t);if(!n)return;e.qo.set(t,n.withResumeToken(Co.EMPTY_BYTE_STRING,n.snapshotVersion)),Xh(e,t);const i=new Jl(n.target,t,1,n.sequenceNumber);Jh(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Gr("RemoteStore","Failed to raise snapshot:",t),await ru(e,t)}}async function ru(e,t,n){if(!Wl(t))throw t;e.Ko.add(1),await Kh(e),e.Qo.set("Offline"),n||(n=()=>ph(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Gr("RemoteStore","Retrying IndexedDB access"),await n(),e.Ko.delete(1),await Wh(e)}))}function ou(e,t){return t().catch((n=>ru(e,n,t)))}async function au(e){const t=eo(e),n=bu(t);let i=t.Uo.length>0?t.Uo[t.Uo.length-1].batchId:-1;for(;cu(t);)try{const e=await mh(t.localStore,i);if(null===e){0===t.Uo.length&&n.ho();break}i=e.batchId,lu(t,e)}catch(e){await ru(t,e)}hu(t)&&uu(t)}function cu(e){return eu(e)&&e.Uo.length<10}function lu(e,t){e.Uo.push(t);const n=bu(e);n.co()&&n.bo&&n.vo(t.mutations)}function hu(e){return eu(e)&&!bu(e).oo()&&e.Uo.length>0}function uu(e){bu(e).start()}async function du(e){bu(e).Do()}async function pu(e){const t=bu(e);for(const n of e.Uo)t.vo(n.mutations)}async function fu(e,t,n){const i=e.Uo.shift(),s=Gl.from(i,t,n);await ou(e,(()=>e.remoteSyncer.applySuccessfulWrite(s))),await au(e)}async function mu(e,t){t&&bu(e).bo&&await async function(e,t){if(kc(n=t.code)&&n!==to.ABORTED){const n=e.Uo.shift();bu(e).ao(),await ou(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await au(e)}var n}(e,t),hu(e)&&uu(e)}async function gu(e,t){const n=eo(e);n.asyncQueue.verifyOperationInProgress(),Gr("RemoteStore","RemoteStore received new credentials");const i=eu(n);n.Ko.add(3),await Kh(n),i&&n.Qo.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ko.delete(3),await Wh(n)}async function yu(e,t){const n=eo(e);t?(n.Ko.delete(2),await Wh(n)):t||(n.Ko.add(2),await Kh(n),n.Qo.set("Unknown"))}function vu(e){return e.zo||(e.zo=function(e,t,n){const i=eo(e);return i.No(),new jh(t,i.eo,i.authCredentials,i.appCheckCredentials,i.O,n)}(e.datastore,e.asyncQueue,{Pr:nu.bind(null,e),vr:iu.bind(null,e),To:su.bind(null,e)}),e.Go.push((async t=>{t?(e.zo.ao(),Zh(e)?Yh(e):e.Qo.set("Unknown")):(await e.zo.stop(),tu(e))}))),e.zo}function bu(e){return e.Ho||(e.Ho=function(e,t,n){const i=eo(e);return i.No(),new qh(t,i.eo,i.authCredentials,i.appCheckCredentials,i.O,n)}(e.datastore,e.asyncQueue,{Pr:du.bind(null,e),vr:mu.bind(null,e),So:pu.bind(null,e),Vo:fu.bind(null,e)}),e.Go.push((async t=>{t?(e.Ho.ao(),await au(e)):(await e.Ho.stop(),e.Uo.length>0&&(Gr("RemoteStore",`Stopping write stream with ${e.Uo.length} pending writes`),e.Uo=[]))}))),e.Ho}class wu{constructor(e,t,n,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=i,this.removalCallback=s,this.deferred=new io,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}static createAndSchedule(e,t,n,i,s){const r=Date.now()+n,o=new wu(e,t,r,i,s);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new no(to.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ku(e,t){if(Qr("AsyncQueue",`${t}: ${e}`),Wl(e))return new no(to.UNAVAILABLE,`${t}: ${e}`);throw e}class Eu{constructor(e){this.comparator=e?(t,n)=>e(t,n)||Bo.comparator(t.key,n.key):(e,t)=>Bo.comparator(e.key,t.key),this.keyedMap=Rc(),this.sortedSet=new Ic(this.comparator)}static emptySet(e){return new Eu(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Eu))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,i=n.getNext().key;if(!e.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Eu;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Iu{constructor(){this.Jo=new Ic(Bo.comparator)}track(e){const t=e.doc.key,n=this.Jo.get(t);n?0!==e.type&&3===n.type?this.Jo=this.Jo.insert(t,e):3===e.type&&1!==n.type?this.Jo=this.Jo.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Jo=this.Jo.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Jo=this.Jo.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Jo=this.Jo.remove(t):1===e.type&&2===n.type?this.Jo=this.Jo.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Jo=this.Jo.insert(t,{type:2,doc:e.doc}):Yr():this.Jo=this.Jo.insert(t,e)}Yo(){const e=[];return this.Jo.inorderTraversal(((t,n)=>{e.push(n)})),e}}class Tu{constructor(e,t,n,i,s,r,o,a){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=s,this.fromCache=r,this.syncStateChanged=o,this.excludesMetadataChanges=a}static fromInitialDocuments(e,t,n,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new Tu(e,t,Eu.emptySet(t),s,n,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Pa(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(t[e].type!==n[e].type||!t[e].doc.isEqual(n[e].doc))return!1;return!0}}class Su{constructor(){this.Xo=void 0,this.listeners=[]}}class _u{constructor(){this.queries=new rh((e=>Ma(e)),Pa),this.onlineState="Unknown",this.Zo=new Set}}async function Cu(e,t){const n=eo(e),i=t.query;let s=!1,r=n.queries.get(i);if(r||(s=!0,r=new Su),s)try{r.Xo=await n.onListen(i)}catch(e){const n=ku(e,`Initialization of query '${Ua(t.query)}' failed`);return void t.onError(n)}n.queries.set(i,r),r.listeners.push(t),t.tc(n.onlineState),r.Xo&&t.ec(r.Xo)&&Ru(n)}async function xu(e,t){const n=eo(e),i=t.query;let s=!1;const r=n.queries.get(i);if(r){const e=r.listeners.indexOf(t);e>=0&&(r.listeners.splice(e,1),s=0===r.listeners.length)}if(s)return n.queries.delete(i),n.onUnlisten(i)}function Au(e,t){const n=eo(e);let i=!1;for(const e of t){const t=e.query,s=n.queries.get(t);if(s){for(const t of s.listeners)t.ec(e)&&(i=!0);s.Xo=e}}i&&Ru(n)}function Nu(e,t,n){const i=eo(e),s=i.queries.get(t);if(s)for(const e of s.listeners)e.onError(n);i.queries.delete(t)}function Ru(e){e.Zo.forEach((e=>{e.next()}))}class Du{constructor(e,t,n){this.query=e,this.nc=t,this.sc=!1,this.ic=null,this.onlineState="Unknown",this.options=n||{}}ec(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Tu(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.sc?this.rc(e)&&(this.nc.next(e),t=!0):this.oc(e,this.onlineState)&&(this.cc(e),t=!0),this.ic=e,t}onError(e){this.nc.error(e)}tc(e){this.onlineState=e;let t=!1;return this.ic&&!this.sc&&this.oc(this.ic,e)&&(this.cc(this.ic),t=!0),t}oc(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return!(this.options.uc&&n||e.docs.isEmpty()&&"Offline"!==t)}rc(e){if(e.docChanges.length>0)return!0;const t=this.ic&&this.ic.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}cc(e){e=Tu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.sc=!0,this.nc.next(e)}}class Ou{constructor(e){this.key=e}}class Lu{constructor(e){this.key=e}}class Pu{constructor(e,t){this.query=e,this.dc=t,this._c=null,this.current=!1,this.wc=Lc(),this.mutatedKeys=Lc(),this.mc=Fa(e),this.gc=new Eu(this.mc)}get yc(){return this.dc}Ic(e,t){const n=t?t.Ec:new Iu,i=t?t.gc:this.gc;let s=t?t.mutatedKeys:this.mutatedKeys,r=i,o=!1;const a=Ca(this.query)&&i.size===this.query.limit?i.last():null,c=xa(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((e,t)=>{const l=i.get(e),h=Va(this.query,t)?t:null,u=!!l&&this.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let p=!1;l&&h?l.data.isEqual(h.data)?u!==d&&(n.track({type:3,doc:h}),p=!0):this.Tc(l,h)||(n.track({type:2,doc:h}),p=!0,(a&&this.mc(h,a)>0||c&&this.mc(h,c)<0)&&(o=!0)):!l&&h?(n.track({type:0,doc:h}),p=!0):l&&!h&&(n.track({type:1,doc:l}),p=!0,(a||c)&&(o=!0)),p&&(h?(r=r.add(h),s=d?s.add(e):s.delete(e)):(r=r.delete(e),s=s.delete(e)))})),Ca(this.query)||xa(this.query))for(;r.size>this.query.limit;){const e=Ca(this.query)?r.last():r.first();r=r.delete(e.key),s=s.delete(e.key),n.track({type:1,doc:e})}return{gc:r,Ec:n,ks:o,mutatedKeys:s}}Tc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const i=this.gc;this.gc=e.gc,this.mutatedKeys=e.mutatedKeys;const s=e.Ec.Yo();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Yr()}};return n(e)-n(t)}(e.type,t.type)||this.mc(e.doc,t.doc))),this.Ac(n);const r=t?this.Rc():[],o=0===this.wc.size&&this.current?1:0,a=o!==this._c;return this._c=o,0!==s.length||a?{snapshot:new Tu(this.query,e.gc,i,s,e.mutatedKeys,0===o,a,!1),Pc:r}:{Pc:r}}tc(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({gc:this.gc,Ec:new Iu,mutatedKeys:this.mutatedKeys,ks:!1},!1)):{Pc:[]}}bc(e){return!this.dc.has(e)&&!!this.gc.has(e)&&!this.gc.get(e).hasLocalMutations}Ac(e){e&&(e.addedDocuments.forEach((e=>this.dc=this.dc.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.dc=this.dc.delete(e))),this.current=e.current)}Rc(){if(!this.current)return[];const e=this.wc;this.wc=Lc(),this.gc.forEach((e=>{this.bc(e.key)&&(this.wc=this.wc.add(e.key))}));const t=[];return e.forEach((e=>{this.wc.has(e)||t.push(new Lu(e))})),this.wc.forEach((n=>{e.has(n)||t.push(new Ou(n))})),t}vc(e){this.dc=e.Ks,this.wc=Lc();const t=this.Ic(e.documents);return this.applyChanges(t,!0)}Vc(){return Tu.fromInitialDocuments(this.query,this.gc,this.mutatedKeys,0===this._c)}}class Mu{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Uu{constructor(e){this.key=e,this.Sc=!1}}class Vu{constructor(e,t,n,i,s,r){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=r,this.Dc={},this.Cc=new rh((e=>Ma(e)),Pa),this.Nc=new Map,this.xc=new Set,this.kc=new Ic(Bo.comparator),this.Oc=new Map,this.Mc=new kh,this.$c={},this.Fc=new Map,this.Bc=ih.Je(),this.onlineState="Unknown",this.Lc=void 0}get isPrimaryClient(){return!0===this.Lc}}async function Fu(e,t){const n=id(e);let i,s;const r=n.Cc.get(t);if(r)i=r.targetId,n.sharedClientState.addLocalQueryTarget(i),s=r.view.Vc();else{const e=await gh(n.localStore,Oa(t));n.isPrimaryClient&&Gh(n.remoteStore,e);const r=n.sharedClientState.addLocalQueryTarget(e.targetId);i=e.targetId,s=await Bu(n,t,i,"current"===r)}return s}async function Bu(e,t,n,i){e.Uc=(t,n,i)=>async function(e,t,n,i){let s=t.view.Ic(n);s.ks&&(s=await vh(e.localStore,t.query,!1).then((({documents:e})=>t.view.Ic(e,s))));const r=i&&i.targetChanges.get(t.targetId),o=t.view.applyChanges(s,e.isPrimaryClient,r);return Xu(e,t.targetId,o.Pc),o.snapshot}(e,t,n,i);const s=await vh(e.localStore,t,!0),r=new Pu(t,s.Ks),o=r.Ic(s.documents),a=Vc.createSynthesizedTargetChangeForCurrentChange(n,i&&"Offline"!==e.onlineState),c=r.applyChanges(o,e.isPrimaryClient,a);Xu(e,n,c.Pc);const l=new Mu(t,n,r);return e.Cc.set(t,l),e.Nc.has(n)?e.Nc.get(n).push(t):e.Nc.set(n,[t]),c.snapshot}async function ju(e,t){const n=eo(e),i=n.Cc.get(t),s=n.Nc.get(i.targetId);if(s.length>1)return n.Nc.set(i.targetId,s.filter((e=>!Pa(e,t)))),void n.Cc.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await yh(n.localStore,i.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(i.targetId),Qh(n.remoteStore,i.targetId),Qu(n,i.targetId)})).catch(sh)):(Qu(n,i.targetId),await yh(n.localStore,i.targetId,!0))}async function qu(e,t){const n=eo(e);try{const e=await function(e,t){const n=eo(e),i=t.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const r=n.Bs.newChangeBuffer({trackRemovals:!0});s=n.Ms;const o=[];t.targetChanges.forEach(((r,a)=>{const c=s.get(a);if(!c)return;o.push(n.Un.removeMatchingKeys(e,r.removedDocuments,a).next((()=>n.Un.addMatchingKeys(e,r.addedDocuments,a))));let l=c.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(a)?l=l.withResumeToken(Co.EMPTY_BYTE_STRING,vo.min()).withLastLimboFreeSnapshotVersion(vo.min()):r.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(r.resumeToken,i)),s=s.insert(a,l),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(c,l,r)&&o.push(n.Un.updateTargetData(e,l))}));let a=Ac();if(t.documentUpdates.forEach((i=>{t.resolvedLimboDocuments.has(i)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,i))})),o.push(fh(e,r,t.documentUpdates).next((e=>{a=e}))),!i.isEqual(vo.min())){const t=n.Un.getLastRemoteSnapshotVersion(e).next((t=>n.Un.setTargetsMetadata(e,e.currentSequenceNumber,i)));o.push(t)}return Hl.waitFor(o).next((()=>r.apply(e))).next((()=>n.Us.Ts(e,a))).next((()=>a))})).then((e=>(n.Ms=s,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const i=n.Oc.get(t);i&&(Zr(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?i.Sc=!0:e.modifiedDocuments.size>0?Zr(i.Sc):e.removedDocuments.size>0&&(Zr(i.Sc),i.Sc=!1))})),await ed(n,e,t)}catch(e){await sh(e)}}function $u(e,t,n){const i=eo(e);if(i.isPrimaryClient&&0===n||!i.isPrimaryClient&&1===n){const e=[];i.Cc.forEach(((n,i)=>{const s=i.view.tc(t);s.snapshot&&e.push(s.snapshot)})),function(e,t){const n=eo(e);n.onlineState=t;let i=!1;n.queries.forEach(((e,n)=>{for(const e of n.listeners)e.tc(t)&&(i=!0)})),i&&Ru(n)}(i.eventManager,t),e.length&&i.Dc.To(e),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function zu(e,t,n){const i=eo(e);i.sharedClientState.updateQueryState(t,"rejected",n);const s=i.Oc.get(t),r=s&&s.key;if(r){let e=new Ic(Bo.comparator);e=e.insert(r,ia.newNoDocument(r,vo.min()));const n=Lc().add(r),s=new Uc(vo.min(),new Map,new _c(mo),e,n);await qu(i,s),i.kc=i.kc.remove(r),i.Oc.delete(t),Zu(i)}else await yh(i.localStore,t,!1).then((()=>Qu(i,t,n))).catch(sh)}async function Hu(e,t){const n=eo(e),i=t.batch.batchId;try{const e=await function(e,t){const n=eo(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const i=t.batch.keys(),s=n.Bs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,i){const s=n.batch,r=s.keys();let o=Hl.resolve();return r.forEach((e=>{o=o.next((()=>i.getEntry(t,e))).next((t=>{const r=n.docVersions.get(e);Zr(null!==r),t.version.compareTo(r)<0&&(s.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),i.addEntry(t)))}))})),o.next((()=>e.gs.removeMutationBatch(t,s)))}(n,e,t,s).next((()=>s.apply(e))).next((()=>n.gs.performConsistencyCheck(e))).next((()=>n.Us.Es(e,i)))}))}(n.localStore,t);Gu(n,i,null),Ku(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await ed(n,e)}catch(e){await sh(e)}}async function Wu(e,t,n){const i=eo(e);try{const e=await function(e,t){const n=eo(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let i;return n.gs.lookupMutationBatch(e,t).next((t=>(Zr(null!==t),i=t.keys(),n.gs.removeMutationBatch(e,t)))).next((()=>n.gs.performConsistencyCheck(e))).next((()=>n.Us.Es(e,i)))}))}(i.localStore,t);Gu(i,t,n),Ku(i,t),i.sharedClientState.updateMutationState(t,"rejected",n),await ed(i,e)}catch(n){await sh(n)}}function Ku(e,t){(e.Fc.get(t)||[]).forEach((e=>{e.resolve()})),e.Fc.delete(t)}function Gu(e,t,n){const i=eo(e);let s=i.$c[i.currentUser.toKey()];if(s){const e=s.get(t);e&&(n?e.reject(n):e.resolve(),s=s.remove(t)),i.$c[i.currentUser.toKey()]=s}}function Qu(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const i of e.Nc.get(t))e.Cc.delete(i),n&&e.Dc.qc(i,n);e.Nc.delete(t),e.isPrimaryClient&&e.Mc.si(t).forEach((t=>{e.Mc.containsKey(t)||Ju(e,t)}))}function Ju(e,t){e.xc.delete(t.path.canonicalString());const n=e.kc.get(t);null!==n&&(Qh(e.remoteStore,n),e.kc=e.kc.remove(t),e.Oc.delete(n),Zu(e))}function Xu(e,t,n){for(const i of n)i instanceof Ou?(e.Mc.addReference(i.key,t),Yu(e,i)):i instanceof Lu?(Gr("SyncEngine","Document no longer in limbo: "+i.key),e.Mc.removeReference(i.key,t),e.Mc.containsKey(i.key)||Ju(e,i.key)):Yr()}function Yu(e,t){const n=t.key,i=n.path.canonicalString();e.kc.get(n)||e.xc.has(i)||(Gr("SyncEngine","New document in limbo: "+n),e.xc.add(i),Zu(e))}function Zu(e){for(;e.xc.size>0&&e.kc.size<e.maxConcurrentLimboResolutions;){const t=e.xc.values().next().value;e.xc.delete(t);const n=new Bo(Io.fromString(t)),i=e.Bc.next();e.Oc.set(i,new Uu(n)),e.kc=e.kc.insert(n,i),Gh(e.remoteStore,new Jl(Oa(_a(n.path)),i,2,uo.A))}}async function ed(e,t,n){const i=eo(e),s=[],r=[],o=[];i.Cc.isEmpty()||(i.Cc.forEach(((e,a)=>{o.push(i.Uc(a,t,n).then((e=>{if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(a.targetId,e.fromCache?"not-current":"current"),s.push(e);const t=ch.Ss(a.targetId,e);r.push(t)}})))})),await Promise.all(o),i.Dc.To(s),await async function(e,t){const n=eo(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>Hl.forEach(t,(t=>Hl.forEach(t.vs,(i=>n.persistence.referenceDelegate.addReference(e,t.targetId,i))).next((()=>Hl.forEach(t.Vs,(i=>n.persistence.referenceDelegate.removeReference(e,t.targetId,i)))))))))}catch(e){if(!Wl(e))throw e;Gr("LocalStore","Failed to update sequence numbers: "+e)}for(const e of t){const t=e.targetId;if(!e.fromCache){const e=n.Ms.get(t),i=e.snapshotVersion,s=e.withLastLimboFreeSnapshotVersion(i);n.Ms=n.Ms.insert(t,s)}}}(i.localStore,r))}async function td(e,t){const n=eo(e);if(!n.currentUser.isEqual(t)){Gr("SyncEngine","User change. New user:",t.toKey());const e=await dh(n.localStore,t);n.currentUser=t,function(e,t){e.Fc.forEach((e=>{e.forEach((e=>{e.reject(new no(to.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.Fc.clear()}(n),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await ed(n,e.qs)}}function nd(e,t){const n=eo(e),i=n.Oc.get(t);if(i&&i.Sc)return Lc().add(i.key);{let e=Lc();const i=n.Nc.get(t);if(!i)return e;for(const t of i){const i=n.Cc.get(t);e=e.unionWith(i.view.yc)}return e}}function id(e){const t=eo(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=qu.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=nd.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=zu.bind(null,t),t.Dc.To=Au.bind(null,t.eventManager),t.Dc.qc=Nu.bind(null,t.eventManager),t}function sd(e){const t=eo(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Hu.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Wu.bind(null,t),t}class rd{constructor(){this.synchronizeTabs=!1}async initialize(e){this.O=Vh(e.databaseInfo.databaseId),this.sharedClientState=this.Gc(e),this.persistence=this.jc(e),await this.persistence.start(),this.gcScheduler=this.Qc(e),this.localStore=this.Wc(e)}Qc(e){return null}Wc(e){return uh(this.persistence,new lh,e.initialUser,this.O)}jc(e){return new Ch(Ah.bi,this.O)}Gc(e){return new Rh}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class od{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>$u(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=td.bind(null,this.syncEngine),await yu(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new _u}createDatastore(e){const t=Vh(e.databaseInfo.databaseId),n=(i=e.databaseInfo,new Mh(i));var i;return function(e,t,n,i){return new $h(e,t,n,i)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,i=e.asyncQueue,s=e=>$u(this.syncEngine,e,0),r=Oh.Vt()?new Oh:new Dh,new Hh(t,n,i,s,r);var t,n,i,s,r}createSyncEngine(e,t){return function(e,t,n,i,s,r,o){const a=new Vu(e,t,n,i,s,r);return o&&(a.Lc=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=eo(e);Gr("RemoteStore","RemoteStore shutting down."),t.Ko.add(5),await Kh(t),t.jo.shutdown(),t.Qo.set("Unknown")}(this.remoteStore)}}class ad{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Hc(this.observer.next,e)}error(e){this.observer.error?this.Hc(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Jc(){this.muted=!0}Hc(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class cd{constructor(e,t,n,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=i,this.user=zr.UNAUTHENTICATED,this.clientId=fo.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{Gr("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(Gr("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new no(to.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new io;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=ku(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function ld(e,t){e.asyncQueue.verifyOperationInProgress(),Gr("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let i=n.initialUser;e.setCredentialChangeListener((async e=>{i.isEqual(e)||(await dh(t.localStore,e),i=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e.offlineComponents=t}async function hd(e,t){e.asyncQueue.verifyOperationInProgress();const n=await ud(e);Gr("FirestoreClient","Initializing OnlineComponentProvider");const i=await e.getConfiguration();await t.initialize(n,i),e.setCredentialChangeListener((e=>gu(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>gu(t.remoteStore,n))),e.onlineComponents=t}async function ud(e){return e.offlineComponents||(Gr("FirestoreClient","Using default OfflineComponentProvider"),await ld(e,new rd)),e.offlineComponents}async function dd(e){return e.onlineComponents||(Gr("FirestoreClient","Using default OnlineComponentProvider"),await hd(e,new od)),e.onlineComponents}function pd(e){return dd(e).then((e=>e.syncEngine))}async function fd(e){const t=await dd(e),n=t.eventManager;return n.onListen=Fu.bind(null,t.syncEngine),n.onUnlisten=ju.bind(null,t.syncEngine),n}function md(e,t,n={}){const i=new io;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,i,s){const r=new ad({next:n=>{t.enqueueAndForget((()=>xu(e,o))),n.fromCache&&"server"===i.source?s.reject(new no(to.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):s.resolve(n)},error:e=>s.reject(e)}),o=new Du(n,r,{includeMetadataChanges:!0,uc:!0});return Cu(e,o)}(await fd(e),e.asyncQueue,t,n,i))),i.promise}const gd=new Map;function yd(e,t,n){if(!n)throw new no(to.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function vd(e){if(!Bo.isDocumentKey(e))throw new no(to.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function bd(e){if(Bo.isDocumentKey(e))throw new no(to.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function wd(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":Yr()}function kd(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new no(to.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=wd(e);throw new no(to.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}class Ed{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new no(to.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new no(to.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,function(e,t,n,i){if(!0===t&&!0===i)throw new no(to.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Id{constructor(e,t,n){this._authCredentials=t,this._appCheckCredentials=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ed({}),this._settingsFrozen=!1,e instanceof Mo?this._databaseId=e:(this._app=e,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new no(to.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Mo(e.options.projectId)}(e))}get app(){if(!this._app)throw new no(to.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new no(to.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ed(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new ro;switch(e.type){case"gapi":const t=e.client;return Zr(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new co(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new no(to.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=gd.get(e);t&&(Gr("ComponentProvider","Removing Datastore"),gd.delete(e),t.terminate())}(this),Promise.resolve()}}class Td{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _d(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Td(this.firestore,e,this._key)}}class Sd{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Sd(this.firestore,e,this._query)}}class _d extends Sd{constructor(e,t,n){super(e,t,_a(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Td(this.firestore,null,new Bo(e))}withConverter(e){return new _d(this.firestore,e,this._path)}}function Cd(e,t,...n){if(e=nt(e),yd("collection","path",t),e instanceof Id){const i=Io.fromString(t,...n);return bd(i),new _d(e,null,i)}{if(!(e instanceof Td||e instanceof _d))throw new no(to.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(Io.fromString(t,...n));return bd(i),new _d(e.firestore,null,i)}}function xd(e,t,...n){if(e=nt(e),1===arguments.length&&(t=fo.R()),yd("doc","path",t),e instanceof Id){const i=Io.fromString(t,...n);return vd(i),new Td(e,null,new Bo(i))}{if(!(e instanceof Td||e instanceof _d))throw new no(to.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(Io.fromString(t,...n));return vd(i),new Td(e.firestore,e instanceof _d?e.converter:null,new Bo(i))}}class Ad{constructor(){this.hu=Promise.resolve(),this.lu=[],this.fu=!1,this.du=[],this._u=null,this.wu=!1,this.mu=!1,this.gu=[],this.ro=new Fh(this,"async_queue_retry"),this.yu=()=>{const e=Uh();e&&Gr("AsyncQueue","Visibility state changed to "+e.visibilityState),this.ro.Yr()};const e=Uh();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.yu)}get isShuttingDown(){return this.fu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.fu){this.fu=!0,this.mu=e||!1;const t=Uh();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.yu)}}enqueue(e){if(this.pu(),this.fu)return new Promise((()=>{}));const t=new io;return this.Iu((()=>this.fu&&this.mu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.lu.push(e),this.Eu())))}async Eu(){if(0!==this.lu.length){try{await this.lu[0](),this.lu.shift(),this.ro.reset()}catch(e){if(!Wl(e))throw e;Gr("AsyncQueue","Operation failed with retryable error: "+e)}this.lu.length>0&&this.ro.Hr((()=>this.Eu()))}}Iu(e){const t=this.hu.then((()=>(this.wu=!0,e().catch((e=>{this._u=e,this.wu=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Qr("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.wu=!1,e))))));return this.hu=t,t}enqueueAfterDelay(e,t,n){this.pu(),this.gu.indexOf(e)>-1&&(t=0);const i=wu.createAndSchedule(this,e,t,n,(e=>this.Tu(e)));return this.du.push(i),i}pu(){this._u&&Yr()}verifyOperationInProgress(){}async Au(){let e;do{e=this.hu,await e}while(e!==this.hu)}Ru(e){for(const t of this.du)if(t.timerId===e)return!0;return!1}Pu(e){return this.Au().then((()=>{this.du.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.du)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Au()}))}bu(e){this.gu.push(e)}Tu(e){const t=this.du.indexOf(e);this.du.splice(t,1)}}class Nd extends Id{constructor(e,t,n){super(e,t,n),this.type="firestore",this._queue=new Ad,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||Dd(this),this._firestoreClient.terminate()}}function Rd(e){return e._firestoreClient||Dd(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Dd(e){var t;const n=e._freezeSettings(),i=function(e,t,n,i){return new Po(e,t,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,i.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new cd(e._authCredentials,e._appCheckCredentials,e._queue,i)}class Od{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new no(to.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new So(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ld{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ld(Co.fromBase64String(e))}catch(e){throw new no(to.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Ld(Co.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Pd{constructor(e){this._methodName=e}}class Md{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new no(to.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new no(to.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return mo(this._lat,e._lat)||mo(this._long,e._long)}}const Ud=/^__.*__$/;class Vd{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new dc(e,this.data,this.fieldMask,t,this.fieldTransforms):new uc(e,this.data,t,this.fieldTransforms)}}class Fd{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new dc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Bd(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Yr()}}class jd{constructor(e,t,n,i,s,r){this.settings=e,this.databaseId=t,this.O=n,this.ignoreUndefinedProperties=i,void 0===s&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=r||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}Su(e){return new jd(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.O,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Du(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Su({path:n,Cu:!1});return i.Nu(e),i}xu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Su({path:n,Cu:!1});return i.vu(),i}ku(e){return this.Su({path:void 0,Cu:!0})}Ou(e){return tp(e,this.settings.methodName,this.settings.Mu||!1,this.path,this.settings.$u)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Nu(this.path.get(e))}Nu(e){if(0===e.length)throw this.Ou("Document fields must not be empty");if(Bd(this.Vu)&&Ud.test(e))throw this.Ou('Document fields cannot begin and end with "__"')}}class qd{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.O=n||Vh(e)}Fu(e,t,n,i=!1){return new jd({Vu:e,methodName:t,$u:n,path:So.emptyPath(),Cu:!1,Mu:i},this.databaseId,this.O,this.ignoreUndefinedProperties)}}function $d(e){const t=e._freezeSettings(),n=Vh(e._databaseId);return new qd(e._databaseId,!!t.ignoreUndefinedProperties,n)}function zd(e,t,n,i,s,r={}){const o=e.Fu(r.merge||r.mergeFields?2:0,t,n,s);Xd("Data must be an object, but it was:",o,i);const a=Qd(i,o);let c,l;if(r.merge)c=new _o(o.fieldMask),l=o.fieldTransforms;else if(r.mergeFields){const e=[];for(const i of r.mergeFields){const s=Yd(t,i,n);if(!o.contains(s))throw new no(to.INVALID_ARGUMENT,`Field '${s}' is specified in your field mask but missing from your input data.`);np(e,s)||e.push(s)}c=new _o(e),l=o.fieldTransforms.filter((e=>c.covers(e.field)))}else c=null,l=o.fieldTransforms;return new Vd(new ta(a),c,l)}class Hd extends Pd{_toFieldTransform(e){if(2!==e.Vu)throw 1===e.Vu?e.Ou(`${this._methodName}() can only appear at the top level of your update data`):e.Ou(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Hd}}function Wd(e,t,n,i){const s=e.Fu(1,t,n);Xd("Data must be an object, but it was:",s,i);const r=[],o=ta.empty();wo(i,((e,i)=>{const a=ep(t,e,n);i=nt(i);const c=s.xu(a);if(i instanceof Hd)r.push(a);else{const e=Gd(i,c);null!=e&&(r.push(a),o.set(a,e))}}));const a=new _o(r);return new Fd(o,a,s.fieldTransforms)}function Kd(e,t,n,i,s,r){const o=e.Fu(1,t,n),a=[Yd(t,i,n)],c=[s];if(r.length%2!=0)throw new no(to.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let e=0;e<r.length;e+=2)a.push(Yd(t,r[e])),c.push(r[e+1]);const l=[],h=ta.empty();for(let e=a.length-1;e>=0;--e)if(!np(l,a[e])){const t=a[e];let n=c[e];n=nt(n);const i=o.xu(t);if(n instanceof Hd)l.push(t);else{const e=Gd(n,i);null!=e&&(l.push(t),h.set(t,e))}}const u=new _o(l);return new Fd(h,u,o.fieldTransforms)}function Gd(e,t){if(Jd(e=nt(e)))return Xd("Unsupported field value:",t,e),Qd(e,t);if(e instanceof Pd)return function(e,t){if(!Bd(t.Vu))throw t.Ou(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Ou(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Cu&&4!==t.Vu)throw t.Ou("Nested arrays are not supported");return function(e,t){const n=[];let i=0;for(const s of e){let e=Gd(s,t.ku(i));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),i++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=nt(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return $a(t.O,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=yo.fromDate(e);return{timestampValue:Qc(t.O,n)}}if(e instanceof yo){const n=new yo(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Qc(t.O,n)}}if(e instanceof Md)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Ld)return{bytesValue:Jc(t.O,e._byteString)};if(e instanceof Td){const n=t.databaseId,i=e.firestore._databaseId;if(!i.isEqual(n))throw t.Ou(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Zc(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Ou(`Unsupported field value: ${wd(e)}`)}(e,t)}function Qd(e,t){const n={};return ko(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):wo(e,((e,i)=>{const s=Gd(i,t.Du(e));null!=s&&(n[e]=s)})),{mapValue:{fields:n}}}function Jd(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof yo||e instanceof Md||e instanceof Ld||e instanceof Td||e instanceof Pd)}function Xd(e,t,n){if(!Jd(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const i=wd(n);throw"an object"===i?t.Ou(e+" a custom object"):t.Ou(e+" "+i)}}function Yd(e,t,n){if((t=nt(t))instanceof Od)return t._internalPath;if("string"==typeof t)return ep(e,t);throw tp("Field path arguments must be of type string or ",e,!1,void 0,n)}const Zd=new RegExp("[~\\*/\\[\\]]");function ep(e,t,n){if(t.search(Zd)>=0)throw tp(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Od(...t.split("."))._internalPath}catch(i){throw tp(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function tp(e,t,n,i,s){const r=i&&!i.isEmpty(),o=void 0!==s;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(r||o)&&(c+=" (found",r&&(c+=` in field ${i}`),o&&(c+=` in document ${s}`),c+=")"),new no(to.INVALID_ARGUMENT,a+e+c)}function np(e,t){return e.some((e=>e.isEqual(t)))}class ip{constructor(e,t,n,i,s){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Td(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new sp(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(rp("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class sp extends ip{data(){return super.data()}}function rp(e,t){return"string"==typeof t?ep(e,t):t instanceof Od?t._internalPath:t._delegate._internalPath}class op{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ap extends ip{constructor(e,t,n,i,s,r){super(e,t,n,i,r),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new cp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(rp("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class cp extends ap{data(e={}){return super.data(e)}}class lp{constructor(e,t,n,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new op(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new cp(this._firestore,this._userDataWriter,n.key,n,new op(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new no(to.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>({type:"added",doc:new cp(e._firestore,e._userDataWriter,n.doc.key,n.doc,new op(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:t++})))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const i=new cp(e._firestore,e._userDataWriter,t.doc.key,t.doc,new op(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let s=-1,r=-1;return 0!==t.type&&(s=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),r=n.indexOf(t.doc.key)),{type:hp(t.type),doc:i,oldIndex:s,newIndex:r}}))}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function hp(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Yr()}}function up(e){if(xa(e)&&0===e.explicitOrderBy.length)throw new no(to.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class dp{convertValue(e,t="none"){switch(qo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return No(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ro(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Yr()}}convertObject(e,t){const n={};return wo(e.fields,((e,i)=>{n[e]=this.convertValue(i,t)})),n}convertGeoPoint(e){return new Md(No(e.latitude),No(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Oo(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Lo(e));default:return null}}convertTimestamp(e){const t=Ao(e);return new yo(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Io.fromString(e);Zr(wl(n));const i=new Mo(n.get(1),n.get(3)),s=new Bo(n.popFirst(5));return i.isEqual(t)||Qr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function pp(e,t,n){let i;return i=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,i}class fp extends dp{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ld(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Td(this.firestore,null,t)}}function mp(e,t){return function(e,t){const n=new io;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const i=sd(e);try{const e=await function(e,t){const n=eo(e),i=yo.now(),s=t.reduce(((e,t)=>e.add(t.key)),Lc());let r;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>n.Us.Es(e,s).next((s=>{r=s;const o=[];for(const e of t){const t=cc(e,r.get(e.key));null!=t&&o.push(new dc(e.key,t,na(t.value.mapValue),ic.exists(!0)))}return n.gs.addMutationBatch(e,i,o,t)})))).then((e=>(e.applyToLocalDocumentSet(r),{batchId:e.batchId,changes:r})))}(i.localStore,t);i.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let i=e.$c[e.currentUser.toKey()];i||(i=new Ic(mo)),i=i.insert(t,n),e.$c[e.currentUser.toKey()]=i}(i,e.batchId,n),await ed(i,e.changes),await au(i.remoteStore)}catch(e){const t=ku(e,"Failed to persist write");n.reject(t)}}(await pd(e),t,n))),n.promise}(Rd(e),t)}!function(e,t=!0){Hr="9.6.7",It(new it("firestore",((e,{options:n})=>{const i=e.getProvider("app").getImmediate(),s=new Nd(i,new oo(e.getProvider("auth-internal")),new ho(e.getProvider("app-check-internal")));return n=Object.assign({useFetchStreams:t},n),s._setSettings(n),s}),"PUBLIC")),At($r,"3.4.5",e),At($r,"3.4.5","esm2017")}();function gp(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(e);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(n[i[s]]=e[i[s]])}return n}Object.create;Object.create;function yp(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const vp=yp,bp=new Ke("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),wp=new pt("@firebase/auth");function kp(e,...t){wp.logLevel<=ct.ERROR&&wp.error(`Auth (9.6.7): ${e}`,...t)}function Ep(e,...t){throw Sp(e,...t)}function Ip(e,...t){return Sp(e,...t)}function Tp(e,t,n){const i=Object.assign(Object.assign({},vp()),{[t]:n});return new Ke("auth","Firebase",i).create(t,{appName:e.name})}function Sp(e,...t){if("string"!=typeof e){const n=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(n,...i)}return bp.create(e,...t)}function _p(e,t,...n){if(!e)throw Sp(t,...n)}function Cp(e){const t="INTERNAL ASSERTION FAILED: "+e;throw kp(t),new Error(t)}function xp(e,t){e||Cp(t)}const Ap=new Map;function Np(e){xp(e instanceof Function,"Expected a class definition");let t=Ap.get(e);return t?(xp(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Ap.set(e,t),t)}function Rp(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Dp(){return"http:"===Op()||"https:"===Op()}function Op(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class Lp{constructor(e,t){this.shortDelay=e,this.longDelay=t,xp(t>e,"Short delay should be less than long delay!"),this.isMobile=qe()||ze()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Dp()||$e()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function Pp(e,t){xp(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class Mp{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Cp("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Cp("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Cp("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Up={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Vp=new Lp(3e4,6e4);function Fp(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Bp(e,t,n,i,s={}){return jp(e,s,(async()=>{let s={},r={};i&&("GET"===t?r=i:s={body:JSON.stringify(i)});const o=Xe(Object.assign({key:e.config.apiKey},r)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),Mp.fetch()($p(e,e.config.apiHost,n,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},s))}))}async function jp(e,t,n){e._canInitEmulator=!1;const i=Object.assign(Object.assign({},Up),t);try{const t=new zp(e),s=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const r=await s.json();if("needConfirmation"in r)throw Hp(e,"account-exists-with-different-credential",r);if(s.ok&&!("errorMessage"in r))return r;{const t=s.ok?r.errorMessage:r.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Hp(e,"credential-already-in-use",r);if("EMAIL_EXISTS"===n)throw Hp(e,"email-already-in-use",r);const a=i[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw Tp(e,a,o);Ep(e,a)}}catch(t){if(t instanceof We)throw t;Ep(e,"network-request-failed")}}async function qp(e,t,n,i,s={}){const r=await Bp(e,t,n,i,s);return"mfaPendingCredential"in r&&Ep(e,"multi-factor-auth-required",{_serverResponse:r}),r}function $p(e,t,n,i){const s=`${t}${n}?${i}`;return e.config.emulator?Pp(e.config,s):`${e.config.apiScheme}://${s}`}class zp{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(Ip(this.auth,"network-request-failed"))),Vp.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function Hp(e,t,n){const i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const s=Ip(e,t,i);return s.customData._tokenResponse=n,s}function Wp(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(e){}}function Kp(e){return 1e3*Number(e)}function Gp(e){const[t,n,i]=e.split(".");if(void 0===t||void 0===n||void 0===i)return kp("JWT malformed, contained fewer than 3 sections"),null;try{const e=Fe(n);return e?JSON.parse(e):(kp("Failed to decode base64 JWT payload"),null)}catch(e){return kp("Caught error parsing JWT payload as JSON",e),null}}async function Qp(e,t,n=!1){if(n)return t;try{return await t}catch(t){throw t instanceof We&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}(t)&&e.auth.currentUser===e&&await e.auth.signOut(),t}}class Jp{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===e.code&&this.schedule(!0))}this.schedule()}}class Xp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Wp(this.lastLoginAt),this.creationTime=Wp(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Yp(e){var t;const n=e.auth,i=await e.getIdToken(),s=await Qp(e,async function(e,t){return Bp(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:i}));_p(null==s?void 0:s.users.length,n,"internal-error");const r=s.users[0];e._notifyReloadListener(r);const o=(null===(t=r.providerUserInfo)||void 0===t?void 0:t.length)?r.providerUserInfo.map((e=>{var{providerId:t}=e,n=gp(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[];const a=(c=e.providerData,l=o,[...c.filter((e=>!l.some((t=>t.providerId===e.providerId)))),...l]);var c,l;const h=e.isAnonymous,u=!(e.email&&r.passwordHash||(null==a?void 0:a.length)),d=!!h&&u,p={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new Xp(r.createdAt,r.lastLoginAt),isAnonymous:d};Object.assign(e,p)}class Zp{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){_p(e.idToken,"internal-error"),_p(void 0!==e.idToken,"internal-error"),_p(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):function(e){const t=Gp(e);return _p(t,"internal-error"),_p(void 0!==t.exp,"internal-error"),_p(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e,t=!1){return _p(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:i,expiresIn:s}=await async function(e,t){const n=await jp(e,{},(async()=>{const n=Xe({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=e.config,r=$p(e,i,"/v1/token",`key=${s}`),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",Mp.fetch()(r,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,i,Number(s))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:i,expirationTime:s}=t,r=new Zp;return n&&(_p("string"==typeof n,"internal-error",{appName:e}),r.refreshToken=n),i&&(_p("string"==typeof i,"internal-error",{appName:e}),r.accessToken=i),s&&(_p("number"==typeof s,"internal-error",{appName:e}),r.expirationTime=s),r}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Zp,this.toJSON())}_performRefresh(){return Cp("not implemented")}}function ef(e,t){_p("string"==typeof e||void 0===e,"internal-error",{appName:t})}class tf{constructor(e){var{uid:t,auth:n,stsTokenManager:i}=e,s=gp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Jp(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Xp(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Qp(this,this.stsTokenManager.getToken(this.auth,e));return _p(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e,t=!1){const n=nt(e),i=await n.getIdToken(t),s=Gp(i);_p(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const r="object"==typeof s.firebase?s.firebase:void 0,o=null==r?void 0:r.sign_in_provider;return{claims:s,token:i,authTime:Wp(Kp(s.auth_time)),issuedAtTime:Wp(Kp(s.iat)),expirationTime:Wp(Kp(s.exp)),signInProvider:o||null,signInSecondFactor:(null==r?void 0:r.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=nt(e);await Yp(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(_p(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new tf(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){_p(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Yp(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Qp(this,async function(e,t){return Bp(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,i,s,r,o,a,c,l;const h=null!==(n=t.displayName)&&void 0!==n?n:void 0,u=null!==(i=t.email)&&void 0!==i?i:void 0,d=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,p=null!==(r=t.photoURL)&&void 0!==r?r:void 0,f=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(c=t.createdAt)&&void 0!==c?c:void 0,y=null!==(l=t.lastLoginAt)&&void 0!==l?l:void 0,{uid:v,emailVerified:b,isAnonymous:w,providerData:k,stsTokenManager:E}=t;_p(v&&E,e,"internal-error");const I=Zp.fromJSON(this.name,E);_p("string"==typeof v,e,"internal-error"),ef(h,e.name),ef(u,e.name),_p("boolean"==typeof b,e,"internal-error"),_p("boolean"==typeof w,e,"internal-error"),ef(d,e.name),ef(p,e.name),ef(f,e.name),ef(m,e.name),ef(g,e.name),ef(y,e.name);const T=new tf({uid:v,auth:e,email:u,emailVerified:b,displayName:h,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:f,stsTokenManager:I,createdAt:g,lastLoginAt:y});return k&&Array.isArray(k)&&(T.providerData=k.map((e=>Object.assign({},e)))),m&&(T._redirectEventId=m),T}static async _fromIdTokenResponse(e,t,n=!1){const i=new Zp;i.updateFromServerResponse(t);const s=new tf({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await Yp(s),s}}class nf{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}nf.type="NONE";const sf=nf;function rf(e,t,n){return`firebase:${e}:${t}:${n}`}class of{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:i,name:s}=this.auth;this.fullUserKey=rf(this.userKey,i.apiKey,s),this.fullPersistenceKey=rf("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?tf._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new of(Np(sf),e,n);const i=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let s=i[0]||Np(sf);const r=rf(n,e.config.apiKey,e.name);let o=null;for(const n of t)try{const t=await n._get(r);if(t){const i=tf._fromJSON(e,t);n!==s&&(o=i),s=n;break}}catch(e){}const a=i.filter((e=>e._shouldAllowMigration));return s._shouldAllowMigration&&a.length?(s=a[0],o&&await s._set(r,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==s)try{await e._remove(r)}catch(e){}}))),new of(s,e,n)):new of(s,e,n)}}function af(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(uf(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(cf(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(pf(t))return"Blackberry";if(ff(t))return"Webos";if(lf(t))return"Safari";if((t.includes("chrome/")||hf(t))&&!t.includes("edge/"))return"Chrome";if(df(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function cf(e=je()){return/firefox\//i.test(e)}function lf(e=je()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function hf(e=je()){return/crios\//i.test(e)}function uf(e=je()){return/iemobile/i.test(e)}function df(e=je()){return/android/i.test(e)}function pf(e=je()){return/blackberry/i.test(e)}function ff(e=je()){return/webos/i.test(e)}function mf(e=je()){return/iphone|ipad|ipod/i.test(e)}function gf(e=je()){return mf(e)||df(e)||ff(e)||pf(e)||/windows phone/i.test(e)||uf(e)}function yf(e,t=[]){let n;switch(e){case"Browser":n=af(je());break;case"Worker":n=`${af(je())}-${e}`;break;default:n=e}return`${n}/JsCore/9.6.7/${t.length?t.join(","):"FirebaseCore-web"}`}class vf{constructor(e,t){this.app=e,this.config=t,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new wf(this),this.idTokenSubscription=new wf(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=bp,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=t.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Np(t)),this._initializationPromise=this.queue((async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await of.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(e){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e):void 0}async initializeCurrentUser(e){var t;let n=await this.assertedPersistence.getCurrentUser();if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null==n?void 0:n._redirectEventId,r=await this.tryRedirectSignIn(e);i&&i!==s||!(null==r?void 0:r.user)||(n=r.user)}return n?n._redirectEventId?(_p(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)):this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(e){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Yp(e)}catch(e){if("auth/network-request-failed"!==e.code)return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?nt(e):null;return t&&_p(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){if(!this._deleted)return e&&_p(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(Np(e))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ke("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Np(e)||this._popupRedirectResolver;_p(t,this,"argument-error"),this.redirectPersistenceManager=await of.create(this,[Np(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,i){if(this._deleted)return()=>{};const s="function"==typeof t?t:t.next.bind(t),r=this._isInitialized?Promise.resolve():this._initializationPromise;return _p(r,this,"internal-error"),r.then((()=>s(this.currentUser))),"function"==typeof t?e.addObserver(t,n,i):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&(this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh()),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return _p(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=yf(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};return this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId),e}}function bf(e){return nt(e)}class wf{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new et(e,t);return n.subscribe.bind(n)}((e=>this.observer=e))}get next(){return _p(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}class kf{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Cp("not implemented")}_getIdTokenResponse(e){return Cp("not implemented")}_linkToIdToken(e,t){return Cp("not implemented")}_getReauthenticationResolver(e){return Cp("not implemented")}}async function Ef(e,t){return Bp(e,"POST","/v1/accounts:update",t)}class If extends kf{constructor(e,t,n,i=null){super("password",n),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new If(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new If(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return async function(e,t){return qp(e,"POST","/v1/accounts:signInWithPassword",Fp(e,t))}(e,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return qp(e,"POST","/v1/accounts:signInWithEmailLink",Fp(e,t))}(e,{email:this._email,oobCode:this._password});default:Ep(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Ef(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return qp(e,"POST","/v1/accounts:signInWithEmailLink",Fp(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Ep(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Tf(e,t){return qp(e,"POST","/v1/accounts:signInWithIdp",Fp(e,t))}class Sf extends kf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Sf(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ep("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:i}=t,s=gp(t,["providerId","signInMethod"]);if(!n||!i)return null;const r=new Sf(n,i);return r.idToken=s.idToken||void 0,r.accessToken=s.accessToken||void 0,r.secret=s.secret,r.nonce=s.nonce,r.pendingToken=s.pendingToken||null,r}_getIdTokenResponse(e){return Tf(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Tf(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Tf(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Xe(t)}return e}}const _f={USER_NOT_FOUND:"user-not-found"};class Cf extends kf{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Cf({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Cf({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return qp(e,"POST","/v1/accounts:signInWithPhoneNumber",Fp(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await qp(e,"POST","/v1/accounts:signInWithPhoneNumber",Fp(e,t));if(n.temporaryProof)throw Hp(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return qp(e,"POST","/v1/accounts:signInWithPhoneNumber",Fp(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),_f)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:i}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:s}=e;return n||t||i||s?new Cf({verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:s}):null}}class xf{constructor(e){var t,n,i,s,r,o;const a=Ye(Ze(e)),c=null!==(t=a.apiKey)&&void 0!==t?t:null,l=null!==(n=a.oobCode)&&void 0!==n?n:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=a.mode)&&void 0!==i?i:null);_p(c&&l&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=l,this.continueUrl=null!==(s=a.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(r=a.languageCode)&&void 0!==r?r:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=Ye(Ze(e)).link,n=t?Ye(Ze(t)).deep_link_id:null,i=Ye(Ze(e)).deep_link_id;return(i?Ye(Ze(i)).link:null)||i||n||t||e}(e);try{return new xf(t)}catch(e){return null}}}class Af{constructor(){this.providerId=Af.PROVIDER_ID}static credential(e,t){return If._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=xf.parseLink(t);return _p(n,"argument-error"),If._fromEmailAndCode(e,n.code,n.tenantId)}}Af.PROVIDER_ID="password",Af.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Af.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Nf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Rf extends Nf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Df extends Rf{constructor(){super("facebook.com")}static credential(e){return Sf._fromParams({providerId:Df.PROVIDER_ID,signInMethod:Df.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Df.credentialFromTaggedObject(e)}static credentialFromError(e){return Df.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return Df.credential(e.oauthAccessToken)}catch(e){return null}}}Df.FACEBOOK_SIGN_IN_METHOD="facebook.com",Df.PROVIDER_ID="facebook.com";class Of extends Rf{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Sf._fromParams({providerId:Of.PROVIDER_ID,signInMethod:Of.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Of.credentialFromTaggedObject(e)}static credentialFromError(e){return Of.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return Of.credential(t,n)}catch(e){return null}}}Of.GOOGLE_SIGN_IN_METHOD="google.com",Of.PROVIDER_ID="google.com";class Lf extends Rf{constructor(){super("github.com")}static credential(e){return Sf._fromParams({providerId:Lf.PROVIDER_ID,signInMethod:Lf.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Lf.credentialFromTaggedObject(e)}static credentialFromError(e){return Lf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return Lf.credential(e.oauthAccessToken)}catch(e){return null}}}Lf.GITHUB_SIGN_IN_METHOD="github.com",Lf.PROVIDER_ID="github.com";class Pf extends Rf{constructor(){super("twitter.com")}static credential(e,t){return Sf._fromParams({providerId:Pf.PROVIDER_ID,signInMethod:Pf.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Pf.credentialFromTaggedObject(e)}static credentialFromError(e){return Pf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return Pf.credential(t,n)}catch(e){return null}}}Pf.TWITTER_SIGN_IN_METHOD="twitter.com",Pf.PROVIDER_ID="twitter.com";class Mf{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,i=!1){const s=await tf._fromIdTokenResponse(e,n,i),r=Uf(n);return new Mf({user:s,providerId:r,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const i=Uf(n);return new Mf({user:e,providerId:i,_tokenResponse:n,operationType:t})}}function Uf(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Vf extends We{constructor(e,t,n,i){var s;super(t.code,t.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,Vf.prototype),this.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,i){return new Vf(e,t,n,i)}}function Ff(e,t,n,i){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw Vf._fromErrorAndOperation(e,n,t,i);throw n}))}async function Bf(e,t,n=!1){const i=await Qp(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Mf._forOperation(e,"link",i)}async function jf(e,t,n=!1){const{auth:i}=e,s="reauthenticate";try{const r=await Qp(e,Ff(i,s,t,e),n);_p(r.idToken,i,"internal-error");const o=Gp(r.idToken);_p(o,i,"internal-error");const{sub:a}=o;return _p(e.uid===a,i,"user-mismatch"),Mf._forOperation(e,s,r)}catch(e){throw"auth/user-not-found"===(null==e?void 0:e.code)&&Ep(i,"user-mismatch"),e}}async function qf(e,t,n=!1){const i="signIn",s=await Ff(e,i,t),r=await Mf._fromIdTokenResponse(e,i,s);return n||await e._updateCurrentUser(r.user),r}async function $f(e,t){return qf(bf(e),t)}new WeakMap;const zf="__sak";class Hf{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(zf,"1"),this.storage.removeItem(zf),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Wf extends Hf{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=je();return lf(e)||mf(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=gf(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),i=this.localCache[t];n!==i&&e(t,i,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const i=this.storage.getItem(n);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const i=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},s=this.storage.getItem(n);He()&&10===document.documentMode&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,10):i()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Wf.type="LOCAL";const Kf=Wf;class Gf extends Hf{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Gf.type="SESSION";const Qf=Gf;class Jf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new Jf(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:i,data:s}=t.data,r=this.handlersMap[i];if(!(null==r?void 0:r.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const o=Array.from(r).map((async e=>e(t.origin,s))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(e){return{fulfilled:!1,reason:e}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Xf(e="",t=10){let n="";for(let e=0;e<t;e++)n+=Math.floor(10*Math.random());return e+n}Jf.receivers=[];class Yf{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const i="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,r;return new Promise(((o,a)=>{const c=Xf("",20);i.port1.start();const l=setTimeout((()=>{a(new Error("unsupported_event"))}),n);r={messageChannel:i,onMessage(e){const t=e;if(t.data.eventId===c)switch(t.data.status){case"ack":clearTimeout(l),s=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(s),o(t.data.response);break;default:clearTimeout(l),clearTimeout(s),a(new Error("invalid_response"))}}},this.handlers.add(r),i.port1.addEventListener("message",r.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[i.port2])})).finally((()=>{r&&this.removeMessageHandler(r)}))}}function Zf(){return window}function em(){return void 0!==Zf().WorkerGlobalScope&&"function"==typeof Zf().importScripts}const tm="firebaseLocalStorageDb",nm="firebaseLocalStorage",im="fbase_key";class sm{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function rm(e,t){return e.transaction([nm],t?"readwrite":"readonly").objectStore(nm)}function om(){const e=indexedDB.open(tm,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(nm,{keyPath:im})}catch(e){n(e)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(nm)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(tm);return new sm(e).toPromise()}(),t(await om()))}))}))}async function am(e,t,n){const i=rm(e,!0).put({[im]:t,value:n});return new sm(i).toPromise()}function cm(e,t){const n=rm(e,!0).delete(t);return new sm(n).toPromise()}class lm{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await om()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(e){if(t++>3)throw e;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return em()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Jf._getInstance(em()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Yf(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(e){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await om();return await am(e,zf,"1"),await cm(e,zf),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>am(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=rm(e,!1).get(t),i=await new sm(n).toPromise();return void 0===i?null:i.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>cm(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=rm(e,!1).getAll();return new sm(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;for(const{fbase_key:i,value:s}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const e of Object.keys(this.localCache))this.localCache[e]&&!n.has(e)&&(this.notifyListeners(e,null),t.push(e));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}lm.type="LOCAL";const hm=lm;function um(e){return new Promise(((t,n)=>{const i=document.createElement("script");i.setAttribute("src",e),i.onload=t,i.onerror=e=>{const t=Ip("internal-error");t.customData=e,n(t)},i.type="text/javascript",i.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(i)}))}function dm(e){return`__${e}${Math.floor(1e6*Math.random())}`}dm("rcb"),new Lp(3e4,6e4);const pm="recaptcha";async function fm(e,t,n){var i;const s=await n.verify();try{let r;if(_p("string"==typeof s,e,"argument-error"),_p(n.type===pm,e,"argument-error"),r="string"==typeof t?{phoneNumber:t}:t,"session"in r){const t=r.session;if("phoneNumber"in r){_p("enroll"===t.type,e,"internal-error");const n=await function(e,t){return Bp(e,"POST","/v2/accounts/mfaEnrollment:start",Fp(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:r.phoneNumber,recaptchaToken:s}});return n.phoneSessionInfo.sessionInfo}{_p("signin"===t.type,e,"internal-error");const n=(null===(i=r.multiFactorHint)||void 0===i?void 0:i.uid)||r.multiFactorUid;_p(n,e,"missing-multi-factor-info");const o=await function(e,t){return Bp(e,"POST","/v2/accounts/mfaSignIn:start",Fp(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:s}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return Bp(e,"POST","/v1/accounts:sendVerificationCode",Fp(e,t))}(e,{phoneNumber:r.phoneNumber,recaptchaToken:s});return t}}finally{n._reset()}}class mm{constructor(e){this.providerId=mm.PROVIDER_ID,this.auth=bf(e)}verifyPhoneNumber(e,t){return fm(this.auth,e,nt(t))}static credential(e,t){return Cf._fromVerification(e,t)}static credentialFromResult(e){const t=e;return mm.credentialFromTaggedObject(t)}static credentialFromError(e){return mm.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:n}=e;return t&&n?Cf._fromTokenResponse(t,n):null}}function gm(e,t){return t?Np(t):(_p(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}mm.PROVIDER_ID="phone",mm.PHONE_SIGN_IN_METHOD="phone";class ym extends kf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Tf(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Tf(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Tf(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function vm(e){return qf(e.auth,new ym(e),e.bypassAuthState)}function bm(e){const{auth:t,user:n}=e;return _p(n,t,"internal-error"),jf(n,new ym(e),e.bypassAuthState)}async function wm(e){const{auth:t,user:n}=e;return _p(n,t,"internal-error"),Bf(n,new ym(e),e.bypassAuthState)}class km{constructor(e,t,n,i,s=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:i,tenantId:s,error:r,type:o}=e;if(r)return void this.reject(r);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return vm;case"linkViaPopup":case"linkViaRedirect":return wm;case"reauthViaPopup":case"reauthViaRedirect":return bm;default:Ep(this.auth,"internal-error")}}resolve(e){xp(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){xp(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Em=new Lp(2e3,1e4);class Im extends km{constructor(e,t,n,i,s){super(e,t,i,s),this.provider=n,this.authWindow=null,this.pollId=null,Im.currentPopupAction&&Im.currentPopupAction.cancel(),Im.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return _p(e,this.auth,"internal-error"),e}async onExecution(){xp(1===this.filter.length,"Popup operations only handle one event");const e=Xf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(Ip(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Ip(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Im.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(Ip(this.auth,"popup-closed-by-user"))}),2e3):this.pollId=window.setTimeout(e,Em.get())};e()}}Im.currentPopupAction=null;const Tm=new Map;class Sm extends km{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=Tm.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Cm(t),i=_m(e);if(!await i._isAvailable())return!1;const s="true"===await i._get(n);return await i._remove(n),s}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}Tm.set(this.auth._key(),e)}return this.bypassAuthState||Tm.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function _m(e){return Np(e._redirectPersistence)}function Cm(e){return rf("pendingRedirect",e.config.apiKey,e.name)}async function xm(e,t,n=!1){const i=bf(e),s=gm(i,t),r=new Sm(i,s,n),o=await r.execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,t)),o}class Am{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Rm(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Rm(e)){const i=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Ip(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Nm(e))}saveEventToCache(e){this.cachedEventUids.add(Nm(e)),this.lastProcessedEventTime=Date.now()}}function Nm(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function Rm({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}const Dm=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Om=/^https?/;async function Lm(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e,t={}){return Bp(e,"GET","/v1/projects",t)}(e);for(const e of t)try{if(Pm(e))return}catch(e){}Ep(e,"unauthorized-domain")}function Pm(e){const t=Rp(),{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){const s=new URL(e);return""===s.hostname&&""===i?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&s.hostname===i}if(!Om.test(n))return!1;if(Dm.test(e))return i===e;const s=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}const Mm=new Lp(3e4,6e4);function Um(){const e=Zf().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let t=0;t<e.CP.length;t++)e.CP[t]=null}let Vm=null;function Fm(e){return Vm=Vm||function(e){return new Promise(((t,n)=>{var i,s,r;function o(){Um(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Um(),n(Ip(e,"network-request-failed"))},timeout:Mm.get()})}if(null===(s=null===(i=Zf().gapi)||void 0===i?void 0:i.iframes)||void 0===s?void 0:s.Iframe)t(gapi.iframes.getContext());else{if(!(null===(r=Zf().gapi)||void 0===r?void 0:r.load)){const t=dm("iframefcb");return Zf()[t]=()=>{gapi.load?o():n(Ip(e,"network-request-failed"))},um(`https://apis.google.com/js/api.js?onload=${t}`).catch((e=>n(e)))}o()}})).catch((e=>{throw Vm=null,e}))}(e),Vm}const Bm=new Lp(5e3,15e3),jm={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},qm=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function $m(e){const t=e.config;_p(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Pp(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,i={apiKey:t.apiKey,appName:e.name,v:Ct},s=qm.get(e.config.apiHost);s&&(i.eid=s);const r=e._getFrameworks();return r.length&&(i.fw=r.join(",")),`${n}?${Xe(i).slice(1)}`}const zm={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Hm{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function Wm(e,t,n,i=500,s=600){const r=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const c=Object.assign(Object.assign({},zm),{width:i.toString(),height:s.toString(),top:r,left:o}),l=je().toLowerCase();n&&(a=hf(l)?"_blank":n),cf(l)&&(t=t||"http://localhost",c.scrollbars="yes");const h=Object.entries(c).reduce(((e,[t,n])=>`${e}${t}=${n},`),"");if(function(e=je()){var t;return mf(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(l)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}(t||"",a),new Hm(null);const u=window.open(t||"",a,h);_p(u,e,"popup-blocked");try{u.focus()}catch(e){}return new Hm(u)}const Km="__/auth/handler",Gm="emulator/auth/handler";function Qm(e,t,n,i,s,r){_p(e.config.authDomain,e,"auth-domain-config-required"),_p(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:Ct,eventId:s};if(t instanceof Nf){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(r||{}))o[e]=t}if(t instanceof Rf){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const e of Object.keys(a))void 0===a[e]&&delete a[e];return`${function({config:e}){if(!e.emulator)return`https://${e.authDomain}/${Km}`;return Pp(e,Gm)}(e)}?${Xe(a).slice(1)}`}const Jm="webStorageSupport";const Xm=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Qf,this._completeRedirectFn=xm}async _openPopup(e,t,n,i){var s;xp(null===(s=this.eventManagers[e._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()");return Wm(e,Qm(e,t,n,Rp(),i),Xf())}async _openRedirect(e,t,n,i){var s;return await this._originValidation(e),s=Qm(e,t,n,Rp(),i),Zf().location.href=s,new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(xp(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await async function(e){const t=await Fm(e),n=Zf().gapi;return _p(n,e,"internal-error"),t.open({where:document.body,url:$m(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:jm,dontclear:!0},(t=>new Promise((async(n,i)=>{await t.restyle({setHideOnLeave:!1});const s=Ip(e,"network-request-failed"),r=Zf().setTimeout((()=>{i(s)}),Bm.get());function o(){Zf().clearTimeout(r),n(t)}t.ping(o).then(o,(()=>{i(s)}))}))))}(e),n=new Am(e);return t.register("authEvent",(t=>{_p(null==t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Jm,{type:Jm},(n=>{var i;const s=null===(i=null==n?void 0:n[0])||void 0===i?void 0:i.webStorageSupport;void 0!==s&&t(!!s),Ep(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Lm(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return gf()||lf()||mf()}};var Ym,Zm="@firebase/auth",eg="0.19.9";class tg{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){_p(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}Ym="Browser",It(new it("auth",((e,{options:t})=>{const n=e.getProvider("app").getImmediate(),{apiKey:i,authDomain:s}=n.options;return(e=>{_p(i&&!i.includes(":"),"invalid-api-key",{appName:e.name}),_p(!(null==s?void 0:s.includes(":")),"argument-error",{appName:e.name});const n={apiKey:i,authDomain:s,clientPlatform:Ym,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:yf(Ym)},r=new vf(e,n);return function(e,t){const n=(null==t?void 0:t.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Np);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,null==t?void 0:t.popupRedirectResolver)}(r,t),r})(n)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),It(new it("auth-internal",(e=>(e=>new tg(e))(bf(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),At(Zm,eg,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Ym)),At(Zm,eg,"esm2017");!function(e,t={}){if("object"!=typeof t){t={name:t}}const n=Object.assign({name:vt,automaticDataCollectionEnabled:!1},t),i=n.name;if("string"!=typeof i||!i)throw St.create("bad-app-name",{appName:String(i)});const s=wt.get(i);if(s){if(Qe(e,s.options)&&Qe(n,s.config))return s;throw St.create("duplicate-app",{appName:i})}const r=new ot(i);for(const e of kt.values())r.addComponent(e);const o=new _t(e,n,r);wt.set(i,o)}({apiKey:"AIzaSyC7u7onosp1Z9MxJGo9JUV6CeCDzOM67Mk",authDomain:"dashboard-private.firebaseapp.com",projectId:"dashboard-private",storageBucket:"dashboard-private.appspot.com",messagingSenderId:"826138711028",appId:"1:826138711028:web:c2be2b631c2672349c5fa1"});const ng=function(e=xt()){return Tt(e,"firestore").getImmediate()}(),ig=function(e=xt()){const t=Tt(e,"auth");return t.isInitialized()?t.getImmediate():function(e,t){const n=Tt(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(Qe(n.getOptions(),null!=t?t:{}))return e;Ep(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Xm,persistence:[hm,Kf,Qf]})}(),sg=()=>function(e){e=kd(e,Sd);const t=kd(e.firestore,Nd),n=Rd(t),i=new fp(t);return up(e._query),md(n,e._query).then((n=>new lp(t,i,e,n)))}(function(e,...t){for(const n of t)e=n._apply(e);return e}(Cd(ng,"backgrounds"))),rg=(e,t)=>function(e,t,n){return $f(nt(e),Af.credential(t,n))}(ig,e,t),og=e=>function(e,t,n){e=kd(e,Td);const i=kd(e.firestore,Nd),s=pp(e.converter,t,n);return mp(i,[zd($d(i),"setDoc",e._key,s,null!==e.converter,n).toMutation(e._key,ic.none())])}(xd(Cd(ng,"backgrounds")),e),ag=e=>function(e,t,n,...i){e=kd(e,Td);const s=kd(e.firestore,Nd),r=$d(s);let o;return o="string"==typeof(t=nt(t))||t instanceof Od?Kd(r,"updateDoc",e._key,t,n,i):Wd(r,"updateDoc",e._key,t),mp(s,[o.toMutation(e._key,ic.exists(!0))])}(xd(Cd(ng,"backgrounds"),e.id),e),cg=()=>{const e=j();let t={title:"",preview:"",artwork:"",download:"",youtube:"",tags:""};e.id&&(t=pe("user-data")[0].backgrounds.find((t=>t.id===e.id)));const[n,i]=de("add-bg-name",t.title),[s,r]=de("add-bg-preview",t.preview),[o,a]=de("add-bg-artwork",t.artwork),[c,l]=de("add-bg-yt",t.youtube),[h,u]=de("add-bg-dwld",t.download),[d,p]=de("add-bg-tags",t.tags),[f,m]=de("add-bg-loading",!1);return ae({style:{className:"add-abg",normal:{position:"fixed",inset:"0px",zIndex:4,height:"100%",padding:"20px",backgroundColor:"#1e1e1eee",justifyContent:"center"}},children:f?ae({style:{className:"loading-overlay",scoped:!0,normal:{alignItems:"center"}},children:[le({color:"white"}),se({height:"10px"}),ne({text:"Working ..."})]}):[we("/edit/animated-backgrounds"),ae({style:{className:"add-animated-bg",scoped:!0,normal:{backgroundImage:`url(${s})`,backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center center",borderRadius:"5px",border:"1px solid #424242"}},children:[ae({style:{className:"add-edit-background-bg",normal:{padding:"50px 100px",backdropFilter:"blur(5px)",borderRadius:"5px"}},children:[ee({text:e.id?"Edit Animated Background":"New Animated Background"}),se({height:"10px"}),Me("add-bg-name","name"),se({height:"10px"}),Me("add-bg-artwork","artwork link"),se({height:"10px"}),Me("add-bg-preview","preview link"),se({height:"10px"}),Me("add-bg-yt","youtube link"),se({height:"10px"}),Me("add-bg-dwld","download link"),se({height:"10px"}),Me("add-bg-tags","tags"),se({height:"10px"}),Pe(e.id?"Commit":"Add",(()=>{m(!0),e.id?ag({title:n,artwork:o,download:h,preview:s,tags:d,youtube:c}).then((()=>{fe((()=>{a(""),u(""),r(""),i(""),l(""),p(""),m(!1)}))})).catch((()=>{})):og({title:n,artwork:o,download:h,preview:s,tags:d,youtube:c}).then((()=>{fe((()=>{a(""),u(""),r(""),i(""),l(""),p(""),m(!1)}))})).catch((()=>{}))}))]})]})]})},lg=()=>ae({style:{className:"fixed-edit-anim-bg",normal:{position:"fixed",background:"#1e1e1eef",inset:"0px"}},children:[H(),ae({style:{className:"sticky-edit-anim-layer",normal:{position:"sticky",padding:"40px 20px",textAlign:"center",height:"100%"}},children:[J({className:"fa-solid fa-circle-xmark",style:{className:"edit-x",normal:{fontSize:"2em",position:"absolute",top:"40px",right:"40px",cursor:"pointer"},hover:{transform:"scale(1.3)"}},events:{onClick:()=>{$("/edit")}}}),J({className:"fa-solid fa-circle-plus",style:{className:"add-anim",normal:{fontSize:"2.5em",position:"fixed",bottom:"40px",right:"40px",cursor:"pointer"},hover:{transform:"scale(1.3)"}},events:{onClick:()=>$("/edit/animated-backgrounds/add")}}),Ie(!1,(e=>Q({style:{className:"animated-background-link",normal:{color:"white",textDecoration:"none"}},to:`/edit/animated-backgrounds/:${e.id};`,children:Ee(e)})))]})]}),hg=()=>{const[e]=de("login-email",""),[t]=de("login-password",""),[n,i]=de("login-loading",!1),[s,r]=de("login-alert","");return ae({style:{className:"fixed-login",normal:{position:"fixed",inset:"0px",justifyContent:"center",alignItems:"center",background:"#1e1e1eee"}},children:[ae({style:{className:"login-popup",normal:{width:"400px",border:"1px solid #42424277",padding:"40px 20px",borderRadius:"10px"}},children:n?ae({style:{className:"loading-screen",normal:{alignItems:"center"}},children:[le({color:"white"}),se({height:"10px"}),ne({text:"Signing in ..."})]}):[J({className:"fa-solid fa-circle-xmark",style:{className:"login-x",normal:{fontSize:"2em",position:"absolute",top:"40px",right:"40px",cursor:"pointer"},hover:{transform:"scale(1.3)"}},events:{onClick:()=>{$("/")}}}),ee({text:"Login"}),se({height:"20px"}),Me("login-email","email"),se({height:"10px"}),Me("login-password","password","password"),se({height:"10px"}),Pe("Login",(()=>{i(!0),rg(e,t).then((e=>{fe((()=>{pe("user")[1]({auth:!0,user:e.user}),i(!1),$("/edit")}))})).catch((e=>{fe((()=>{i(!1),r(e)}))}))})),s?ne({text:s,style:{className:"login-alert",normal:{color:"red",marginTop:"10px"}}}):""]})]})},ug=(e,t,n)=>Q({to:t,events:{onClick:()=>{pe("show-drawer")[1](!1)}},style:{className:"drawer-nav-button",normal:{color:"white",textDecoration:"none",marginBottom:"5px"},hover:{background:"#ffffff22"}},children:[ce({style:{className:"drawer-nav-button-content",normal:{padding:"15px 20px"}},children:[J({className:n,style:{className:"drawer-nav-button-icon",normal:{width:"25px"}}}),se({width:"20px"}),G({text:e})]})]}),dg=(e=(()=>{}))=>W({text:J({className:"fa-solid fa-bars"}),style:{className:"sticky-bar-show-drawer-button",normal:{margin:"auto 5px",background:"none",color:"inherit",border:"none",fontSize:"1.5em",height:"55px",marginLeft:"20px",cursor:"pointer"}},events:{onClick:e}}),pg=e=>te({text:"Riadh Adrani",style:{className:"heading-title-riadh-adrani"+(e?"-hide":""),normal:{display:"flex",alignItems:"center",fontSize:"1.25em"},mediaQueries:[e?{condition:"(max-width:600px)",normal:{display:"none"}}:{}]}}),fg=()=>{const[e,t]=pe("show-drawer");return ce({style:{className:"drawer-back-layer",normal:{position:"sticky",inset:"0px",width:"100%",zIndex:e?1:-3,background:e?"#00000077":"#00000000",transition:"0.2s"}},events:{onClick:()=>{t(!1)}},children:[ie({style:{className:"drawer-overlay",normal:{position:"absolute",height:"100vh",width:"100%",inset:"0px",zIndex:e?1:-3,background:e?"#00000077":"#00000000",transition:"0.2s"}}}),ae({events:{onClick:e=>{e.stopPropagation()}},style:{className:"drawer",normal:{position:"absolute",height:"100vh",left:"0px",top:"0px",background:"#1b1b1b",borderRight:"1px solid #00000055",width:"260px",transform:e?"translateX(0px)":"translateX(-270px)",transition:"0.4s",zIndex:2}},children:[ce({children:[dg((()=>t(!1))),pg()]}),se({height:"10px"}),ug("Home","/","fa-solid fa-house"),ug("Skills","/skills","fa-solid fa-laptop-code"),ug("Projects","/projects","fa-solid fa-diagram-project"),ug("Academic Background","/academic-background","fa-solid fa-graduation-cap"),ug("Professional Career","/professional-career","fa-solid fa-briefcase"),ug("Animated Backgrounds","/animated-backgrounds","fa-solid fa-play"),ae({style:{className:"bot",scoped:!0,normal:{marginTop:"auto"}},children:ug("Edit","/edit","fa-solid fa-gear")})]})]})},mg=(e,t)=>X({href:t,target:"blank",children:[J({className:e,style:{className:"social-buttons",normal:{fontSize:"1.25em",color:"white",padding:"5px"}}})]}),gg=()=>{const[e,t]=pe("show-drawer");return ce({hooks:{onRef:()=>"sticky-bar"},style:{className:"sticky-bar",normal:{position:"sticky",top:"0px",height:"55px",width:"100%",background:"#1a1a1a"}},children:[ce({children:[dg((()=>{t(!0)})),pg(!0)]}),ce({style:{className:"social-media-links",scoped:!0,normal:{alignItems:"center",marginLeft:"auto",marginRight:"20px"}},children:[mg("fa-brands fa-github","https://github.com/RiadhAdrani"),mg("fa-brands fa-youtube","https://www.youtube.com/c/AdraniRiadh"),mg("fa-brands fa-twitter","https://twitter.com/adrani_riadh"),mg("fa-brands fa-linkedin","https://www.linkedin.com/in/riadh-adrani/"),mg("fa-brands fa-behance","https://www.behance.net/adraniriadh")]})]})};var yg,vg,bg,wg,kg,Eg;yg=!1,b.devMode=yg,vg={import:["url('https://fonts.googleapis.com/css2?family=Rubik:ital,wght@0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap')"],selectors:{"body,html":{margin:"0px",display:"flex",flexDirection:"column",textAlign:"center",height:"100%",background:"#1e1e1e",fontFamily:"Rubik",color:"white",lineHeight:1.3},p:{margin:"0px"},"h1,h2,h3,h4,h5,h6,p":{margin:"0px",padding:"5px"},".container":{margin:"30px 100px"},".timeline-view":{flex:1,margin:"0px 70px"},"::-webkit-scrollbar":{width:"7.5px"},"::-webkit-scrollbar-track":{background:"#1e1e1e"},"::-webkit-scrollbar-thumb":{background:"#404040"},"::-webkit-scrollbar-thumb:hover":{background:"#0e0e0e"}},media:{"(max-width:800px)":{".container":{margin:"30px 15px"},".timeline-view":{margin:"0px 10px"}},"(max-width:600px)":{".container":{margin:"30px 5px"}}}},h.singleton.injectStaticStyle(vg),bg=me({name:"/",component:Ce,subRoutes:[me({name:"/skills",component:Le}),me({name:"/projects",component:De}),me({name:"/academic-background",component:ve}),me({name:"/professional-career",component:Ae}),me({name:"/animated-backgrounds",component:Ie,subRoutes:[me({name:"/:id;",component:ke,title:"Animated Background"})]}),me({name:"/edit",component:Se,subRoutes:[me({name:"/auth",component:hg}),me({name:"/animated-backgrounds",component:lg,subRoutes:[me({name:"/add",component:cg}),me({name:"/:id;",component:cg})]})]})]}),wg="RiadhAdrani",kg=!1,B.singleton=new B(bg,wg,kg),Eg=()=>{const[]=de("show-drawer",!1),[e,t]=de("user-data",{loaded:!1},(async()=>{const e=await Promise.all([sg()]);t({loaded:!0,backgrounds:e[0].docs.map((e=>({...e.data(),id:e.id})))})})),[]=de("user",{auth:!1});return ae({style:{className:"app-wrapper",normal:{minHeight:"100vh",width:"100%"}},children:e.loaded?[fg(),gg(),ae({style:{className:"rr",scoped:!0,normal:{flex:1}},children:H()})]:ae({style:{className:"loading-wrapper",scoped:!0,normal:{alignSelf:"center",alignItems:"center",margin:"auto 0px"}},children:[le({color:"white"}),se({height:"20px"}),ne({text:"Loading Data..."})]})})},b.singleton.app=Eg,b.singleton.render(),(()=>{if("/"!==window.location.pathname&&B.singleton){const e=window.location.pathname.replace("/"+B.singleton.root,""),t=location.hash;B.singleton.replaceWith(e,t)}})()})();